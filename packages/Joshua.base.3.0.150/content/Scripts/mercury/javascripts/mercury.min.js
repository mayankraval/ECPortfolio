window.Mercury={config:{toolbars:{primary:{preview:["Preview","Preview this page",{toggle:!0,mode:!0}],sep1:" ",undoredo:{undo:["Undo","Undo your last action"],redo:["Redo","Redo your last action"],sep:" "},insertLink:["Link","Insert Link",{modal:"/mercury/modals/link.html",regions:["full","markdown"]}],insertMedia:["Media","Insert Media (images and videos)",{modal:"/mercury/modals/media.html",regions:["full","markdown"]}],insertTable:["Table","Insert Table",{modal:"/mercury/modals/table.html",regions:["full","markdown"]}],insertCharacter:["Character","Special Characters",{modal:"/mercury/modals/character.html",regions:["full","markdown"]}]},editable:{_regions:["full","markdown"],predefined:{style:["Style",null,{select:"/mercury/selects/style.html",preload:!0}],sep1:" ",formatblock:["Block Format",null,{select:"/mercury/selects/formatblock.html",preload:!0}],sep2:"-"},colors:{backColor:["Background Color",null,{palette:"/mercury/palettes/backcolor.html",context:!0,preload:!0,regions:["full"]}],sep1:" ",foreColor:["Text Color",null,{palette:"/mercury/palettes/forecolor.html",context:!0,preload:!0,regions:["full"]}],sep2:"-"},decoration:{bold:["Bold",null,{context:!0}],italic:["Italicize",null,{context:!0}],overline:["Overline",null,{context:!0,regions:["full"]}],strikethrough:["Strikethrough",null,{context:!0,regions:["full"]}],underline:["Underline",null,{context:!0,regions:["full"]}],sep:"-"},script:{subscript:["Subscript",null,{context:!0}],superscript:["Superscript",null,{context:!0}],sep:"-"},justify:{justifyLeft:["Align Left",null,{context:!0,regions:["full"]}],justifyCenter:["Center",null,{context:!0,regions:["full"]}],justifyRight:["Align Right",null,{context:!0,regions:["full"]}],justifyFull:["Justify Full",null,{context:!0,regions:["full"]}],sep:"-"},list:{insertUnorderedList:["Unordered List",null,{context:!0}],insertOrderedList:["Numbered List",null,{context:!0}],sep:"-"},indent:{outdent:["Decrease Indentation"],indent:["Increase Indentation"],sep:"-"},table:{_context:!0,insertRowBefore:["Insert Table Row","Insert a table row before the cursor",{regions:["full"]}],insertRowAfter:["Insert Table Row","Insert a table row after the cursor",{regions:["full"]}],deleteRow:["Delete Table Row","Delete this table row",{regions:["full"]}],insertColumnBefore:["Insert Table Column","Insert a table column before the cursor",{regions:["full"]}],insertColumnAfter:["Insert Table Column","Insert a table column after the cursor",{regions:["full"]}],deleteColumn:["Delete Table Column","Delete this table column",{regions:["full"]}],sep1:" ",increaseColspan:["Increase Cell Columns","Increase the cells colspan"],decreaseColspan:["Decrease Cell Columns","Decrease the cells colspan and add a new cell"],increaseRowspan:["Increase Cell Rows","Increase the cells rowspan"],decreaseRowspan:["Decrease Cell Rows","Decrease the cells rowspan and add a new cell"],sep2:"-"},rules:{horizontalRule:["Horizontal Rule","Insert a horizontal rule"],sep1:"-"},formatting:{removeFormatting:["Remove Formatting","Remove formatting for the selection",{regions:["full"]}],sep2:" "},editors:{htmlEditor:["Edit HTML","Edit the HTML content",{regions:["full"]}]}},snippets:{_custom:!0,actions:{editSnippet:["Edit Snippet Settings"],sep1:" ",removeSnippet:["Remove Snippet"]}}},regions:{attribute:"data-mercury",identifier:"id",dataAttributes:[]},snippets:{method:"POST",optionsUrl:"/mercury/snippets/:name/options.html",previewUrl:"/mercury/snippets/:name/preview.html"},uploading:{enabled:!0,allowedMimeTypes:["image/jpeg","image/gif","image/png"],maxFileSize:1235242880,inputName:"image",url:"/admin/content/InlineImage",handler:!1},localization:{enabled:!0,preferredLocale:"swedish_chef-BORK"},behaviors:{htmlEditor:function(){Mercury.modal("/mercury/modals/htmleditor.html",{title:"HTML Editor",fullHeight:!0,handler:"htmlEditor"})}},globalBehaviors:{exit:function(){window.location.href=this.iframeSrc()},barrelRoll:function(){$("body").css({webkitTransform:"rotate(360deg)"})}},csrfSelector:'meta[name="csrf-token"]',csrfHeader:"X-CSRF-Token",editorUrlRegEx:/([http|https]:\/\/.[^\/]*)\/editor\/?(.*)/i,nonHijackableClasses:[],pasting:{sanitize:"whitelist",whitelist:{h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],table:[],thead:[],tbody:[],tfoot:[],tr:[],th:["colspan","rowspan"],td:["colspan","rowspan"],div:["class"],span:["class"],ul:[],ol:[],li:[],b:[],strong:[],i:[],em:[],u:[],strike:[],br:[],p:[],hr:[],a:["href","target","title","name"],img:["src","title","alt"]}},injectedStyles:'[data-mercury]       { min-height: 10px; outline: 1px dotted #09F } [data-mercury]:focus { outline: none; -webkit-box-shadow: 0 0 10px #09F, 0 0 1px #045; box-shadow: 0 0 10px #09F, 0 0 1px #045 }[data-mercury].focus { outline: none; -webkit-box-shadow: 0 0 10px #09F, 0 0 1px #045; box-shadow: 0 0 10px #09F, 0 0 1px #045 }[data-mercury]:after { content: "."; display: block; visibility: hidden; clear: both; height: 0; overflow: hidden; }[data-mercury] table { border: 1px dotted red; min-width: 6px; }[data-mercury] th    { border: 1px dotted red; min-width: 6px; }[data-mercury] td    { border: 1px dotted red; min-width: 6px; }[data-mercury] .mercury-textarea       { border: 0; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; resize: none; }[data-mercury] .mercury-textarea:focus { outline: none; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none; }'},silent:!0,debug:!1},function(n,t){function pr(n){var i=lt[n]={},t,r;for(n=n.split(/\s+/),t=0,r=n.length;t<r;t++)i[n[t]]=!0;return i}function yt(n,r,u){if(u===t&&n.nodeType===1){var f="data-"+r.replace(vt,"-$1").toLowerCase();if(u=n.getAttribute(f),typeof u=="string"){try{u=u==="true"?!0:u==="false"?!1:u==="null"?null:i.isNumeric(u)?parseFloat(u):at.test(u)?i.parseJSON(u):u}catch(e){}i.data(n,r,u)}else u=t}return u}function it(n){for(var t in n)if((t!=="data"||!i.isEmptyObject(n[t]))&&t!=="toJSON")return!1;return!0}function pt(n,t,r){var u=t+"defer",f=t+"queue",e=t+"mark",o=i._data(n,u);!o||r!=="queue"&&i._data(n,f)||r!=="mark"&&i._data(n,e)||setTimeout(function(){i._data(n,f)||i._data(n,e)||(i.removeData(n,u,!0),o.fire())},0)}function h(){return!1}function b(){return!0}function ri(n){return!n||!n.parentNode||n.parentNode.nodeType===11}function ui(n,t,r){if(t=t||0,i.isFunction(t))return i.grep(n,function(n,i){var u=!!t.call(n,i,n);return u===r});if(t.nodeType)return i.grep(n,function(n){return n===t===r});if(typeof t=="string"){var u=i.grep(n,function(n){return n.nodeType===1});if(su.test(t))return i.filter(t,u,!r);t=i.filter(t,u)}return i.grep(n,function(n){return i.inArray(n,t)>=0===r})}function fi(n){var i=ei.split(" "),t=n.createDocumentFragment();if(t.createElement)while(i.length)t.createElement(i.pop());return t}function gu(n){return i.nodeName(n,"table")?n.getElementsByTagName("tbody")[0]||n.appendChild(n.ownerDocument.createElement("tbody")):n}function ci(n,t){if(t.nodeType===1&&i.hasData(n)){var r,u,o,s=i._data(n),e=i._data(t,s),f=s.events;if(f){delete e.handle,e.events={};for(r in f)for(u=0,o=f[r].length;u<o;u++)i.event.add(t,r+(f[r][u].namespace?".":"")+f[r][u].namespace,f[r][u],f[r][u].data)}e.data&&(e.data=i.extend({},e.data))}}function li(n,t){var r;t.nodeType===1&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(n),r=t.nodeName.toLowerCase(),r==="object"?t.outerHTML=n.outerHTML:r==="input"&&(n.type==="checkbox"||n.type==="radio")?(n.checked&&(t.defaultChecked=t.checked=n.checked),t.value!==n.value&&(t.value=n.value)):r==="option"?t.selected=n.defaultSelected:(r==="input"||r==="textarea")&&(t.defaultValue=n.defaultValue),t.removeAttribute(i.expando))}function k(n){return typeof n.getElementsByTagName!="undefined"?n.getElementsByTagName("*"):typeof n.querySelectorAll!="undefined"?n.querySelectorAll("*"):[]}function ai(n){(n.type==="checkbox"||n.type==="radio")&&(n.defaultChecked=n.checked)}function vi(n){var t=(n.nodeName||"").toLowerCase();t==="input"?ai(n):t!=="script"&&typeof n.getElementsByTagName!="undefined"&&i.grep(n.getElementsByTagName("input"),ai)}function nf(n,t){t.src?i.ajax({url:t.src,async:!1,dataType:"script"}):i.globalEval((t.text||t.textContent||t.innerHTML||"").replace(ku,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)}function bi(n,t,r){var u=t==="width"?n.offsetWidth:n.offsetHeight,f=t==="width"?of:sf;return u>0?(r!=="border"&&i.each(f,function(){r||(u-=parseFloat(i.css(n,"padding"+this))||0),r==="margin"?u+=parseFloat(i.css(n,r+this))||0:u-=parseFloat(i.css(n,"border"+this+"Width"))||0}),u+"px"):(u=c(n,t,t),(u<0||u==null)&&(u=n.style[t]||0),u=parseFloat(u)||0,r&&i.each(f,function(){u+=parseFloat(i.css(n,"padding"+this))||0,r!=="padding"&&(u+=parseFloat(i.css(n,"border"+this+"Width"))||0),r==="margin"&&(u+=parseFloat(i.css(n,r+this))||0)}),u+"px")}function ur(n){return function(t,r){if(typeof t!="string"&&(r=t,t="*"),i.isFunction(r))for(var o=t.toLowerCase().split(gi),f=0,h=o.length,u,s,e;f<h;f++)u=o[f],e=/^\+/.test(u),e&&(u=u.substr(1)||"*"),s=n[u]=n[u]||[],s[e?"unshift":"push"](r)}}function d(n,i,r,u,f,e){f=f||i.dataTypes[0],e=e||{},e[f]=!0;for(var s=n[f],h=0,l=s?s.length:0,c=n===et,o;h<l&&(c||!o);h++)o=s[h](i,r,u),typeof o=="string"&&(!c||e[o]?o=t:(i.dataTypes.unshift(o),o=d(n,i,r,u,o,e)));return!c&&o||e["*"]||(o=d(n,i,r,u,"*",e)),o}function fr(n,r){var u,f,e=i.ajaxSettings.flatOptions||{};for(u in r)r[u]!==t&&((e[u]?n:f||(f={}))[u]=r[u]);f&&i.extend(!0,n,f)}function ot(n,t,r,u){if(i.isArray(t))i.each(t,function(t,f){r||cf.test(n)?u(n,f):ot(n+"["+(typeof f=="object"||i.isArray(f)?t:"")+"]",f,r,u)});else if(r||t==null||typeof t!="object")u(n,t);else for(var f in t)ot(n+"["+f+"]",t[f],r,u)}function df(n,i,r){var s=n.contents,f=n.dataTypes,c=n.responseFields,o,u,e,h;for(u in c)u in r&&(i[c[u]]=r[u]);while(f[0]==="*")f.shift(),o===t&&(o=n.mimeType||i.getResponseHeader("content-type"));if(o)for(u in s)if(s[u]&&s[u].test(o)){f.unshift(u);break}if(f[0]in r)e=f[0];else{for(u in r){if(!f[0]||n.converters[u+" "+f[0]]){e=u;break}h||(h=u)}e=e||h}if(e)return e!==f[0]&&f.unshift(e),r[e]}function gf(n,r){n.dataFilter&&(r=n.dataFilter(r,n.dataType));for(var v=n.dataTypes,s={},l,p=v.length,a,u=v[0],h,y,f,e,o,c=1;c<p;c++){if(c===1)for(l in n.converters)typeof l=="string"&&(s[l.toLowerCase()]=n.converters[l]);if(h=u,u=v[c],u==="*")u=h;else if(h!=="*"&&h!==u){if(y=h+" "+u,f=s[y]||s["* "+u],!f){o=t;for(e in s)if(a=e.split(" "),(a[0]===h||a[0]==="*")&&(o=s[a[1]+" "+u],o)){e=s[e],e===!0?f=o:o===!0&&(f=e);break}}f||o||i.error("No conversion from "+y.replace(" "," to ")),f!==!0&&(r=f?f(r):o(e(r)))}}return r}function sr(){try{return new n.XMLHttpRequest}catch(t){}}function ne(){try{return new n.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function cr(){return setTimeout(re,0),tt=i.now()}function re(){tt=t}function v(n,t){var r={};return i.each(hr.concat.apply([],hr.slice(0,t)),function(){r[this]=n}),r}function lr(n){if(!st[n]){var e=r.body,t=i("<"+n+">").appendTo(e),u=t.css("display");t.remove(),(u==="none"||u==="")&&(f||(f=r.createElement("iframe"),f.frameBorder=f.width=f.height=0),e.appendChild(f),a&&f.createElement||(a=(f.contentWindow||f.contentDocument).document,a.write((r.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),a.close()),t=a.createElement(n),a.body.appendChild(t),u=i.css(t,"display"),e.removeChild(f)),st[n]=u}return st[n]}function ct(n){return i.isWindow(n)?n:n.nodeType===9?n.defaultView||n.parentWindow:!1}var r=n.document,vr=n.navigator,yr=n.location,i=function(){function b(){if(!i.isReady){try{r.documentElement.doScroll("left")}catch(n){setTimeout(b,1);return}i.ready()}}var i=function(n,t){return new i.fn.init(n,t,c)},k=n.jQuery,d=n.$,c,g=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,l=/\S/,a=/^\s+/,v=/\s+$/,nt=/\d/,tt=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,it=/^[\],:{}\s]*$/,rt=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,ut=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ft=/(?:^|:|,)(?:\s*\[)+/g,et=/(webkit)[ \/]([\w.]+)/,ot=/(opera)(?:.*version)?[ \/]([\w.]+)/,st=/(msie) ([\w.]+)/,ht=/(mozilla)(?:.*? rv:([\w.]+))?/,ct=/-([a-z]|[0-9])/ig,lt=/^-ms-/,at=function(n,t){return(t+"").toUpperCase()},vt=vr.userAgent,e,o,u,yt=Object.prototype.toString,s=Object.prototype.hasOwnProperty,h=Array.prototype.push,f=Array.prototype.slice,y=String.prototype.trim,p=Array.prototype.indexOf,w={};return i.fn=i.prototype={constructor:i,init:function(n,u,f){var o,s,e,h;if(!n)return this;if(n.nodeType)return this.context=this[0]=n,this.length=1,this;if(n==="body"&&!u&&r.body)return this.context=r,this[0]=r.body,this.selector=n,this.length=1,this;if(typeof n=="string"){if(o=n.charAt(0)==="<"&&n.charAt(n.length-1)===">"&&n.length>=3?[null,n,null]:g.exec(n),o&&(o[1]||!u)){if(o[1])return u=u instanceof i?u[0]:u,h=u?u.ownerDocument||u:r,e=tt.exec(n),e?i.isPlainObject(u)?(n=[r.createElement(e[1])],i.fn.attr.call(n,u,!0)):n=[h.createElement(e[1])]:(e=i.buildFragment([o[1]],[h]),n=(e.cacheable?i.clone(e.fragment):e.fragment).childNodes),i.merge(this,n);if(s=r.getElementById(o[2]),s&&s.parentNode){if(s.id!==o[2])return f.find(n);this.length=1,this[0]=s}return this.context=r,this.selector=n,this}return!u||u.jquery?(u||f).find(n):this.constructor(u).find(n)}return i.isFunction(n)?f.ready(n):(n.selector!==t&&(this.selector=n.selector,this.context=n.context),i.makeArray(n,this))},selector:"",jquery:"1.7",length:0,size:function(){return this.length},toArray:function(){return f.call(this,0)},get:function(n){return n==null?this.toArray():n<0?this[this.length+n]:this[n]},pushStack:function(n,t,r){var u=this.constructor();return i.isArray(n)?h.apply(u,n):i.merge(u,n),u.prevObject=this,u.context=this.context,t==="find"?u.selector=this.selector+(this.selector?" ":"")+r:t&&(u.selector=this.selector+"."+t+"("+r+")"),u},each:function(n,t){return i.each(this,n,t)},ready:function(n){return i.bindReady(),o.add(n),this},eq:function(n){return n===-1?this.slice(n):this.slice(n,+n+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(f.apply(this,arguments),"slice",f.call(arguments).join(","))},map:function(n){return this.pushStack(i.map(this,function(t,i){return n.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice},i.fn.init.prototype=i.fn,i.extend=i.fn.extend=function(){var o,e,u,r,s,h,n=arguments[0]||{},f=1,l=arguments.length,c=!1;for(typeof n=="boolean"&&(c=n,n=arguments[1]||{},f=2),typeof n=="object"||i.isFunction(n)||(n={}),l===f&&(n=this,--f);f<l;f++)if((o=arguments[f])!=null)for(e in o)(u=n[e],r=o[e],n!==r)&&(c&&r&&(i.isPlainObject(r)||(s=i.isArray(r)))?(s?(s=!1,h=u&&i.isArray(u)?u:[]):h=u&&i.isPlainObject(u)?u:{},n[e]=i.extend(c,h,r)):r!==t&&(n[e]=r));return n},i.extend({noConflict:function(t){return n.$===i&&(n.$=d),t&&n.jQuery===i&&(n.jQuery=k),i},isReady:!1,readyWait:1,holdReady:function(n){n?i.readyWait++:i.ready(!0)},ready:function(n){if(n===!0&&!--i.readyWait||n!==!0&&!i.isReady){if(!r.body)return setTimeout(i.ready,1);if(i.isReady=!0,n!==!0&&--i.readyWait>0)return;o.fireWith(r,[i]),i.fn.trigger&&i(r).trigger("ready").unbind("ready")}},bindReady:function(){if(!o){if(o=i.Callbacks("once memory"),r.readyState==="complete")return setTimeout(i.ready,1);if(r.addEventListener)r.addEventListener("DOMContentLoaded",u,!1),n.addEventListener("load",i.ready,!1);else if(r.attachEvent){r.attachEvent("onreadystatechange",u),n.attachEvent("onload",i.ready);var t=!1;try{t=n.frameElement==null}catch(f){}r.documentElement.doScroll&&t&&b()}}},isFunction:function(n){return i.type(n)==="function"},isArray:Array.isArray||function(n){return i.type(n)==="array"},isWindow:function(n){return n&&typeof n=="object"&&"setInterval"in n},isNumeric:function(n){return n!=null&&nt.test(n)&&!isNaN(n)},type:function(n){return n==null?String(n):w[yt.call(n)]||"object"},isPlainObject:function(n){if(!n||i.type(n)!=="object"||n.nodeType||i.isWindow(n))return!1;try{if(n.constructor&&!s.call(n,"constructor")&&!s.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch(u){return!1}var r;for(r in n);return r===t||s.call(n,r)},isEmptyObject:function(n){for(var t in n)return!1;return!0},error:function(n){throw n;},parseJSON:function(t){if(typeof t!="string"||!t)return null;if(t=i.trim(t),n.JSON&&n.JSON.parse)return n.JSON.parse(t);if(it.test(t.replace(rt,"@").replace(ut,"]").replace(ft,"")))return new Function("return "+t)();i.error("Invalid JSON: "+t)},parseXML:function(r){var u,f;try{n.DOMParser?(f=new DOMParser,u=f.parseFromString(r,"text/xml")):(u=new ActiveXObject("Microsoft.XMLDOM"),u.async="false",u.loadXML(r))}catch(e){u=t}return u&&u.documentElement&&!u.getElementsByTagName("parsererror").length||i.error("Invalid XML: "+r),u},noop:function(){},globalEval:function(t){t&&l.test(t)&&(n.execScript||function(t){n.eval.call(n,t)})(t)},camelCase:function(n){return n.replace(lt,"ms-").replace(ct,at)},nodeName:function(n,t){return n.nodeName&&n.nodeName.toUpperCase()===t.toUpperCase()},each:function(n,r,u){var f,e=0,o=n.length,s=o===t||i.isFunction(n);if(u){if(s){for(f in n)if(r.apply(n[f],u)===!1)break}else for(;e<o;)if(r.apply(n[e++],u)===!1)break}else if(s){for(f in n)if(r.call(n[f],f,n[f])===!1)break}else for(;e<o;)if(r.call(n[e],e,n[e++])===!1)break;return n},trim:y?function(n){return n==null?"":y.call(n)}:function(n){return n==null?"":n.toString().replace(a,"").replace(v,"")},makeArray:function(n,t){var u=t||[],r;return n!=null&&(r=i.type(n),n.length==null||r==="string"||r==="function"||r==="regexp"||i.isWindow(n)?h.call(u,n):i.merge(u,n)),u},inArray:function(n,t,i){var r;if(t){if(p)return p.call(t,n,i);for(r=t.length,i=i?i<0?Math.max(0,r+i):i:0;i<r;i++)if(i in t&&t[i]===n)return i}return-1},merge:function(n,i){var u=n.length,r=0,f;if(typeof i.length=="number")for(f=i.length;r<f;r++)n[u++]=i[r];else while(i[r]!==t)n[u++]=i[r++];return n.length=u,n},grep:function(n,t,i){var u=[],f,r,e;for(i=!!i,r=0,e=n.length;r<e;r++)f=!!t(n[r],r),i!==f&&u.push(n[r]);return u},map:function(n,r,u){var f,h,e=[],s=0,o=n.length,c=n instanceof i||o!==t&&typeof o=="number"&&(o>0&&n[0]&&n[o-1]||o===0||i.isArray(n));if(c)for(;s<o;s++)f=r(n[s],s,u),f!=null&&(e[e.length]=f);else for(h in n)f=r(n[h],h,u),f!=null&&(e[e.length]=f);return e.concat.apply([],e)},guid:1,proxy:function(n,r){var e,o,u;return(typeof r=="string"&&(e=n[r],r=n,n=e),!i.isFunction(n))?t:(o=f.call(arguments,2),u=function(){return n.apply(r,o.concat(f.call(arguments)))},u.guid=n.guid=n.guid||u.guid||i.guid++,u)},access:function(n,r,u,f,e,o){var c=n.length,h,s;if(typeof r=="object"){for(h in r)i.access(n,h,r[h],f,e,u);return n}if(u!==t){for(f=!o&&f&&i.isFunction(u),s=0;s<c;s++)e(n[s],r,f?u.call(n[s],s,e(n[s],r)):u,o);return n}return c?e(n[0],r):t},now:function(){return(new Date).getTime()},uaMatch:function(n){n=n.toLowerCase();var t=et.exec(n)||ot.exec(n)||st.exec(n)||n.indexOf("compatible")<0&&ht.exec(n)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function n(t,i){return new n.fn.init(t,i)}i.extend(!0,n,this),n.superclass=this,n.fn=n.prototype=this(),n.fn.constructor=n,n.sub=this.sub,n.fn.init=function(r,u){return u&&u instanceof i&&!(u instanceof n)&&(u=n(u)),i.fn.init.call(this,r,u,t)},n.fn.init.prototype=n.fn;var t=n(r);return n},browser:{}}),i.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(n,t){w["[object "+t+"]"]=t.toLowerCase()}),e=i.uaMatch(vt),e.browser&&(i.browser[e.browser]=!0,i.browser.version=e.version),i.browser.webkit&&(i.browser.safari=!0),l.test(" ")&&(a=/^[\s\xA0]+/,v=/[\s\xA0]+$/),c=i(r),r.addEventListener?u=function(){r.removeEventListener("DOMContentLoaded",u,!1),i.ready()}:r.attachEvent&&(u=function(){r.readyState==="complete"&&(r.detachEvent("onreadystatechange",u),i.ready())}),typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return i}),i}(),lt={},p,at,vt,er,y,g,or,l,ar,ht;i.Callbacks=function(n){n=n?lt[n]||pr(n):{};var r=[],f=[],u,s,c,h,e,l=function(t){for(var u,e,f=0,s=t.length;f<s;f++)u=t[f],e=i.type(u),e==="array"?l(u):e==="function"&&(n.unique&&o.has(u)||r.push(u))},a=function(t,i){for(i=i||[],u=!n.memory||[t,i],s=!0,e=c||0,c=0,h=r.length;r&&e<h;e++)if(r[e].apply(t,i)===!1&&n.stopOnFalse){u=!0;break}s=!1,r&&(n.once?u===!0?o.disable():r=[]:f&&f.length&&(u=f.shift(),o.fireWith(u[0],u[1])))},o={add:function(){if(r){var n=r.length;l(arguments),s?h=r.length:u&&u!==!0&&(c=n,a(u[0],u[1]))}return this},remove:function(){var t;if(r)for(var u=arguments,i=0,f=u.length;i<f;i++)for(t=0;t<r.length;t++)if(u[i]===r[t]&&(s&&t<=h&&(h--,t<=e&&e--),r.splice(t--,1),n.unique))break;return this},has:function(n){if(r)for(var t=0,i=r.length;t<i;t++)if(n===r[t])return!0;return!1},empty:function(){return r=[],this},disable:function(){return r=f=u=t,this},disabled:function(){return!r},lock:function(){return f=t,u&&u!==!0||o.disable(),this},locked:function(){return!f},fireWith:function(t,i){return f&&(s?n.once||f.push([t,i]):n.once&&u||a(t,i)),this},fire:function(){return o.fireWith(this,arguments),this},fired:function(){return!!u}};return o},p=[].slice,i.extend({Deferred:function(n){var u=i.Callbacks("once memory"),f=i.Callbacks("once memory"),e=i.Callbacks("memory"),s="pending",h={resolve:u,reject:f,notify:e},o={done:u.add,fail:f.add,progress:e.add,state:function(){return s},isResolved:u.fired,isRejected:f.fired,then:function(n,i,r){return t.done(n).fail(i).progress(r),this},always:function(){return t.done.apply(t,arguments).fail.apply(t,arguments)},pipe:function(n,r,u){return i.Deferred(function(f){i.each({done:[n,"resolve"],fail:[r,"reject"],progress:[u,"notify"]},function(n,r){var e=r[0],o=r[1],u;i.isFunction(e)?t[n](function(){u=e.apply(this,arguments),u&&i.isFunction(u.promise)?u.promise().then(f.resolve,f.reject,f.notify):f[o+"With"](this===t?f:this,[u])}):t[n](f[o])})}).promise()},promise:function(n){if(n==null)n=o;else for(var t in o)n[t]=o[t];return n}},t=o.promise({}),r;for(r in h)t[r]=h[r].fire,t[r+"With"]=h[r].fireWith;return t.done(function(){s="resolved"},f.disable,e.lock).fail(function(){s="rejected"},u.disable,e.lock),n&&n.call(t,t),t},when:function(n){function h(n){return function(i){r[n]=arguments.length>1?p.call(arguments,0):i,--e||t.resolveWith(t,r)}}function c(n){return function(i){o[n]=arguments.length>1?p.call(arguments,0):i,t.notifyWith(s,o)}}var r=p.call(arguments,0),u=0,f=r.length,o=new Array(f),e=f,l=f,t=f<=1&&n&&i.isFunction(n.promise)?n:i.Deferred(),s=t.promise();if(f>1){for(;u<f;u++)r[u]&&r[u].promise&&i.isFunction(r[u].promise)?r[u].promise().then(h(u),t.reject,c(u)):--e;e||t.resolveWith(t,r)}else t!==n&&t.resolveWith(t,f?[n]:[]);return s}}),i.support=function(){var n=r.createElement("div"),d=r.documentElement,k,o,a,v,f,s,t,y,e,p,u,w,l,b,h,c;if(n.setAttribute("className","t"),n.innerHTML="   <link/><table><\/table><a href='/a' style='top:1px;float:left;opacity:.55;'>a<\/a><input type='checkbox'/><nav><\/nav>",k=n.getElementsByTagName("*"),o=n.getElementsByTagName("a")[0],!k||!k.length||!o)return{};a=r.createElement("select"),v=a.appendChild(r.createElement("option")),f=n.getElementsByTagName("input")[0],t={leadingWhitespace:n.firstChild.nodeType===3,tbody:!n.getElementsByTagName("tbody").length,htmlSerialize:!!n.getElementsByTagName("link").length,style:/top/.test(o.getAttribute("style")),hrefNormalized:o.getAttribute("href")==="/a",opacity:/^0.55/.test(o.style.opacity),cssFloat:!!o.style.cssFloat,unknownElems:!!n.getElementsByTagName("nav").length,checkOn:f.value==="on",optSelected:v.selected,getSetAttribute:n.className!=="t",enctype:!!r.createElement("form").enctype,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},f.checked=!0,t.noCloneChecked=f.cloneNode(!0).checked,a.disabled=!0,t.optDisabled=!v.disabled;try{delete n.test}catch(g){t.deleteExpando=!1}!n.addEventListener&&n.attachEvent&&n.fireEvent&&(n.attachEvent("onclick",function(){t.noCloneEvent=!1}),n.cloneNode(!0).fireEvent("onclick")),f=r.createElement("input"),f.value="t",f.setAttribute("type","radio"),t.radioValue=f.value==="t",f.setAttribute("checked","checked"),n.appendChild(f),y=r.createDocumentFragment(),y.appendChild(n.lastChild),t.checkClone=y.cloneNode(!0).cloneNode(!0).lastChild.checked,n.innerHTML="",n.style.width=n.style.paddingLeft="1px",e=r.getElementsByTagName("body")[0],u=r.createElement(e?"div":"body"),w={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},e&&i.extend(w,{position:"absolute",left:"-999px",top:"-999px"});for(h in w)u.style[h]=w[h];if(u.appendChild(n),p=e||d,p.insertBefore(u,p.firstChild),t.appendChecked=f.checked,t.boxModel=n.offsetWidth===2,"zoom"in n.style&&(n.style.display="inline",n.style.zoom=1,t.inlineBlockNeedsLayout=n.offsetWidth===2,n.style.display="",n.innerHTML="<div style='width:4px;'><\/div>",t.shrinkWrapBlocks=n.offsetWidth!==2),n.innerHTML="<table><tr><td style='padding:0;border:0;display:none'><\/td><td>t<\/td><\/tr><\/table>",l=n.getElementsByTagName("td"),c=l[0].offsetHeight===0,l[0].style.display="",l[1].style.display="none",t.reliableHiddenOffsets=c&&l[0].offsetHeight===0,n.innerHTML="",r.defaultView&&r.defaultView.getComputedStyle&&(s=r.createElement("div"),s.style.width="0",s.style.marginRight="0",n.appendChild(s),t.reliableMarginRight=(parseInt((r.defaultView.getComputedStyle(s,null)||{marginRight:0}).marginRight,10)||0)===0),n.attachEvent)for(h in{submit:1,change:1,focusin:1})b="on"+h,c=b in n,c||(n.setAttribute(b,"return;"),c=typeof n[b]=="function"),t[h+"Bubbles"]=c;return i(function(){var f,o,n,h,s,c=1,l="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",a="visibility:hidden;border:0;",v="style='"+l+"border:5px solid #000;padding:0;'",y="<div "+v+"><div><\/div><\/div><table "+v+" cellpadding='0' cellspacing='0'><tr><td><\/td><\/tr><\/table>";(e=r.getElementsByTagName("body")[0],e)&&(f=r.createElement("div"),f.style.cssText=a+"width:0;height:0;position:static;top:0;margin-top:"+c+"px",e.insertBefore(f,e.firstChild),u=r.createElement("div"),u.style.cssText=l+a,u.innerHTML=y,f.appendChild(u),o=u.firstChild,n=o.firstChild,h=o.nextSibling.firstChild.firstChild,s={doesNotAddBorder:n.offsetTop!==5,doesAddBorderForTableAndCells:h.offsetTop===5},n.style.position="fixed",n.style.top="20px",s.fixedPosition=n.offsetTop===20||n.offsetTop===15,n.style.position=n.style.top="",o.style.overflow="hidden",o.style.position="relative",s.subtractsBorderForOverflowNotVisible=n.offsetTop===-5,s.doesNotIncludeMarginInBodyOffset=e.offsetTop!==c,e.removeChild(f),u=f=null,i.extend(t,s))}),u.innerHTML="",p.removeChild(u),u=y=a=v=e=s=n=f=null,t}(),i.boxModel=i.support.boxModel,at=/^(?:\{.*\}|\[.*\])$/,vt=/([A-Z])/g,i.extend({cache:{},uuid:0,expando:"jQuery"+(i.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(n){return n=n.nodeType?i.cache[n[i.expando]]:n[i.expando],!!n&&!it(n)},data:function(n,r,u,f){if(i.acceptData(n)){var l,o,h,y=i.expando,a=typeof r=="string",c=n.nodeType,s=c?i.cache:n,e=c?n[i.expando]:n[i.expando]&&i.expando,v=r==="events";if(e&&s[e]&&(v||f||s[e].data)||!a||u!==t)return(e||(c?n[i.expando]=e=++i.uuid:e=i.expando),s[e]||(s[e]={},c||(s[e].toJSON=i.noop)),(typeof r=="object"||typeof r=="function")&&(f?s[e]=i.extend(s[e],r):s[e].data=i.extend(s[e].data,r)),l=o=s[e],f||(o.data||(o.data={}),o=o.data),u!==t&&(o[i.camelCase(r)]=u),v&&!o[r])?l.events:(a?(h=o[r],h==null&&(h=o[i.camelCase(r)])):h=o,h)}},removeData:function(n,t,r){if(i.acceptData(n)){var e,o,h,c=i.expando,s=n.nodeType,u=s?i.cache:n,f=s?n[i.expando]:i.expando;if(u[f]){if(t&&(e=r?u[f]:u[f].data,e)){for(i.isArray(t)?t=t:(t in e)?t=[t]:(t=i.camelCase(t),t=t in e?[t]:t.split(" ")),o=0,h=t.length;o<h;o++)delete e[t[o]];if(!(r?it:i.isEmptyObject)(e))return}(r||(delete u[f].data,it(u[f])))&&(i.support.deleteExpando||!u.setInterval?delete u[f]:u[f]=null,s&&(i.support.deleteExpando?delete n[i.expando]:n.removeAttribute?n.removeAttribute(i.expando):n[i.expando]=null))}}},_data:function(n,t,r){return i.data(n,t,r,!0)},acceptData:function(n){if(n.nodeName){var t=i.noData[n.nodeName.toLowerCase()];if(t)return!(t===!0||n.getAttribute("classid")!==t)}return!0}}),i.fn.extend({data:function(n,r){var u,s,e,f=null,o,h;if(typeof n=="undefined"){if(this.length&&(f=i.data(this[0]),this[0].nodeType===1&&!i._data(this[0],"parsedAttrs"))){for(s=this[0].attributes,o=0,h=s.length;o<h;o++)e=s[o].name,e.indexOf("data-")===0&&(e=i.camelCase(e.substring(5)),yt(this[0],e,f[e]));i._data(this[0],"parsedAttrs",!0)}return f}return typeof n=="object"?this.each(function(){i.data(this,n)}):(u=n.split("."),u[1]=u[1]?"."+u[1]:"",r===t?(f=this.triggerHandler("getData"+u[1]+"!",[u[0]]),f===t&&this.length&&(f=i.data(this[0],n),f=yt(this[0],n,f)),f===t&&u[1]?this.data(u[0]):f):this.each(function(){var t=i(this),f=[u[0],r];t.triggerHandler("setData"+u[1]+"!",f),i.data(this,n,r),t.triggerHandler("changeData"+u[1]+"!",f)}))},removeData:function(n){return this.each(function(){i.removeData(this,n)})}}),i.extend({_mark:function(n,t){n&&(t=(t||"fx")+"mark",i._data(n,t,(i._data(n,t)||0)+1))},_unmark:function(n,t,r){if(n!==!0&&(r=t,t=n,n=!1),t){r=r||"fx";var u=r+"mark",f=n?0:(i._data(t,u)||1)-1;f?i._data(t,u,f):(i.removeData(t,u,!0),pt(t,r,"mark"))}},queue:function(n,t,r){var u;if(n)return t=(t||"fx")+"queue",u=i._data(n,t),r&&(!u||i.isArray(r)?u=i._data(n,t,i.makeArray(r)):u.push(r)),u||[]},dequeue:function(n,t){t=t||"fx";var r=i.queue(n,t),u=r.shift(),f={};u==="inprogress"&&(u=r.shift()),u&&(t==="fx"&&r.unshift("inprogress"),i._data(n,t+".run",f),u.call(n,function(){i.dequeue(n,t)},f)),r.length||(i.removeData(n,t+"queue "+t+".run",!0),pt(n,t,"queue"))}}),i.fn.extend({queue:function(n,r){return(typeof n!="string"&&(r=n,n="fx"),r===t)?i.queue(this[0],n):this.each(function(){var t=i.queue(this,n,r);n==="fx"&&t[0]!=="inprogress"&&i.dequeue(this,n)})},dequeue:function(n){return this.each(function(){i.dequeue(this,n)})},delay:function(n,t){return n=i.fx?i.fx.speeds[n]||n:n,t=t||"fx",this.queue(t,function(t,i){var r=setTimeout(t,n);i.stop=function(){clearTimeout(r)}})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,r){function c(){--o||e.resolveWith(u,[u])}typeof n!="string"&&(r=n,n=t),n=n||"fx";for(var e=i.Deferred(),u=this,f=u.length,o=1,s=n+"defer",l=n+"queue",a=n+"mark",h;f--;)(h=i.data(u[f],s,t,!0)||(i.data(u[f],l,t,!0)||i.data(u[f],a,t,!0))&&i.data(u[f],s,i.Callbacks("once memory"),!0))&&(o++,h.add(c));return c(),e.promise()}});var wt=/[\n\t\r]/g,w=/\s+/,wr=/\r/g,br=/^(?:button|input)$/i,kr=/^(?:button|input|object|select|textarea)$/i,dr=/^a(?:rea)?$/i,bt=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,kt=i.support.getSetAttribute,e,dt,gt;i.fn.extend({attr:function(n,t){return i.access(this,n,t,!0,i.attr)},removeAttr:function(n){return this.each(function(){i.removeAttr(this,n)})},prop:function(n,t){return i.access(this,n,t,!0,i.prop)},removeProp:function(n){return n=i.propFix[n]||n,this.each(function(){try{this[n]=t,delete this[n]}catch(i){}})},addClass:function(n){var r,f,o,t,e,u,s;if(i.isFunction(n))return this.each(function(t){i(this).addClass(n.call(this,t,this.className))});if(n&&typeof n=="string")for(r=n.split(w),f=0,o=this.length;f<o;f++)if(t=this[f],t.nodeType===1)if(t.className||r.length!==1){for(e=" "+t.className+" ",u=0,s=r.length;u<s;u++)~e.indexOf(" "+r[u]+" ")||(e+=r[u]+" ");t.className=i.trim(e)}else t.className=n;return this},removeClass:function(n){var o,u,s,r,f,e,h;if(i.isFunction(n))return this.each(function(t){i(this).removeClass(n.call(this,t,this.className))});if(n&&typeof n=="string"||n===t)for(o=(n||"").split(w),u=0,s=this.length;u<s;u++)if(r=this[u],r.nodeType===1&&r.className)if(n){for(f=(" "+r.className+" ").replace(wt," "),e=0,h=o.length;e<h;e++)f=f.replace(" "+o[e]+" "," ");r.className=i.trim(f)}else r.className="";return this},toggleClass:function(n,t){var r=typeof n,u=typeof t=="boolean";return i.isFunction(n)?this.each(function(r){i(this).toggleClass(n.call(this,r,this.className,t),t)}):this.each(function(){if(r==="string")for(var f,s=0,o=i(this),e=t,h=n.split(w);f=h[s++];)e=u?e:!o.hasClass(f),o[e?"addClass":"removeClass"](f);else(r==="undefined"||r==="boolean")&&(this.className&&i._data(this,"__className__",this.className),this.className=this.className||n===!1?"":i._data(this,"__className__")||"")})},hasClass:function(n){for(var i=" "+n+" ",t=0,r=this.length;t<r;t++)if(this[t].nodeType===1&&(" "+this[t].className+" ").replace(wt," ").indexOf(i)>-1)return!0;return!1},val:function(n){var r,u,e,f=this[0];return arguments.length?(e=i.isFunction(n),this.each(function(u){var o=i(this),f;this.nodeType===1&&(f=e?n.call(this,u,o.val()):n,f==null?f="":typeof f=="number"?f+="":i.isArray(f)&&(f=i.map(f,function(n){return n==null?"":n+""})),r=i.valHooks[this.nodeName.toLowerCase()]||i.valHooks[this.type],r&&"set"in r&&r.set(this,f,"value")!==t||(this.value=f))})):f?(r=i.valHooks[f.nodeName.toLowerCase()]||i.valHooks[f.type],r&&"get"in r&&(u=r.get(f,"value"))!==t)?u:(u=f.value,typeof u=="string"?u.replace(wr,""):u==null?"":u):t}}),i.extend({valHooks:{option:{get:function(n){var t=n.attributes.value;return!t||t.specified?n.value:n.text}},select:{get:function(n){var o,r,h,t,u=n.selectedIndex,s=[],f=n.options,e=n.type==="select-one";if(u<0)return null;for(r=e?u:0,h=e?u+1:f.length;r<h;r++)if(t=f[r],t.selected&&(i.support.optDisabled?!t.disabled:t.getAttribute("disabled")===null)&&(!t.parentNode.disabled||!i.nodeName(t.parentNode,"optgroup"))){if(o=i(t).val(),e)return o;s.push(o)}return e&&!s.length&&f.length?i(f[u]).val():s},set:function(n,t){var r=i.makeArray(t);return i(n).find("option").each(function(){this.selected=i.inArray(i(this).val(),r)>=0}),r.length||(n.selectedIndex=-1),r}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(n,r,u,f){var o,s,h,c=n.nodeType;return!n||c===3||c===8||c===2?t:f&&r in i.attrFn?i(n)[r](u):("getAttribute"in n)?(h=c!==1||!i.isXMLDoc(n),h&&(r=r.toLowerCase(),s=i.attrHooks[r]||(bt.test(r)?dt:e)),u!==t?u===null?(i.removeAttr(n,r),t):s&&"set"in s&&h&&(o=s.set(n,u,r))!==t?o:(n.setAttribute(r,""+u),u):s&&"get"in s&&h&&(o=s.get(n,r))!==null?o:(o=n.getAttribute(r),o===null?t:o)):i.prop(n,r,u)},removeAttr:function(n,t){var u,f,r,o,e=0;if(n.nodeType===1)for(f=(t||"").split(w),o=f.length;e<o;e++)r=f[e].toLowerCase(),u=i.propFix[r]||r,i.attr(n,r,""),n.removeAttribute(kt?r:u),bt.test(r)&&u in n&&(n[u]=!1)},attrHooks:{type:{set:function(n,t){if(br.test(n.nodeName)&&n.parentNode)i.error("type property can't be changed");else if(!i.support.radioValue&&t==="radio"&&i.nodeName(n,"input")){var r=n.value;return n.setAttribute("type",t),r&&(n.value=r),t}}},value:{get:function(n,t){return e&&i.nodeName(n,"button")?e.get(n,t):t in n?n.value:null},set:function(n,t,r){if(e&&i.nodeName(n,"button"))return e.set(n,t,r);n.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(n,r,u){var e,f,s,o=n.nodeType;return!n||o===3||o===8||o===2?t:(s=o!==1||!i.isXMLDoc(n),s&&(r=i.propFix[r]||r,f=i.propHooks[r]),u!==t?f&&"set"in f&&(e=f.set(n,u,r))!==t?e:n[r]=u:f&&"get"in f&&(e=f.get(n,r))!==null?e:n[r])},propHooks:{tabIndex:{get:function(n){var i=n.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):kr.test(n.nodeName)||dr.test(n.nodeName)&&n.href?0:t}}}}),i.attrHooks.tabindex=i.propHooks.tabIndex,dt={get:function(n,r){var u,f=i.prop(n,r);return f===!0||typeof f!="boolean"&&(u=n.getAttributeNode(r))&&u.nodeValue!==!1?r.toLowerCase():t},set:function(n,t,r){var u;return t===!1?i.removeAttr(n,r):(u=i.propFix[r]||r,u in n&&(n[u]=!0),n.setAttribute(r,r.toLowerCase())),r}},kt||(gt={name:!0,id:!0},e=i.valHooks.button={get:function(n,i){var r;return r=n.getAttributeNode(i),r&&(gt[i]?r.nodeValue!=="":r.specified)?r.nodeValue:t},set:function(n,t,i){var u=n.getAttributeNode(i);return u||(u=r.createAttribute(i),n.setAttributeNode(u)),u.nodeValue=t+""}},i.attrHooks.tabindex.set=e.set,i.each(["width","height"],function(n,t){i.attrHooks[t]=i.extend(i.attrHooks[t],{set:function(n,i){if(i==="")return n.setAttribute(t,"auto"),i}})}),i.attrHooks.contenteditable={get:e.get,set:function(n,t,i){t===""&&(t="false"),e.set(n,t,i)}}),i.support.hrefNormalized||i.each(["href","src","width","height"],function(n,r){i.attrHooks[r]=i.extend(i.attrHooks[r],{get:function(n){var i=n.getAttribute(r,2);return i===null?t:i}})}),i.support.style||(i.attrHooks.style={get:function(n){return n.style.cssText.toLowerCase()||t},set:function(n,t){return n.style.cssText=""+t}}),i.support.optSelected||(i.propHooks.selected=i.extend(i.propHooks.selected,{get:function(n){var t=n.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),i.support.enctype||(i.propFix.enctype="encoding"),i.support.checkOn||i.each(["radio","checkbox"],function(){i.valHooks[this]={get:function(n){return n.getAttribute("value")===null?"on":n.value}}}),i.each(["radio","checkbox"],function(){i.valHooks[this]=i.extend(i.valHooks[this],{set:function(n,t){if(i.isArray(t))return n.checked=i.inArray(i(n).val(),t)>=0}})});var rt=/^(?:textarea|input|select)$/i,ni=/^([^\.]*)?(?:\.(.+))?$/,gr=/\bhover(\.\S+)?/,nu=/^key/,tu=/^(?:mouse|contextmenu)|click/,iu=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,ru=function(n){var t=iu.exec(n);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},uu=function(n,t){return(!t[1]||n.nodeName.toLowerCase()===t[1])&&(!t[2]||n.id===t[2])&&(!t[3]||t[3].test(n.className))},ti=function(n){return i.event.special.hover?n:n.replace(gr,"mouseenter$1 mouseleave$1")};i.event={add:function(n,r,u,f,e){var a,h,v,y,p,o,w,s,b,l,c;if(n.nodeType!==3&&n.nodeType!==8&&r&&u&&(a=i._data(n))){for(u.handler&&(b=u,u=b.handler),u.guid||(u.guid=i.guid++),v=a.events,v||(a.events=v={}),h=a.handle,h||(a.handle=h=function(n){return typeof i!="undefined"&&(!n||i.event.triggered!==n.type)?i.event.dispatch.apply(h.elem,arguments):t},h.elem=n),r=ti(r).split(" "),y=0;y<r.length;y++)p=ni.exec(r[y])||[],o=p[1],w=(p[2]||"").split(".").sort(),c=i.event.special[o]||{},o=(e?c.delegateType:c.bindType)||o,c=i.event.special[o]||{},s=i.extend({type:o,origType:p[1],data:f,handler:u,guid:u.guid,selector:e,namespace:w.join(".")},b),e&&(s.quick=ru(e),!s.quick&&i.expr.match.POS.test(e)&&(s.isPositional=!0)),l=v[o],l||(l=v[o]=[],l.delegateCount=0,c.setup&&c.setup.call(n,f,w,h)!==!1||(n.addEventListener?n.addEventListener(o,h,!1):n.attachEvent&&n.attachEvent("on"+o,h))),c.add&&(c.add.call(n,s),s.handler.guid||(s.handler.guid=u.guid)),e?l.splice(l.delegateCount++,0,s):l.push(s),i.event.global[o]=!0;n=null}},global:{},remove:function(n,t,r,u){var a=i.hasData(n)&&i._data(n),v,y,o,f,w,h,l,s,p,e,c;if(a&&(l=a.events)){for(t=ti(t||"").split(" "),v=0;v<t.length;v++){if(y=ni.exec(t[v])||[],o=y[1],f=y[2],!o){f=f?"."+f:"";for(h in l)i.event.remove(n,h+f,r,u);return}if(s=i.event.special[o]||{},o=(u?s.delegateType:s.bindType)||o,e=l[o]||[],w=e.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,r||f||u||s.remove)for(h=0;h<e.length;h++)c=e[h],r&&r.guid!==c.guid||(!f||f.test(c.namespace))&&(!u||u===c.selector||u==="**"&&c.selector)&&(e.splice(h--,1),c.selector&&e.delegateCount--,s.remove&&s.remove.call(n,c));else e.length=0;e.length===0&&w!==e.length&&(s.teardown&&s.teardown.call(n,f)!==!1||i.removeEvent(n,o,a.handle),delete l[o])}i.isEmptyObject(l)&&(p=a.handle,p&&(p.elem=null),i.removeData(n,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(r,u,f,e){if(!f||f.nodeType!==3&&f.nodeType!==8){var o=r.type||r,p=[],w,k,c,s,h,a,l,v,y,b;if(o.indexOf("!")>=0&&(o=o.slice(0,-1),k=!0),o.indexOf(".")>=0&&(p=o.split("."),o=p.shift(),p.sort()),f&&!i.event.customEvent[o]||i.event.global[o]){if(r=typeof r=="object"?r[i.expando]?r:new i.Event(o,r):new i.Event(o),r.type=o,r.isTrigger=!0,r.exclusive=k,r.namespace=p.join("."),r.namespace_re=r.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,a=o.indexOf(":")<0?"on"+o:"",(e||!f)&&r.preventDefault(),!f){w=i.cache;for(c in w)w[c].events&&w[c].events[o]&&i.event.trigger(r,u,w[c].handle.elem,!0);return}if(r.result=t,r.target||(r.target=f),u=u!=null?i.makeArray(u):[],u.unshift(r),l=i.event.special[o]||{},!l.trigger||l.trigger.apply(f,u)!==!1){if(y=[[f,l.bindType||o]],!e&&!l.noBubble&&!i.isWindow(f)){for(b=l.delegateType||o,h=null,s=f.parentNode;s;s=s.parentNode)y.push([s,b]),h=s;h&&h===f.ownerDocument&&y.push([h.defaultView||h.parentWindow||n,b])}for(c=0;c<y.length;c++)if(s=y[c][0],r.type=y[c][1],v=(i._data(s,"events")||{})[r.type]&&i._data(s,"handle"),v&&v.apply(s,u),v=a&&s[a],v&&i.acceptData(s)&&v.apply(s,u),r.isPropagationStopped())break;return r.type=o,r.isDefaultPrevented()||l._default&&l._default.apply(f.ownerDocument,u)!==!1||o==="click"&&i.nodeName(f,"a")||!i.acceptData(f)||a&&f[o]&&(o!=="focus"&&o!=="blur"||r.target.offsetWidth!==0)&&!i.isWindow(f)&&(h=f[a],h&&(f[a]=null),i.event.triggered=o,f[o](),i.event.triggered=t,h&&(f[a]=h)),r.result}}}},dispatch:function(r){r=i.event.fix(r||n.event);var c=(i._data(this,"events")||{})[r.type]||[],l=c.delegateCount,b=[].slice.call(arguments,0),k=!r.exclusive&&!r.namespace,d=(i.event.special[r.type]||{}).handle,a=[],f,v,e,y,p,h,w,u,o,s;if(b[0]=r,r.delegateTarget=this,l&&!r.target.disabled&&!(r.button&&r.type==="click"))for(e=r.target;e!=this;e=e.parentNode||this){for(p={},w=[],f=0;f<l;f++)u=c[f],o=u.selector,s=p[o],u.isPositional?s=(s||(p[o]=i(o))).index(e)>=0:s===t&&(s=p[o]=u.quick?uu(e,u.quick):i(e).is(o)),s&&w.push(u);w.length&&a.push({elem:e,matches:w})}for(c.length>l&&a.push({elem:this,matches:c.slice(l)}),f=0;f<a.length&&!r.isPropagationStopped();f++)for(h=a[f],r.currentTarget=h.elem,v=0;v<h.matches.length&&!r.isImmediatePropagationStopped();v++)u=h.matches[v],(k||!r.namespace&&!u.namespace||r.namespace_re&&r.namespace_re.test(u.namespace))&&(r.data=u.data,r.handleObj=u,y=(d||u.handler).apply(h.elem,b),y!==t&&(r.result=y,y===!1&&(r.preventDefault(),r.stopPropagation())));return r.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(n,t){return n.which==null&&(n.which=t.charCode!=null?t.charCode:t.keyCode),n}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement wheelDelta".split(" "),filter:function(n,i){var o,u,f,e=i.button,s=i.fromElement;return n.pageX==null&&i.clientX!=null&&(o=n.target.ownerDocument||r,u=o.documentElement,f=o.body,n.pageX=i.clientX+(u&&u.scrollLeft||f&&f.scrollLeft||0)-(u&&u.clientLeft||f&&f.clientLeft||0),n.pageY=i.clientY+(u&&u.scrollTop||f&&f.scrollTop||0)-(u&&u.clientTop||f&&f.clientTop||0)),!n.relatedTarget&&s&&(n.relatedTarget=s===n.target?i.toElement:s),n.which||e===t||(n.which=e&1?1:e&2?3:e&4?2:0),n}},fix:function(n){if(n[i.expando])return n;var e,o,u=n,f=i.event.fixHooks[n.type]||{},s=f.props?this.props.concat(f.props):this.props;for(n=i.Event(u),e=s.length;e;)o=s[--e],n[o]=u[o];return n.target||(n.target=u.srcElement||r),n.target.nodeType===3&&(n.target=n.target.parentNode),n.metaKey===t&&(n.metaKey=n.ctrlKey),f.filter?f.filter(n,u):n},special:{ready:{setup:i.bindReady},focus:{delegateType:"focusin",noBubble:!0},blur:{delegateType:"focusout",noBubble:!0},beforeunload:{setup:function(n,t,r){i.isWindow(this)&&(this.onbeforeunload=r)},teardown:function(n,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(n,t,r,u){var f=i.extend(new i.Event,r,{type:n,isSimulated:!0,originalEvent:{}});u?i.event.trigger(f,null,t):i.event.dispatch.call(t,f),f.isDefaultPrevented()&&r.preventDefault()}},i.event.handle=i.event.dispatch,i.removeEvent=r.removeEventListener?function(n,t,i){n.removeEventListener&&n.removeEventListener(t,i,!1)}:function(n,t,i){n.detachEvent&&n.detachEvent("on"+t,i)},i.Event=function(n,t){if(!(this instanceof i.Event))return new i.Event(n,t);n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||n.returnValue===!1||n.getPreventDefault&&n.getPreventDefault()?b:h):this.type=n,t&&i.extend(this,t),this.timeStamp=n&&n.timeStamp||i.now(),this[i.expando]=!0},i.Event.prototype={preventDefault:function(){this.isDefaultPrevented=b;var n=this.originalEvent;n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=b;var n=this.originalEvent;n&&(n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=b,this.stopPropagation()},isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h},i.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(n,t){i.event.special[n]=i.event.special[t]={delegateType:t,bindType:t,handle:function(n){var u=this,r=n.relatedTarget,t=n.handleObj,o=t.selector,f,e;return r&&t.origType!==n.type&&(r===u||i.contains(u,r))||(f=n.type,n.type=t.origType,e=t.handler.apply(this,arguments),n.type=f),e}}}),i.support.submitBubbles||(i.event.special.submit={setup:function(){if(i.nodeName(this,"form"))return!1;i.event.add(this,"click._submit keypress._submit",function(n){var u=n.target,r=i.nodeName(u,"input")||i.nodeName(u,"button")?u.form:t;r&&!r._submit_attached&&(i.event.add(r,"submit._submit",function(n){this.parentNode&&i.event.simulate("submit",this.parentNode,n,!0)}),r._submit_attached=!0)})},teardown:function(){if(i.nodeName(this,"form"))return!1;i.event.remove(this,"._submit")}}),i.support.changeBubbles||(i.event.special.change={setup:function(){if(rt.test(this.nodeName))return(this.type==="checkbox"||this.type==="radio")&&(i.event.add(this,"propertychange._change",function(n){n.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),i.event.add(this,"click._change",function(n){this._just_changed&&(this._just_changed=!1,i.event.simulate("change",this,n,!0))})),!1;i.event.add(this,"beforeactivate._change",function(n){var t=n.target;rt.test(t.nodeName)&&!t._change_attached&&(i.event.add(t,"change._change",function(n){this.parentNode&&!n.isSimulated&&i.event.simulate("change",this.parentNode,n,!0)}),t._change_attached=!0)})},handle:function(n){var t=n.target;if(this!==t||n.isSimulated||n.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return n.handleObj.handler.apply(this,arguments)},teardown:function(){return i.event.remove(this,"._change"),rt.test(this.nodeName)}}),i.support.focusinBubbles||i.each({focus:"focusin",blur:"focusout"},function(n,t){var u=0,f=function(n){i.event.simulate(t,n.target,i.event.fix(n),!0)};i.event.special[t]={setup:function(){u++==0&&r.addEventListener(n,f,!0)},teardown:function(){--u==0&&r.removeEventListener(n,f,!0)}}}),i.fn.extend({on:function(n,r,u,f,e){var o,s;if(typeof n=="object"){typeof r!="string"&&(u=r,r=t);for(s in n)this.on(s,r,u,n[s],e);return this}if(u==null&&f==null?(f=r,u=r=t):f==null&&(typeof r=="string"?(f=u,u=t):(f=u,u=r,r=t)),f===!1)f=h;else if(!f)return this;return e===1&&(o=f,f=function(n){return i().off(n),o.apply(this,arguments)},f.guid=o.guid||(o.guid=i.guid++)),this.each(function(){i.event.add(this,n,f,u,r)})},one:function(n,t,i,r){return this.on.call(this,n,t,i,r,1)},off:function(n,r,u){var f,e;if(n&&n.preventDefault&&n.handleObj)return f=n.handleObj,i(n.delegateTarget).off(f.namespace?f.type+"."+f.namespace:f.type,f.selector,f.handler),this;if(typeof n=="object"){for(e in n)this.off(e,r,n[e]);return this}return(r===!1||typeof r=="function")&&(u=r,r=t),u===!1&&(u=h),this.each(function(){i.event.remove(this,n,u,r)})},bind:function(n,t,i){return this.on(n,null,t,i)},unbind:function(n,t){return this.off(n,null,t)},live:function(n,t,r){i(this.context).on(n,this.selector,t,r);return this},die:function(n,t){return i(this.context).off(n,this.selector||"**",t),this},delegate:function(n,t,i,r){return this.on(t,n,i,r)},undelegate:function(n,t,i){return arguments.length==1?this.off(n,"**"):this.off(t,n,i)},trigger:function(n,t){return this.each(function(){i.event.trigger(n,t,this)})},triggerHandler:function(n,t){if(this[0])return i.event.trigger(n,t,this[0],!0)},toggle:function(n){var t=arguments,u=n.guid||i.guid++,r=0,f=function(u){var f=(i._data(this,"lastToggle"+n.guid)||0)%r;return i._data(this,"lastToggle"+n.guid,f+1),u.preventDefault(),t[f].apply(this,arguments)||!1};for(f.guid=u;r<t.length;)t[r++].guid=u;return this.click(f)},hover:function(n,t){return this.mouseenter(n).mouseleave(t||n)}}),i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(n,t){i.fn[t]=function(n,i){return i==null&&(i=n,n=null),arguments.length>0?this.bind(t,n,i):this.trigger(t)},i.attrFn&&(i.attrFn[t]=!0),nu.test(t)&&(i.event.fixHooks[t]=i.event.keyHooks),tu.test(t)&&(i.event.fixHooks[t]=i.event.mouseHooks)}),function(){function d(n,t,i,r,u,f){for(var o,h,s=0,c=r.length;s<c;s++)if(o=r[s],o){for(h=!1,o=o[n];o;){if(o[e]===i){h=r[o.sizset];break}if(o.nodeType!==1||f||(o[e]=i,o.sizset=s),o.nodeName.toLowerCase()===t){h=o;break}o=o[n]}r[s]=h}}function g(t,i,r,u,f,o){for(var s,c,h=0,l=u.length;h<l;h++)if(s=u[h],s){for(c=!1,s=s[t];s;){if(s[e]===r){c=u[s.sizset];break}if(s.nodeType===1)if(o||(s[e]=r,s.sizset=h),typeof i!="string"){if(s===i){c=!0;break}}else if(n.filter(i,[s]).length>0){c=s;break}s=s[t]}u[h]=c}}var v=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e="sizcache"+(Math.random()+"").replace(".",""),y=0,b=Object.prototype.toString,c=!1,k=!0,o=/\\/g,nt=/\r\n/g,l=/\W/,n,s,f,a,h,w;[0,0].sort(function(){return k=!1,0}),n=function(t,i,e,o){var nt;if(e=e||[],i=i||r,nt=i,i.nodeType!==1&&i.nodeType!==9)return[];if(!t||typeof t!="string")return e;var y,a,h,g,l,p,k,c,it=!0,d=n.isXML(i),s=[],rt=t;do if(v.exec(""),y=v.exec(rt),y&&(rt=y[3],s.push(y[1]),y[2])){g=y[3];break}while(y);if(s.length>1&&tt.exec(t))if(s.length===2&&u.relative[s[0]])a=w(s[0]+s[1],i,o);else for(a=u.relative[s[0]]?[i]:n(s.shift(),i);s.length;)t=s.shift(),u.relative[t]&&(t+=s.shift()),a=w(t,a,o);else if(!o&&s.length>1&&i.nodeType===9&&!d&&u.match.ID.test(s[0])&&!u.match.ID.test(s[s.length-1])&&(l=n.find(s.shift(),i,d),i=l.expr?n.filter(l.expr,l.set)[0]:l.set[0]),i)for(l=o?{expr:s.pop(),set:f(o)}:n.find(s.pop(),s.length===1&&(s[0]==="~"||s[0]==="+")&&i.parentNode?i.parentNode:i,d),a=l.expr?n.filter(l.expr,l.set):l.set,s.length>0?h=f(a):it=!1;s.length;)p=s.pop(),k=p,u.relative[p]?k=s.pop():p="",k==null&&(k=i),u.relative[p](h,k,d);else h=s=[];if(h||(h=a),h||n.error(p||t),b.call(h)==="[object Array]")if(it)if(i&&i.nodeType===1)for(c=0;h[c]!=null;c++)h[c]&&(h[c]===!0||h[c].nodeType===1&&n.contains(i,h[c]))&&e.push(a[c]);else for(c=0;h[c]!=null;c++)h[c]&&h[c].nodeType===1&&e.push(a[c]);else e.push.apply(e,h);else f(h,e);return g&&(n(g,nt,e,o),n.uniqueSort(e)),e},n.uniqueSort=function(n){if(a&&(c=k,n.sort(a),c))for(var t=1;t<n.length;t++)n[t]===n[t-1]&&n.splice(t--,1);return n},n.matches=function(t,i){return n(t,null,null,i)},n.matchesSelector=function(t,i){return n(i,null,null,[t]).length>0},n.find=function(n,t,i){var f,e,c,r,s,h;if(!n)return[];for(e=0,c=u.order.length;e<c;e++)if(s=u.order[e],(r=u.leftMatch[s].exec(n))&&(h=r[1],r.splice(1,1),h.substr(h.length-1)!=="\\"&&(r[1]=(r[1]||"").replace(o,""),f=u.find[s](r,t,i),f!=null))){n=n.replace(u.match[s],"");break}return f||(f=typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName("*"):[]),{set:f,expr:n}},n.filter=function(i,r,f,e){for(var o,h,c,l,y,b,p,a,w,k=i,v=[],s=r,d=r&&r[0]&&n.isXML(r[0]);i&&r.length;){for(c in u.filter)if((o=u.leftMatch[c].exec(i))!=null&&o[2]){if(b=u.filter[c],p=o[1],h=!1,o.splice(1,1),p.substr(p.length-1)==="\\")continue;if(s===v&&(v=[]),u.preFilter[c])if(o=u.preFilter[c](o,s,f,v,e,d),o){if(o===!0)continue}else h=l=!0;if(o)for(a=0;(y=s[a])!=null;a++)y&&(l=b(y,o,a,s),w=e^l,f&&l!=null?w?h=!0:s[a]=!1:w&&(v.push(y),h=!0));if(l!==t){if(f||(s=v),i=i.replace(u.match[c],""),!h)return[];break}}if(i===k)if(h==null)n.error(i);else break;k=i}return s},n.error=function(n){throw"Syntax error, unrecognized expression: "+n;};var p=n.getText=function(n){var i,r,t=n.nodeType,u="";if(t){if(t===1){if(typeof n.textContent=="string")return n.textContent;if(typeof n.innerText=="string")return n.innerText.replace(nt,"");for(n=n.firstChild;n;n=n.nextSibling)u+=p(n)}else if(t===3||t===4)return n.nodeValue}else for(i=0;r=n[i];i++)r.nodeType!==8&&(u+=p(r));return u},u=n.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(n){return n.getAttribute("href")},type:function(n){return n.getAttribute("type")}},relative:{"+":function(t,i){var f=typeof i=="string",e=f&&!l.test(i),o=f&&!e,u,s,r;for(e&&(i=i.toLowerCase()),u=0,s=t.length;u<s;u++)if(r=t[u]){while((r=r.previousSibling)&&r.nodeType!==1);t[u]=o||r&&r.nodeName.toLowerCase()===i?r||!1:r===i}o&&n.filter(i,t,!0)},">":function(t,i){var u,f=typeof i=="string",r=0,o=t.length,e;if(f&&!l.test(i))for(i=i.toLowerCase();r<o;r++)u=t[r],u&&(e=u.parentNode,t[r]=e.nodeName.toLowerCase()===i?e:!1);else{for(;r<o;r++)u=t[r],u&&(t[r]=f?u.parentNode:u.parentNode===i);f&&n.filter(i,t,!0)}},"":function(n,t,i){var r,f=y++,u=g;typeof t!="string"||l.test(t)||(t=t.toLowerCase(),r=t,u=d),u("parentNode",t,f,n,r,i)},"~":function(n,t,i){var r,f=y++,u=g;typeof t!="string"||l.test(t)||(t=t.toLowerCase(),r=t,u=d),u("previousSibling",t,f,n,r,i)}},find:{ID:function(n,t,i){if(typeof t.getElementById!="undefined"&&!i){var r=t.getElementById(n[1]);return r&&r.parentNode?[r]:[]}},NAME:function(n,t){var r,u,i,f;if(typeof t.getElementsByName!="undefined"){for(r=[],u=t.getElementsByName(n[1]),i=0,f=u.length;i<f;i++)u[i].getAttribute("name")===n[1]&&r.push(u[i]);return r.length===0?null:r}},TAG:function(n,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(n[1])}},preFilter:{CLASS:function(n,t,i,r,u,f){if(n=" "+n[1].replace(o,"")+" ",f)return n;for(var s=0,e;(e=t[s])!=null;s++)e&&(u^(e.className&&(" "+e.className+" ").replace(/[\t\n\r]/g," ").indexOf(n)>=0)?i||r.push(e):i&&(t[s]=!1));return!1},ID:function(n){return n[1].replace(o,"")},TAG:function(n){return n[1].replace(o,"").toLowerCase()},CHILD:function(t){if(t[1]==="nth"){t[2]||n.error(t[0]),t[2]=t[2].replace(/^\+|\s*/g,"");var i=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(t[2]==="even"&&"2n"||t[2]==="odd"&&"2n+1"||!/\D/.test(t[2])&&"0n+"+t[2]||t[2]);t[2]=i[1]+(i[2]||1)-0,t[3]=i[3]-0}else t[2]&&n.error(t[0]);return t[0]=y++,t},ATTR:function(n,t,i,r,f,e){var s=n[1]=n[1].replace(o,"");return!e&&u.attrMap[s]&&(n[1]=u.attrMap[s]),n[4]=(n[4]||n[5]||"").replace(o,""),n[2]==="~="&&(n[4]=" "+n[4]+" "),n},PSEUDO:function(t,i,r,f,e){if(t[1]==="not")if((v.exec(t[3])||"").length>1||/^\w/.test(t[3]))t[3]=n(t[3],null,null,i);else{var o=n.filter(t[3],i,r,!0^e);return r||f.push.apply(f,o),!1}else if(u.match.POS.test(t[0])||u.match.CHILD.test(t[0]))return!0;return t},POS:function(n){return n.unshift(!0),n}},filters:{enabled:function(n){return n.disabled===!1&&n.type!=="hidden"},disabled:function(n){return n.disabled===!0},checked:function(n){return n.checked===!0},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,n.selected===!0},parent:function(n){return!!n.firstChild},empty:function(n){return!n.firstChild},has:function(t,i,r){return!!n(r[3],t).length},header:function(n){return/h\d/i.test(n.nodeName)},text:function(n){var t=n.getAttribute("type"),i=n.type;return n.nodeName.toLowerCase()==="input"&&"text"===i&&(t===i||t===null)},radio:function(n){return n.nodeName.toLowerCase()==="input"&&"radio"===n.type},checkbox:function(n){return n.nodeName.toLowerCase()==="input"&&"checkbox"===n.type},file:function(n){return n.nodeName.toLowerCase()==="input"&&"file"===n.type},password:function(n){return n.nodeName.toLowerCase()==="input"&&"password"===n.type},submit:function(n){var t=n.nodeName.toLowerCase();return(t==="input"||t==="button")&&"submit"===n.type},image:function(n){return n.nodeName.toLowerCase()==="input"&&"image"===n.type},reset:function(n){var t=n.nodeName.toLowerCase();return(t==="input"||t==="button")&&"reset"===n.type},button:function(n){var t=n.nodeName.toLowerCase();return t==="input"&&"button"===n.type||t==="button"},input:function(n){return/input|select|textarea|button/i.test(n.nodeName)},focus:function(n){return n===n.ownerDocument.activeElement}},setFilters:{first:function(n,t){return t===0},last:function(n,t,i,r){return t===r.length-1},even:function(n,t){return t%2==0},odd:function(n,t){return t%2==1},lt:function(n,t,i){return t<i[3]-0},gt:function(n,t,i){return t>i[3]-0},nth:function(n,t,i){return i[3]-0===t},eq:function(n,t,i){return i[3]-0===t}},filter:{PSEUDO:function(t,i,r,f){var e=i[1],h=u.filters[e],s,o,c;if(h)return h(t,r,i,f);if(e==="contains")return(t.textContent||t.innerText||p([t])||"").indexOf(i[3])>=0;if(e==="not"){for(s=i[3],o=0,c=s.length;o<c;o++)if(s[o]===t)return!1;return!0}n.error(e)},CHILD:function(n,t){var r,o,s,u,h,f,c=t[1],i=n;switch(c){case"only":case"first":while(i=i.previousSibling)if(i.nodeType===1)return!1;if(c==="first")return!0;i=n;case"last":while(i=i.nextSibling)if(i.nodeType===1)return!1;return!0;case"nth":if(r=t[2],o=t[3],r===1&&o===0)return!0;if(s=t[0],u=n.parentNode,u&&(u[e]!==s||!n.nodeIndex)){for(h=0,i=u.firstChild;i;i=i.nextSibling)i.nodeType===1&&(i.nodeIndex=++h);u[e]=s}return f=n.nodeIndex-o,r===0?f===0:f%r==0&&f/r>=0}},ID:function(n,t){return n.nodeType===1&&n.getAttribute("id")===t},TAG:function(n,t){return t==="*"&&n.nodeType===1||!!n.nodeName&&n.nodeName.toLowerCase()===t},CLASS:function(n,t){return(" "+(n.className||n.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(t,i){var o=i[1],s=n.attr?n.attr(t,o):u.attrHandle[o]?u.attrHandle[o](t):t[o]!=null?t[o]:t.getAttribute(o),f=s+"",e=i[2],r=i[4];return s==null?e==="!=":!e&&n.attr?s!=null:e==="="?f===r:e==="*="?f.indexOf(r)>=0:e==="~="?(" "+f+" ").indexOf(r)>=0:r?e==="!="?f!==r:e==="^="?f.indexOf(r)===0:e==="$="?f.substr(f.length-r.length)===r:e==="|="?f===r||f.substr(0,r.length+1)===r+"-":!1:f&&s!==!1},POS:function(n,t,i,r){var e=t[2],f=u.setFilters[e];if(f)return f(n,i,t,r)}}},tt=u.match.POS,it=function(n,t){return"\\"+(+t+1)};for(s in u.match)u.match[s]=new RegExp(u.match[s].source+/(?![^\[]*\])(?![^\(]*\))/.source),u.leftMatch[s]=new RegExp(/(^(?:.|\r|\n)*?)/.source+u.match[s].source.replace(/\\(\d+)/g,it));f=function(n,t){return(n=Array.prototype.slice.call(n,0),t)?(t.push.apply(t,n),t):n};try{Array.prototype.slice.call(r.documentElement.childNodes,0)[0].nodeType}catch(rt){f=function(n,t){var i=0,r=t||[],u;if(b.call(n)==="[object Array]")Array.prototype.push.apply(r,n);else if(typeof n.length=="number")for(u=n.length;i<u;i++)r.push(n[i]);else for(;n[i];i++)r.push(n[i]);return r}}r.documentElement.compareDocumentPosition?a=function(n,t){return n===t?(c=!0,0):!n.compareDocumentPosition||!t.compareDocumentPosition?n.compareDocumentPosition?-1:1:n.compareDocumentPosition(t)&4?-1:1}:(a=function(n,t){var i;if(n===t)return c=!0,0;if(n.sourceIndex&&t.sourceIndex)return n.sourceIndex-t.sourceIndex;var e,l,u=[],f=[],o=n.parentNode,s=t.parentNode,r=o;if(o===s)return h(n,t);if(o){if(!s)return 1}else return-1;while(r)u.unshift(r),r=r.parentNode;for(r=s;r;)f.unshift(r),r=r.parentNode;for(e=u.length,l=f.length,i=0;i<e&&i<l;i++)if(u[i]!==f[i])return h(u[i],f[i]);return i===e?h(n,f[i],-1):h(u[i],t,1)},h=function(n,t,i){if(n===t)return i;for(var r=n.nextSibling;r;){if(r===t)return-1;r=r.nextSibling}return 1}),function(){var n=r.createElement("div"),f="script"+(new Date).getTime(),i=r.documentElement;n.innerHTML="<a name='"+f+"'/>",i.insertBefore(n,i.firstChild),r.getElementById(f)&&(u.find.ID=function(n,i,r){if(typeof i.getElementById!="undefined"&&!r){var u=i.getElementById(n[1]);return u?u.id===n[1]||typeof u.getAttributeNode!="undefined"&&u.getAttributeNode("id").nodeValue===n[1]?[u]:t:[]}},u.filter.ID=function(n,t){var i=typeof n.getAttributeNode!="undefined"&&n.getAttributeNode("id");return n.nodeType===1&&i&&i.nodeValue===t}),i.removeChild(n),i=n=null}(),function(){var n=r.createElement("div");n.appendChild(r.createComment("")),n.getElementsByTagName("*").length>0&&(u.find.TAG=function(n,t){var i=t.getElementsByTagName(n[1]),u,r;if(n[1]==="*"){for(u=[],r=0;i[r];r++)i[r].nodeType===1&&u.push(i[r]);i=u}return i}),n.innerHTML="<a href='#'><\/a>",n.firstChild&&typeof n.firstChild.getAttribute!="undefined"&&n.firstChild.getAttribute("href")!=="#"&&(u.attrHandle.href=function(n){return n.getAttribute("href",2)}),n=null}(),r.querySelectorAll&&function(){var i=n,t=r.createElement("div"),o="__sizzle__",e;if(t.innerHTML="<p class='TEST'><\/p>",!t.querySelectorAll||t.querySelectorAll(".TEST").length!==0){n=function(t,e,s,h){var c,l;if(e=e||r,!h&&!n.isXML(e)){if(c=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t),c&&(e.nodeType===1||e.nodeType===9)){if(c[1])return f(e.getElementsByTagName(t),s);if(c[2]&&u.find.CLASS&&e.getElementsByClassName)return f(e.getElementsByClassName(c[2]),s)}if(e.nodeType===9){if(t==="body"&&e.body)return f([e.body],s);if(c&&c[3])if(l=e.getElementById(c[3]),l&&l.parentNode){if(l.id===c[3])return f([l],s)}else return f([],s);try{return f(e.querySelectorAll(t),s)}catch(b){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var w=e,v=e.getAttribute("id"),a=v||o,y=e.parentNode,p=/^\s*[+~]/.test(t);v?a=a.replace(/'/g,"\\$&"):e.setAttribute("id",a),p&&y&&(e=e.parentNode);try{if(!p||y)return f(e.querySelectorAll("[id='"+a+"'] "+t),s)}catch(k){}finally{v||w.removeAttribute("id")}}}return i(t,e,s,h)};for(e in i)n[e]=i[e];t=null}}(),function(){var t=r.documentElement,i=t.matchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.msMatchesSelector,e,f;if(i){e=!i.call(r.createElement("div"),"div"),f=!1;try{i.call(r.documentElement,"[test!='']:sizzle")}catch(o){f=!0}n.matchesSelector=function(t,r){if(r=r.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!n.isXML(t))try{if(f||!u.match.PSEUDO.test(r)&&!/!=/.test(r)){var o=i.call(t,r);if(o||!e||t.document&&t.document.nodeType!==11)return o}}catch(s){}return n(r,null,null,[t]).length>0}}}(),function(){var n=r.createElement("div");(n.innerHTML="<div class='test e'><\/div><div class='test'><\/div>",n.getElementsByClassName&&n.getElementsByClassName("e").length!==0)&&(n.lastChild.className="e",n.getElementsByClassName("e").length!==1)&&(u.order.splice(1,0,"CLASS"),u.find.CLASS=function(n,t,i){if(typeof t.getElementsByClassName!="undefined"&&!i)return t.getElementsByClassName(n[1])},n=null)}(),n.contains=r.documentElement.contains?function(n,t){return n!==t&&(n.contains?n.contains(t):!0)}:r.documentElement.compareDocumentPosition?function(n,t){return!!(n.compareDocumentPosition(t)&16)}:function(){return!1},n.isXML=function(n){var t=(n?n.ownerDocument||n:0).documentElement;return t?t.nodeName!=="HTML":!1},w=function(t,i,r){for(var e,o=[],s="",h=i.nodeType?[i]:i,f,c;e=u.match.PSEUDO.exec(t);)s+=e[0],t=t.replace(u.match.PSEUDO,"");for(t=u.relative[t]?t+"*":t,f=0,c=h.length;f<c;f++)n(t,h[f],o,r);return n.filter(s,o)},n.attr=i.attr,n.selectors.attrMap={},i.find=n,i.expr=n.selectors,i.expr[":"]=i.expr.filters,i.unique=n.uniqueSort,i.text=n.getText,i.isXMLDoc=n.isXML,i.contains=n.contains}();var fu=/Until$/,eu=/^(?:parents|prevUntil|prevAll)/,ou=/,/,su=/^.[^:#\[\.,]*$/,hu=Array.prototype.slice,ii=i.expr.match.POS,cu={children:!0,contents:!0,next:!0,prev:!0};i.fn.extend({find:function(n){var s=this,t,f,r,o,u,e;if(typeof n!="string")return i(n).filter(function(){for(t=0,f=s.length;t<f;t++)if(i.contains(s[t],this))return!0});for(r=this.pushStack("","find",n),t=0,f=this.length;t<f;t++)if(o=r.length,i.find(n,this[t],r),t>0)for(u=o;u<r.length;u++)for(e=0;e<o;e++)if(r[e]===r[u]){r.splice(u--,1);break}return r},has:function(n){var t=i(n);return this.filter(function(){for(var n=0,r=t.length;n<r;n++)if(i.contains(this,t[n]))return!0})},not:function(n){return this.pushStack(ui(this,n,!1),"not",n)},filter:function(n){return this.pushStack(ui(this,n,!0),"filter",n)},is:function(n){return!!n&&(typeof n=="string"?ii.test(n)?i(n,this.context).index(this[0])>=0:i.filter(n,this).length>0:this.filter(n).length>0)},closest:function(n,t){var f=[],u,s,r=this[0],e,o;if(i.isArray(n)){for(e=1;r&&r.ownerDocument&&r!==t;){for(u=0;u<n.length;u++)i(r).is(n[u])&&f.push({selector:n[u],elem:r,level:e});r=r.parentNode,e++}return f}for(o=ii.test(n)||typeof n!="string"?i(n,t||this.context):0,u=0,s=this.length;u<s;u++)for(r=this[u];r;)if(o?o.index(r)>-1:i.find.matchesSelector(r,n)){f.push(r);break}else if(r=r.parentNode,!r||!r.ownerDocument||r===t||r.nodeType===11)break;return f=f.length>1?i.unique(f):f,this.pushStack(f,"closest",n)},index:function(n){return n?typeof n=="string"?i.inArray(this[0],i(n)):i.inArray(n.jquery?n[0]:n,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(n,t){var u=typeof n=="string"?i(n,t):i.makeArray(n&&n.nodeType?[n]:n),r=i.merge(this.get(),u);return this.pushStack(ri(u[0])||ri(r[0])?r:i.unique(r))},andSelf:function(){return this.add(this.prevObject)}}),i.each({parent:function(n){var t=n.parentNode;return t&&t.nodeType!==11?t:null},parents:function(n){return i.dir(n,"parentNode")},parentsUntil:function(n,t,r){return i.dir(n,"parentNode",r)},next:function(n){return i.nth(n,2,"nextSibling")},prev:function(n){return i.nth(n,2,"previousSibling")},nextAll:function(n){return i.dir(n,"nextSibling")},prevAll:function(n){return i.dir(n,"previousSibling")},nextUntil:function(n,t,r){return i.dir(n,"nextSibling",r)},prevUntil:function(n,t,r){return i.dir(n,"previousSibling",r)},siblings:function(n){return i.sibling(n.parentNode.firstChild,n)},children:function(n){return i.sibling(n.firstChild)},contents:function(n){return i.nodeName(n,"iframe")?n.contentDocument||n.contentWindow.document:i.makeArray(n.childNodes)}},function(n,t){i.fn[n]=function(r,u){var f=i.map(this,t,r),e=hu.call(arguments);return fu.test(n)||(u=r),u&&typeof u=="string"&&(f=i.filter(u,f)),f=this.length>1&&!cu[n]?i.unique(f):f,(this.length>1||ou.test(u))&&eu.test(n)&&(f=f.reverse()),this.pushStack(f,n,e.join(","))}}),i.extend({filter:function(n,t,r){return r&&(n=":not("+n+")"),t.length===1?i.find.matchesSelector(t[0],n)?[t[0]]:[]:i.find.matches(n,t)},dir:function(n,r,u){for(var e=[],f=n[r];f&&f.nodeType!==9&&(u===t||f.nodeType!==1||!i(f).is(u));)f.nodeType===1&&e.push(f),f=f[r];return e},nth:function(n,t,i){t=t||1;for(var r=0;n;n=n[i])if(n.nodeType===1&&++r===t)break;return n},sibling:function(n,t){for(var i=[];n;n=n.nextSibling)n.nodeType===1&&n!==t&&i.push(n);return i}});var ei="abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",lu=/ jQuery\d+="(?:\d+|null)"/g,ut=/^\s+/,oi=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,si=/<([\w:]+)/,au=/<tbody/i,vu=/<|&#?\w+;/,yu=/<(?:script|style)/i,pu=/<(?:script|object|embed|option|style)/i,wu=new RegExp("<(?:"+ei.replace(" ","|")+")","i"),hi=/checked\s*(?:[^=]|=\s*.checked.)/i,bu=/\/(java|ecma)script/i,ku=/^\s*<!(?:\[CDATA\[|\-\-)/,u={option:[1,"<select multiple='multiple'>","<\/select>"],legend:[1,"<fieldset>","<\/fieldset>"],thead:[1,"<table>","<\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],col:[2,"<table><tbody><\/tbody><colgroup>","<\/colgroup><\/table>"],area:[1,"<map>","<\/map>"],_default:[0,"",""]},du=fi(r);u.optgroup=u.option,u.tbody=u.tfoot=u.colgroup=u.caption=u.thead,u.th=u.td,i.support.htmlSerialize||(u._default=[1,"div<div>","<\/div>"]),i.fn.extend({text:function(n){return i.isFunction(n)?this.each(function(t){var r=i(this);r.text(n.call(this,t,r.text()))}):typeof n!="object"&&n!==t?this.empty().append((this[0]&&this[0].ownerDocument||r).createTextNode(n)):i.text(this)},wrapAll:function(n){if(i.isFunction(n))return this.each(function(t){i(this).wrapAll(n.call(this,t))});if(this[0]){var t=i(n,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var n=this;n.firstChild&&n.firstChild.nodeType===1;)n=n.firstChild;return n}).append(this)}return this},wrapInner:function(n){return i.isFunction(n)?this.each(function(t){i(this).wrapInner(n.call(this,t))}):this.each(function(){var t=i(this),r=t.contents();r.length?r.wrapAll(n):t.append(n)})},wrap:function(n){return this.each(function(){i(this).wrapAll(n)})},unwrap:function(){return this.parent().each(function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(n){this.nodeType===1&&this.appendChild(n)})},prepend:function(){return this.domManip(arguments,!0,function(n){this.nodeType===1&&this.insertBefore(n,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(n){this.parentNode.insertBefore(n,this)});if(arguments.length){var n=i(arguments[0]);return n.push.apply(n,this.toArray()),this.pushStack(n,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(n){this.parentNode.insertBefore(n,this.nextSibling)});if(arguments.length){var n=this.pushStack(this,"after",arguments);return n.push.apply(n,i(arguments[0]).toArray()),n}},remove:function(n,t){for(var u=0,r;(r=this[u])!=null;u++)(!n||i.filter(n,[r]).length)&&(t||r.nodeType!==1||(i.cleanData(r.getElementsByTagName("*")),i.cleanData([r])),r.parentNode&&r.parentNode.removeChild(r));return this},empty:function(){for(var t=0,n;(n=this[t])!=null;t++)for(n.nodeType===1&&i.cleanData(n.getElementsByTagName("*"));n.firstChild;)n.removeChild(n.firstChild);return this},clone:function(n,t){return n=n==null?!1:n,t=t==null?n:t,this.map(function(){return i.clone(this,n,t)})},html:function(n){if(n===t)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(lu,""):null;if(typeof n!="string"||yu.test(n)||!i.support.leadingWhitespace&&ut.test(n)||u[(si.exec(n)||["",""])[1].toLowerCase()])i.isFunction(n)?this.each(function(t){var r=i(this);r.html(n.call(this,t,r.html()))}):this.empty().append(n);else{n=n.replace(oi,"<$1><\/$2>");try{for(var r=0,f=this.length;r<f;r++)this[r].nodeType===1&&(i.cleanData(this[r].getElementsByTagName("*")),this[r].innerHTML=n)}catch(e){this.empty().append(n)}}return this},replaceWith:function(n){return this[0]&&this[0].parentNode?i.isFunction(n)?this.each(function(t){var r=i(this),u=r.html();r.replaceWith(n.call(this,t,u))}):(typeof n!="string"&&(n=i(n).detach()),this.each(function(){var t=this.nextSibling,r=this.parentNode;i(this).remove(),t?i(t).before(n):i(r).append(n)})):this.length?this.pushStack(i(i.isFunction(n)?n():n),"replaceWith",n):this},detach:function(n){return this.remove(n,!0)},domManip:function(n,r,u){var c,h,f,o,e=n[0],l=[];if(!i.support.checkClone&&arguments.length===3&&typeof e=="string"&&hi.test(e))return this.each(function(){i(this).domManip(n,r,u,!0)});if(i.isFunction(e))return this.each(function(f){var o=i(this);n[0]=e.call(this,f,r?o.html():t),o.domManip(n,r,u)});if(this[0]){if(o=e&&e.parentNode,c=i.support.parentNode&&o&&o.nodeType===11&&o.childNodes.length===this.length?{fragment:o}:i.buildFragment(n,this,l),f=c.fragment,h=f.childNodes.length===1?f=f.firstChild:f.firstChild,h){r=r&&i.nodeName(h,"tr");for(var s=0,a=this.length,v=a-1;s<a;s++)u.call(r?gu(this[s],h):this[s],c.cacheable||a>1&&s<v?i.clone(f,!0,!0):f)}l.length&&i.each(l,nf)}return this}}),i.buildFragment=function(n,t,u){var e,h,s,o,f=n[0];return t&&t[0]&&(o=t[0].ownerDocument||t[0]),o.createDocumentFragment||(o=r),n.length===1&&typeof f=="string"&&f.length<512&&o===r&&f.charAt(0)==="<"&&!pu.test(f)&&(i.support.checkClone||!hi.test(f))&&!i.support.unknownElems&&wu.test(f)&&(h=!0,s=i.fragments[f],s&&s!==1&&(e=s)),e||(e=o.createDocumentFragment(),i.clean(n,o,e,u)),h&&(i.fragments[f]=s?e:1),{fragment:e,cacheable:h}},i.fragments={},i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,t){i.fn[n]=function(r){var e=[],u=i(r),o=this.length===1&&this[0].parentNode,f,h,s;if(o&&o.nodeType===11&&o.childNodes.length===1&&u.length===1)return u[t](this[0]),this;for(f=0,h=u.length;f<h;f++)s=(f>0?this.clone(!0):this).get(),i(u[f])[t](s),e=e.concat(s);return this.pushStack(e,n,u.selector)}}),i.extend({clone:function(n,t,r){var o=n.cloneNode(!0),f,e,u;if((!i.support.noCloneEvent||!i.support.noCloneChecked)&&(n.nodeType===1||n.nodeType===11)&&!i.isXMLDoc(n))for(li(n,o),f=k(n),e=k(o),u=0;f[u];++u)e[u]&&li(f[u],e[u]);if(t&&(ci(n,o),r))for(f=k(n),e=k(o),u=0;f[u];++u)ci(f[u],e[u]);return f=e=null,o},clean:function(n,t,f,e){var p,s,c,h,o,y,a,b,k;for(t=t||r,typeof t.createElement=="undefined"&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||r),s=[],h=0;(o=n[h])!=null;h++)if(typeof o=="number"&&(o+=""),o){if(typeof o=="string")if(vu.test(o)){o=o.replace(oi,"<$1><\/$2>");var w=(si.exec(o)||["",""])[1].toLowerCase(),v=u[w]||u._default,d=v[0],l=t.createElement("div");for(t===r?du.appendChild(l):fi(t).appendChild(l),l.innerHTML=v[1]+o+v[2];d--;)l=l.lastChild;if(!i.support.tbody)for(y=au.test(o),a=w==="table"&&!y?l.firstChild&&l.firstChild.childNodes:v[1]==="<table>"&&!y?l.childNodes:[],c=a.length-1;c>=0;--c)i.nodeName(a[c],"tbody")&&!a[c].childNodes.length&&a[c].parentNode.removeChild(a[c]);!i.support.leadingWhitespace&&ut.test(o)&&l.insertBefore(t.createTextNode(ut.exec(o)[0]),l.firstChild),o=l.childNodes}else o=t.createTextNode(o);if(!i.support.appendChecked)if(o[0]&&typeof(b=o.length)=="number")for(c=0;c<b;c++)vi(o[c]);else vi(o);o.nodeType?s.push(o):s=i.merge(s,o)}if(f)for(p=function(n){return!n.type||bu.test(n.type)},h=0;s[h];h++)e&&i.nodeName(s[h],"script")&&(!s[h].type||s[h].type.toLowerCase()==="text/javascript")?e.push(s[h].parentNode?s[h].parentNode.removeChild(s[h]):s[h]):(s[h].nodeType===1&&(k=i.grep(s[h].getElementsByTagName("script"),p),s.splice.apply(s,[h+1,0].concat(k))),f.appendChild(s[h]));return s},cleanData:function(n){for(var r,u,o=i.cache,s=i.event.special,h=i.support.deleteExpando,t,f,e=0;(t=n[e])!=null;e++)if((!t.nodeName||!i.noData[t.nodeName.toLowerCase()])&&(u=t[i.expando],u)){if(r=o[u],r&&r.events){for(f in r.events)s[f]?i.event.remove(t,f):i.removeEvent(t,f,r.handle);r.handle&&(r.handle.elem=null)}h?delete t[i.expando]:t.removeAttribute&&t.removeAttribute(i.expando),delete o[u]}}});var ft=/alpha\([^)]*\)/i,tf=/opacity=([^)]*)/,rf=/([A-Z]|^ms)/g,yi=/^-?\d+(?:px)?$/i,uf=/^-?\d/,ff=/^([\-+])=([\-+.\de]+)/,ef={position:"absolute",visibility:"hidden",display:"block"},of=["Left","Right"],sf=["Top","Bottom"],c,pi,wi;i.fn.css=function(n,r){return arguments.length===2&&r===t?this:i.access(this,n,r,!0,function(n,r,u){return u!==t?i.style(n,r,u):i.css(n,r)})},i.extend({cssHooks:{opacity:{get:function(n,t){if(t){var i=c(n,"opacity","opacity");return i===""?"1":i}return n.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:i.support.cssFloat?"cssFloat":"styleFloat"},style:function(n,r,u,f){if(n&&n.nodeType!==3&&n.nodeType!==8&&n.style){var o,s,h=i.camelCase(r),c=n.style,e=i.cssHooks[h];if(r=i.cssProps[h]||h,u!==t){if(s=typeof u,s==="string"&&(o=ff.exec(u))&&(u=+(o[1]+1)*+o[2]+parseFloat(i.css(n,r)),s="number"),u==null||s==="number"&&isNaN(u))return;if(s!=="number"||i.cssNumber[h]||(u+="px"),!e||!("set"in e)||(u=e.set(n,u))!==t)try{c[r]=u}catch(l){}}else return e&&"get"in e&&(o=e.get(n,!1,f))!==t?o:c[r]}},css:function(n,r,u){var e,f;return(r=i.camelCase(r),f=i.cssHooks[r],r=i.cssProps[r]||r,r==="cssFloat"&&(r="float"),f&&"get"in f&&(e=f.get(n,!0,u))!==t)?e:c?c(n,r):void 0},swap:function(n,t,i){var u={},r;for(r in t)u[r]=n.style[r],n.style[r]=t[r];i.call(n);for(r in t)n.style[r]=u[r]}}),i.curCSS=i.css,i.each(["height","width"],function(n,t){i.cssHooks[t]={get:function(n,r,u){var f;if(r)return n.offsetWidth!==0?bi(n,t,u):(i.swap(n,ef,function(){f=bi(n,t,u)}),f)},set:function(n,t){if(yi.test(t)){if(t=parseFloat(t),t>=0)return t+"px"}else return t}}}),i.support.opacity||(i.cssHooks.opacity={get:function(n,t){return tf.test((t&&n.currentStyle?n.currentStyle.filter:n.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(n,t){var r=n.style,u=n.currentStyle,e=i.isNumeric(t)?"alpha(opacity="+t*100+")":"",f=u&&u.filter||r.filter||"";(r.zoom=1,t>=1&&i.trim(f.replace(ft,""))===""&&(r.removeAttribute("filter"),u&&!u.filter))||(r.filter=ft.test(f)?f.replace(ft,e):f+" "+e)}}),i(function(){i.support.reliableMarginRight||(i.cssHooks.marginRight={get:function(n,t){var r;return i.swap(n,{display:"inline-block"},function(){r=t?c(n,"margin-right","marginRight"):n.style.marginRight}),r}})}),r.defaultView&&r.defaultView.getComputedStyle&&(pi=function(n,r){var u,f,e;return(r=r.replace(rf,"-$1").toLowerCase(),!(f=n.ownerDocument.defaultView))?t:((e=f.getComputedStyle(n,null))&&(u=e.getPropertyValue(r),u!==""||i.contains(n.ownerDocument.documentElement,n)||(u=i.style(n,r))),u)}),r.documentElement.currentStyle&&(wi=function(n,t){var f,u,e,i=n.currentStyle&&n.currentStyle[t],r=n.style;return i===null&&r&&(e=r[t])&&(i=e),!yi.test(i)&&uf.test(i)&&(f=r.left,u=n.runtimeStyle&&n.runtimeStyle.left,u&&(n.runtimeStyle.left=n.currentStyle.left),r.left=t==="fontSize"?"1em":i||0,i=r.pixelLeft+"px",r.left=f,u&&(n.runtimeStyle.left=u)),i===""?"auto":i}),c=pi||wi,i.expr&&i.expr.filters&&(i.expr.filters.hidden=function(n){var t=n.offsetWidth,r=n.offsetHeight;return t===0&&r===0||!i.support.reliableHiddenOffsets&&(n.style&&n.style.display||i.css(n,"display"))==="none"},i.expr.filters.visible=function(n){return!i.expr.filters.hidden(n)});var hf=/%20/g,cf=/\[\]$/,ki=/\r?\n/g,lf=/#.*$/,af=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,vf=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,yf=/^(?:GET|HEAD)$/,pf=/^\/\//,di=/\?/,wf=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bf=/^(?:select|textarea)/i,gi=/\s+/,kf=/([?&])_=[^&]*/,nr=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,tr=i.fn.load,et={},ir={},o,s,rr=["*/"]+["*"];try{o=yr.href}catch(ue){o=r.createElement("a"),o.href="",o=o.href}s=nr.exec(o.toLowerCase())||[],i.fn.extend({load:function(n,r,u){var f,e,o,s;return typeof n!="string"&&tr?tr.apply(this,arguments):this.length?(f=n.indexOf(" "),f>=0&&(e=n.slice(f,n.length),n=n.slice(0,f)),o="GET",r&&(i.isFunction(r)?(u=r,r=t):typeof r=="object"&&(r=i.param(r,i.ajaxSettings.traditional),o="POST")),s=this,i.ajax({url:n,type:o,dataType:"html",data:r,complete:function(n,t,r){r=n.responseText,n.isResolved()&&(n.done(function(n){r=n}),s.html(e?i("<div>").append(r.replace(wf,"")).find(e):r)),u&&s.each(u,[r,t,n])}}),this):this},serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?i.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bf.test(this.nodeName)||vf.test(this.type))}).map(function(n,t){var r=i(this).val();return r==null?null:i.isArray(r)?i.map(r,function(n){return{name:t.name,value:n.replace(ki,"\r\n")}}):{name:t.name,value:r.replace(ki,"\r\n")}}).get()}}),i.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(n,t){i.fn[t]=function(n){return this.bind(t,n)}}),i.each(["get","post"],function(n,r){i[r]=function(n,u,f,e){return i.isFunction(u)&&(e=e||f,f=u,u=t),i.ajax({type:r,url:n,data:u,success:f,dataType:e})}}),i.extend({getScript:function(n,r){return i.get(n,t,r,"script")},getJSON:function(n,t,r){return i.get(n,t,r,"json")},ajaxSetup:function(n,t){return t?fr(n,i.ajaxSettings):(t=n,n=i.ajaxSettings),fr(n,t),n},ajaxSettings:{url:o,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(s[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":rr},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":n.String,"text html":!0,"text json":i.parseJSON,"text xml":i.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:ur(et),ajaxTransport:ur(ir),ajax:function(n,r){function w(n,r,s,l){if(e!==2){e=2,nt&&clearTimeout(nt),c=t,g=l||"",f.readyState=n>0?4:0;var p,d,w,a=r,ut=s?df(u,f,s):t,tt,it;if(n>=200&&n<300||n===304)if(u.ifModified&&((tt=f.getResponseHeader("Last-Modified"))&&(i.lastModified[o]=tt),(it=f.getResponseHeader("Etag"))&&(i.etag[o]=it)),n===304)a="notmodified",p=!0;else try{d=gf(u,ut),a="success",p=!0}catch(ft){a="parsererror",w=ft}else w=a,(!a||n)&&(a="error",n<0&&(n=0));f.status=n,f.statusText=""+(r||a),p?k.resolveWith(h,[d,a,f]):k.rejectWith(h,[f,a,w]),f.statusCode(y),y=t,v&&b.trigger("ajax"+(p?"Success":"Error"),[f,u,p?d:w]),rt.fireWith(h,[f,a]),v&&(b.trigger("ajaxComplete",[f,u]),--i.active||i.event.trigger("ajaxStop"))}}var tt,it;typeof n=="object"&&(r=n,n=t),r=r||{};var u=i.ajaxSetup({},r),h=u.context||u,b=h!==u&&(h.nodeType||h instanceof i)?i(h):i.event,k=i.Deferred(),rt=i.Callbacks("once memory"),y=u.statusCode||{},o,ut={},ft={},g,p,c,nt,l,e=0,v,a,f={readyState:0,setRequestHeader:function(n,t){if(!e){var i=n.toLowerCase();n=ft[i]=ft[i]||n,ut[n]=t}return this},getAllResponseHeaders:function(){return e===2?g:null},getResponseHeader:function(n){var i;if(e===2){if(!p)for(p={};i=af.exec(g);)p[i[1].toLowerCase()]=i[2];i=p[n.toLowerCase()]}return i===t?null:i},overrideMimeType:function(n){return e||(u.mimeType=n),this},abort:function(n){return n=n||"abort",c&&c.abort(n),w(0,n),this}};if(k.promise(f),f.success=f.done,f.error=f.fail,f.complete=rt.add,f.statusCode=function(n){if(n){var t;if(e<2)for(t in n)y[t]=[y[t],n[t]];else t=n[f.status],f.then(t,t)}return this},u.url=((n||u.url)+"").replace(lf,"").replace(pf,s[1]+"//"),u.dataTypes=i.trim(u.dataType||"*").toLowerCase().split(gi),u.crossDomain==null&&(l=nr.exec(u.url.toLowerCase()),u.crossDomain=!!(l&&(l[1]!=s[1]||l[2]!=s[2]||(l[3]||(l[1]==="http:"?80:443))!=(s[3]||(s[1]==="http:"?80:443))))),u.data&&u.processData&&typeof u.data!="string"&&(u.data=i.param(u.data,u.traditional)),d(et,u,r,f),e===2)return!1;v=u.global,u.type=u.type.toUpperCase(),u.hasContent=!yf.test(u.type),v&&i.active++==0&&i.event.trigger("ajaxStart"),u.hasContent||(u.data&&(u.url+=(di.test(u.url)?"&":"?")+u.data,delete u.data),o=u.url,u.cache===!1&&(tt=i.now(),it=u.url.replace(kf,"$1_="+tt),u.url=it+(it===u.url?(di.test(u.url)?"&":"?")+"_="+tt:""))),(u.data&&u.hasContent&&u.contentType!==!1||r.contentType)&&f.setRequestHeader("Content-Type",u.contentType),u.ifModified&&(o=o||u.url,i.lastModified[o]&&f.setRequestHeader("If-Modified-Since",i.lastModified[o]),i.etag[o]&&f.setRequestHeader("If-None-Match",i.etag[o])),f.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+(u.dataTypes[0]!=="*"?", "+rr+"; q=0.01":""):u.accepts["*"]);for(a in u.headers)f.setRequestHeader(a,u.headers[a]);if(u.beforeSend&&(u.beforeSend.call(h,f,u)===!1||e===2))return f.abort(),!1;for(a in{success:1,error:1,complete:1})f[a](u[a]);if(c=d(ir,u,r,f),c){f.readyState=1,v&&b.trigger("ajaxSend",[f,u]),u.async&&u.timeout>0&&(nt=setTimeout(function(){f.abort("timeout")},u.timeout));try{e=1,c.send(ut,w)}catch(ot){e<2?w(-1,ot):i.error(ot)}}else w(-1,"No Transport");return f},param:function(n,r){var u=[],e=function(n,t){t=i.isFunction(t)?t():t,u[u.length]=encodeURIComponent(n)+"="+encodeURIComponent(t)},f;if(r===t&&(r=i.ajaxSettings.traditional),i.isArray(n)||n.jquery&&!i.isPlainObject(n))i.each(n,function(){e(this.name,this.value)});else for(f in n)ot(f,n[f],r,e);return u.join("&").replace(hf,"+")}}),i.extend({active:0,lastModified:{},etag:{}}),er=i.now(),y=/(\=)\?(&|$)|\?\?/i,i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return i.expando+"_"+er++}}),i.ajaxPrefilter("json jsonp",function(t,r,u){var h=t.contentType==="application/x-www-form-urlencoded"&&typeof t.data=="string";if(t.dataTypes[0]==="jsonp"||t.jsonp!==!1&&(y.test(t.url)||h&&y.test(t.data))){var o,f=t.jsonpCallback=i.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,c=n[f],e=t.url,s=t.data,l="$1"+f+"$2";return t.jsonp!==!1&&(e=e.replace(y,l),t.url===e&&(h&&(s=s.replace(y,l)),t.data===s&&(e+=(/\?/.test(e)?"&":"?")+t.jsonp+"="+f))),t.url=e,t.data=s,n[f]=function(n){o=[n]},u.always(function(){n[f]=c,o&&i.isFunction(c)&&n[f](o[0])}),t.converters["script json"]=function(){return o||i.error(f+" was not called"),o[0]},t.dataTypes[0]="json","script"}}),i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(n){return i.globalEval(n),n}}}),i.ajaxPrefilter("script",function(n){n.cache===t&&(n.cache=!1),n.crossDomain&&(n.type="GET",n.global=!1)}),i.ajaxTransport("script",function(n){if(n.crossDomain){var i,u=r.head||r.getElementsByTagName("head")[0]||r.documentElement;return{send:function(f,e){i=r.createElement("script"),i.async="async",n.scriptCharset&&(i.charset=n.scriptCharset),i.src=n.url,i.onload=i.onreadystatechange=function(n,r){(r||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,u&&i.parentNode&&u.removeChild(i),i=t,r||e(200,"success"))},u.insertBefore(i,u.firstChild)},abort:function(){if(i)i.onload(0,1)}}}}),g=n.ActiveXObject?function(){for(var n in l)l[n](0,1)}:!1,or=0,i.ajaxSettings.xhr=n.ActiveXObject?function(){return!this.isLocal&&sr()||ne()}:sr,function(n){i.extend(i.support,{ajax:!!n,cors:!!n&&"withCredentials"in n})}(i.ajaxSettings.xhr()),i.support.ajax&&i.ajaxTransport(function(r){if(!r.crossDomain||i.support.cors){var u;return{send:function(f,e){var o=r.xhr(),h,s;if(r.username?o.open(r.type,r.url,r.async,r.username,r.password):o.open(r.type,r.url,r.async),r.xhrFields)for(s in r.xhrFields)o[s]=r.xhrFields[s];r.mimeType&&o.overrideMimeType&&o.overrideMimeType(r.mimeType),r.crossDomain||f["X-Requested-With"]||(f["X-Requested-With"]="XMLHttpRequest");try{for(s in f)o.setRequestHeader(s,f[s])}catch(c){}o.send(r.hasContent&&r.data||null),u=function(n,f){var s,v,y,c,a;try{if(u&&(f||o.readyState===4))if(u=t,h&&(o.onreadystatechange=i.noop,g&&delete l[h]),f)o.readyState!==4&&o.abort();else{s=o.status,y=o.getAllResponseHeaders(),c={},a=o.responseXML,a&&a.documentElement&&(c.xml=a),c.text=o.responseText;try{v=o.statusText}catch(w){v=""}s||!r.isLocal||r.crossDomain?s===1223&&(s=204):s=c.text?200:404}}catch(p){f||e(-1,p)}c&&e(s,v,c,y)},r.async&&o.readyState!==4?(h=++or,g&&(l||(l={},i(n).unload(g)),l[h]=u),o.onreadystatechange=u):u()},abort:function(){u&&u(0,1)}}}});var st={},f,a,te=/^(?:toggle|show|hide)$/,ie=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,nt,hr=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],tt;i.fn.extend({show:function(n,t,r){var u,e,f,o;if(n||n===0)return this.animate(v("show",3),n,t,r);for(f=0,o=this.length;f<o;f++)u=this[f],u.style&&(e=u.style.display,i._data(u,"olddisplay")||e!=="none"||(e=u.style.display=""),e===""&&i.css(u,"display")==="none"&&i._data(u,"olddisplay",lr(u.nodeName)));for(f=0;f<o;f++)u=this[f],u.style&&(e=u.style.display,(e===""||e==="none")&&(u.style.display=i._data(u,"olddisplay")||""));return this},hide:function(n,t,r){if(n||n===0)return this.animate(v("hide",3),n,t,r);for(var f,e,u=0,o=this.length;u<o;u++)f=this[u],f.style&&(e=i.css(f,"display"),e==="none"||i._data(f,"olddisplay")||i._data(f,"olddisplay",e));for(u=0;u<o;u++)this[u].style&&(this[u].style.display="none");return this},_toggle:i.fn.toggle,toggle:function(n,t,r){var u=typeof n=="boolean";return i.isFunction(n)&&i.isFunction(t)?this._toggle.apply(this,arguments):n==null||u?this.each(function(){var t=u?n:i(this).is(":hidden");i(this)[t?"show":"hide"]()}):this.animate(v("toggle",3),n,t,r),this},fadeTo:function(n,t,i,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},n,i,r)},animate:function(n,t,r,u){function e(){f.queue===!1&&i._mark(this);var u=i.extend({},f),y=this.nodeType===1,v=y&&i(this).is(":hidden"),e,t,r,o,h,s,c,l,a;u.animatedProperties={};for(r in n){if(e=i.camelCase(r),r!==e&&(n[e]=n[r],delete n[r]),t=n[e],i.isArray(t)?(u.animatedProperties[e]=t[1],t=n[e]=t[0]):u.animatedProperties[e]=u.specialEasing&&u.specialEasing[e]||u.easing||"swing",t==="hide"&&v||t==="show"&&!v)return u.complete.call(this);y&&(e==="height"||e==="width")&&(u.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],i.css(this,"display")==="inline"&&i.css(this,"float")==="none"&&(i.support.inlineBlockNeedsLayout&&lr(this.nodeName)!=="inline"?this.style.zoom=1:this.style.display="inline-block"))}u.overflow!=null&&(this.style.overflow="hidden");for(r in n)o=new i.fx(this,u,r),t=n[r],te.test(t)?(a=i._data(this,"toggle"+r)||(t==="toggle"?v?"show":"hide":0),a?(i._data(this,"toggle"+r,a==="show"?"hide":"show"),o[a]()):o[t]()):(h=ie.exec(t),s=o.cur(),h?(c=parseFloat(h[2]),l=h[3]||(i.cssNumber[r]?"":"px"),l!=="px"&&(i.style(this,r,(c||1)+l),s=(c||1)/o.cur()*s,i.style(this,r,s+l)),h[1]&&(c=(h[1]==="-="?-1:1)*c+s),o.custom(s,c,l)):o.custom(s,t,""));return!0}var f=i.speed(t,r,u);return i.isEmptyObject(n)?this.each(f.complete,[!1]):(n=i.extend({},n),f.queue===!1?this.each(e):this.queue(f.queue,e))},stop:function(n,r,u){return typeof n!="string"&&(u=r,r=n,n=t),r&&n!==!1&&this.queue(n||"fx",[]),this.each(function(){function o(n,t,r){var f=t[r];i.removeData(n,r,!0),f.stop(u)}var t,e=!1,r=i.timers,f=i._data(this);if(u||i._unmark(!0,this),n==null)for(t in f)f[t].stop&&t.indexOf(".run")===t.length-4&&o(this,f,t);else f[t=n+".run"]&&f[t].stop&&o(this,f,t);for(t=r.length;t--;)r[t].elem===this&&(n==null||r[t].queue===n)&&(u?r[t](!0):r[t].saveState(),e=!0,r.splice(t,1));u&&e||i.dequeue(this,n)})}}),i.each({slideDown:v("show",1),slideUp:v("hide",1),slideToggle:v("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,t){i.fn[n]=function(n,i,r){return this.animate(t,n,i,r)}}),i.extend({speed:function(n,t,r){var u=n&&typeof n=="object"?i.extend({},n):{complete:r||!r&&t||i.isFunction(n)&&n,duration:n,easing:r&&t||t&&!i.isFunction(t)&&t};return u.duration=i.fx.off?0:typeof u.duration=="number"?u.duration:u.duration in i.fx.speeds?i.fx.speeds[u.duration]:i.fx.speeds._default,(u.queue==null||u.queue===!0)&&(u.queue="fx"),u.old=u.complete,u.complete=function(n){i.isFunction(u.old)&&u.old.call(this),u.queue?i.dequeue(this,u.queue):n!==!1&&i._unmark(this)},u},easing:{linear:function(n,t,i,r){return i+r*n},swing:function(n,t,i,r){return(-Math.cos(n*Math.PI)/2+.5)*r+i}},timers:[],fx:function(n,t,i){this.options=t,this.elem=n,this.prop=i,t.orig=t.orig||{}}}),i.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(i.fx.step[this.prop]||i.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var t,n=i.css(this.elem,this.prop);return isNaN(t=parseFloat(n))?!n||n==="auto"?0:n:t},custom:function(n,r,u){function e(n){return f.step(n)}var f=this,o=i.fx;this.startTime=tt||cr(),this.end=r,this.now=this.start=n,this.pos=this.state=0,this.unit=u||this.unit||(i.cssNumber[this.prop]?"":"px"),e.queue=this.options.queue,e.elem=this.elem,e.saveState=function(){f.options.hide&&i._data(f.elem,"fxshow"+f.prop)===t&&i._data(f.elem,"fxshow"+f.prop,f.start)},e()&&i.timers.push(e)&&!nt&&(nt=setInterval(o.tick,o.interval))},show:function(){var n=i._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=n||i.style(this.elem,this.prop),this.options.show=!0,n!==t?this.custom(this.cur(),n):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),i(this.elem).show()},hide:function(){this.options.orig[this.prop]=i._data(this.elem,"fxshow"+this.prop)||i.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(n){var r,f,e,o=tt||cr(),s=!0,u=this.elem,t=this.options;if(n||o>=t.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),t.animatedProperties[this.prop]=!0;for(r in t.animatedProperties)t.animatedProperties[r]!==!0&&(s=!1);if(s){if(t.overflow==null||i.support.shrinkWrapBlocks||i.each(["","X","Y"],function(n,i){u.style["overflow"+i]=t.overflow[n]}),t.hide&&i(u).hide(),t.hide||t.show)for(r in t.animatedProperties)i.style(u,r,t.orig[r]),i.removeData(u,"fxshow"+r,!0),i.removeData(u,"toggle"+r,!0);e=t.complete,e&&(t.complete=!1,e.call(u))}return!1}return t.duration==Infinity?this.now=o:(f=o-this.startTime,this.state=f/t.duration,this.pos=i.easing[t.animatedProperties[this.prop]](this.state,f,0,1,t.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},i.extend(i.fx,{tick:function(){for(var r,n=i.timers,t=0;t<n.length;t++)r=n[t],r()||n[t]!==r||n.splice(t--,1);n.length||i.fx.stop()},interval:13,stop:function(){clearInterval(nt),nt=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(n){i.style(n.elem,"opacity",n.now)},_default:function(n){n.elem.style&&n.elem.style[n.prop]!=null?n.elem.style[n.prop]=n.now+n.unit:n.elem[n.prop]=n.now}}}),i.each(["width","height"],function(n,t){i.fx.step[t]=function(n){i.style(n.elem,t,Math.max(0,n.now))}}),i.expr&&i.expr.filters&&(i.expr.filters.animated=function(n){return i.grep(i.timers,function(t){return n===t.elem}).length}),ar=/^t(?:able|d|h)$/i,ht=/^(?:body|html)$/i,i.fn.offset="getBoundingClientRect"in r.documentElement?function(n){var t=this[0],r,f,u;if(n)return this.each(function(t){i.offset.setOffset(this,n,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return i.offset.bodyOffset(t);try{r=t.getBoundingClientRect()}catch(y){}if(f=t.ownerDocument,u=f.documentElement,!r||!i.contains(u,t))return r?{top:r.top,left:r.left}:{top:0,left:0};var e=f.body,o=ct(f),s=u.clientTop||e.clientTop||0,h=u.clientLeft||e.clientLeft||0,c=o.pageYOffset||i.support.boxModel&&u.scrollTop||e.scrollTop,l=o.pageXOffset||i.support.boxModel&&u.scrollLeft||e.scrollLeft,a=r.top+c-s,v=r.left+l-h;return{top:a,left:v}}:function(n){var t=this[0];if(n)return this.each(function(t){i.offset.setOffset(this,n,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return i.offset.bodyOffset(t);for(var r,h=t.offsetParent,a=t,c=t.ownerDocument,l=c.documentElement,e=c.body,s=c.defaultView,o=s?s.getComputedStyle(t,null):t.currentStyle,u=t.offsetTop,f=t.offsetLeft;(t=t.parentNode)&&t!==e&&t!==l;){if(i.support.fixedPosition&&o.position==="fixed")break;r=s?s.getComputedStyle(t,null):t.currentStyle,u-=t.scrollTop,f-=t.scrollLeft,t===h&&(u+=t.offsetTop,f+=t.offsetLeft,!i.support.doesNotAddBorder||i.support.doesAddBorderForTableAndCells&&ar.test(t.nodeName)||(u+=parseFloat(r.borderTopWidth)||0,f+=parseFloat(r.borderLeftWidth)||0),a=h,h=t.offsetParent),i.support.subtractsBorderForOverflowNotVisible&&r.overflow!=="visible"&&(u+=parseFloat(r.borderTopWidth)||0,f+=parseFloat(r.borderLeftWidth)||0),o=r}return(o.position==="relative"||o.position==="static")&&(u+=e.offsetTop,f+=e.offsetLeft),i.support.fixedPosition&&o.position==="fixed"&&(u+=Math.max(l.scrollTop,e.scrollTop),f+=Math.max(l.scrollLeft,e.scrollLeft)),{top:u,left:f}},i.offset={bodyOffset:function(n){var t=n.offsetTop,r=n.offsetLeft;return i.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(i.css(n,"marginTop"))||0,r+=parseFloat(i.css(n,"marginLeft"))||0),{top:t,left:r}},setOffset:function(n,t,r){var f=i.css(n,"position");f==="static"&&(n.style.position="relative");var e=i(n),o=e.offset(),l=i.css(n,"top"),a=i.css(n,"left"),v=(f==="absolute"||f==="fixed")&&i.inArray("auto",[l,a])>-1,u={},s={},h,c;v?(s=e.position(),h=s.top,c=s.left):(h=parseFloat(l)||0,c=parseFloat(a)||0),i.isFunction(t)&&(t=t.call(n,r,o)),t.top!=null&&(u.top=t.top-o.top+h),t.left!=null&&(u.left=t.left-o.left+c),"using"in t?t.using.call(n,u):e.css(u)}},i.fn.extend({position:function(){if(!this[0])return null;var u=this[0],n=this.offsetParent(),t=this.offset(),r=ht.test(n[0].nodeName)?{top:0,left:0}:n.offset();return t.top-=parseFloat(i.css(u,"marginTop"))||0,t.left-=parseFloat(i.css(u,"marginLeft"))||0,r.top+=parseFloat(i.css(n[0],"borderTopWidth"))||0,r.left+=parseFloat(i.css(n[0],"borderLeftWidth"))||0,{top:t.top-r.top,left:t.left-r.left}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent||r.body;n&&!ht.test(n.nodeName)&&i.css(n,"position")==="static";)n=n.offsetParent;return n})}}),i.each(["Left","Top"],function(n,r){var u="scroll"+r;i.fn[u]=function(r){var e,f;return r===t?(e=this[0],!e)?null:(f=ct(e),f?"pageXOffset"in f?f[n?"pageYOffset":"pageXOffset"]:i.support.boxModel&&f.document.documentElement[u]||f.document.body[u]:e[u]):this.each(function(){f=ct(this),f?f.scrollTo(n?i(f).scrollLeft():r,n?r:i(f).scrollTop()):this[u]=r})}}),i.each(["Height","Width"],function(n,r){var u=r.toLowerCase();i.fn["inner"+r]=function(){var n=this[0];return n?n.style?parseFloat(i.css(n,u,"padding")):this[u]():null},i.fn["outer"+r]=function(n){var t=this[0];return t?t.style?parseFloat(i.css(t,u,n?"margin":"border")):this[u]():null},i.fn[u]=function(n){var f=this[0],e,o,s,h;return f?i.isFunction(n)?this.each(function(t){var r=i(this);r[u](n.call(this,t,r[u]()))}):i.isWindow(f)?(e=f.document.documentElement["client"+r],o=f.document.body,f.document.compatMode==="CSS1Compat"&&e||o&&o["client"+r]||e):f.nodeType===9?Math.max(f.documentElement["client"+r],f.body["scroll"+r],f.documentElement["scroll"+r],f.body["offset"+r],f.documentElement["offset"+r]):n===t?(s=i.css(f,u),h=parseFloat(s),i.isNumeric(h)?h:s):this.css(u,typeof n=="string"?n:n+"px"):n==null?null:this}}),n.jQuery=n.$=i}(window),function(n,t){function i(t,i){var u=t.nodeName.toLowerCase();return"area"===u?(i=t.parentNode,u=i.name,!t.href||!u||i.nodeName.toLowerCase()!=="map")?!1:(t=n("img[usemap=#"+u+"]")[0],!!t&&r(t)):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"==u?t.href||i:i)&&r(t)}function r(t){return!n(t).parents().andSelf().filter(function(){return n.curCSS(this,"visibility")==="hidden"||n.expr.filters.hidden(this)}).length}n.ui=n.ui||{},n.ui.version||(n.extend(n.ui,{version:"1.8.13",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),n.fn.extend({_focus:n.fn.focus,focus:function(t,i){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){n(r).focus(),i&&i.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=n.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(n.curCSS(this,"position",1))&&/(auto|scroll)/.test(n.curCSS(this,"overflow",1)+n.curCSS(this,"overflow-y",1)+n.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(n.curCSS(this,"overflow",1)+n.curCSS(this,"overflow-y",1)+n.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?n(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length){i=n(this[0]);for(var r;i.length&&i[0]!==document;){if(r=i.css("position"),(r==="absolute"||r==="relative"||r==="fixed")&&(r=parseInt(i.css("zIndex"),10),!isNaN(r)&&r!==0))return r;i=i.parent()}}return 0},disableSelection:function(){return this.bind((n.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(n){n.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),n.each(["Width","Height"],function(i,r){function u(t,i,r,u){return n.each(o,function(){i-=parseFloat(n.curCSS(t,"padding"+this,!0))||0,r&&(i-=parseFloat(n.curCSS(t,"border"+this+"Width",!0))||0),u&&(i-=parseFloat(n.curCSS(t,"margin"+this,!0))||0)}),i}var o=r==="Width"?["Left","Right"]:["Top","Bottom"],f=r.toLowerCase(),e={innerWidth:n.fn.innerWidth,innerHeight:n.fn.innerHeight,outerWidth:n.fn.outerWidth,outerHeight:n.fn.outerHeight};n.fn["inner"+r]=function(i){return i===t?e["inner"+r].call(this):this.each(function(){n(this).css(f,u(this,i)+"px")})},n.fn["outer"+r]=function(t,i){return typeof t!="number"?e["outer"+r].call(this,t):this.each(function(){n(this).css(f,u(this,t,!0,i)+"px")})}}),n.extend(n.expr[":"],{data:function(t,i,r){return!!n.data(t,r[3])},focusable:function(t){return i(t,!isNaN(n.attr(t,"tabindex")))},tabbable:function(t){var r=n.attr(t,"tabindex"),u=isNaN(r);return(u||r>=0)&&i(t,!u)}}),n(function(){var i=document.body,t=i.appendChild(t=document.createElement("div"));n.extend(t.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),n.support.minHeight=t.offsetHeight===100,n.support.selectstart="onselectstart"in t,i.removeChild(t).style.display="none"}),n.extend(n.ui,{plugin:{add:function(t,i,r){t=n.ui[t].prototype;for(var u in r)t.plugins[u]=t.plugins[u]||[],t.plugins[u].push([i,r[u]])},call:function(n,t,i){if((t=n.plugins[t])&&n.element[0].parentNode)for(var r=0;r<t.length;r++)n.options[t[r][0]]&&t[r][1].apply(n.element,i)}},contains:function(n,t){return document.compareDocumentPosition?n.compareDocumentPosition(t)&16:n!==t&&n.contains(t)},hasScroll:function(t,i){if(n(t).css("overflow")==="hidden")return!1;i=i&&i==="left"?"scrollLeft":"scrollTop";var r=!1;return t[i]>0?!0:(t[i]=1,r=t[i]>0,t[i]=0,r)},isOverAxis:function(n,t,i){return n>t&&n<t+i},isOver:function(t,i,r,u,f,e){return n.ui.isOverAxis(t,r,f)&&n.ui.isOverAxis(i,u,e)}}))}(jQuery),function(n,t){var i,r;n.cleanData?(i=n.cleanData,n.cleanData=function(t){for(var r=0,u;(u=t[r])!=null;r++)n(u).triggerHandler("remove");i(t)}):(r=n.fn.remove,n.fn.remove=function(t,i){return this.each(function(){return i||(!t||n.filter(t,[this]).length)&&n("*",this).add([this]).each(function(){n(this).triggerHandler("remove")}),r.call(n(this),t,i)})}),n.widget=function(t,i,r){var u=t.split(".")[0],f;t=t.split(".")[1],f=u+"-"+t,r||(r=i,i=n.Widget),n.expr[":"][f]=function(i){return!!n.data(i,t)},n[u]=n[u]||{},n[u][t]=function(n,t){arguments.length&&this._createWidget(n,t)},i=new i,i.options=n.extend(!0,{},i.options),n[u][t].prototype=n.extend(!0,i,{namespace:u,widgetName:t,widgetEventPrefix:n[u][t].prototype.widgetEventPrefix||t,widgetBaseClass:f},r),n.widget.bridge(t,n[u][t])},n.widget.bridge=function(i,r){n.fn[i]=function(u){var f=typeof u=="string",e=Array.prototype.slice.call(arguments,1),o=this;return(u=!f&&e.length?n.extend.apply(null,[!0,u].concat(e)):u,f&&u.charAt(0)==="_")?o:(f?this.each(function(){var r=n.data(this,i),f=r&&n.isFunction(r[u])?r[u].apply(r,e):r;if(f!==r&&f!==t)return o=f,!1}):this.each(function(){var t=n.data(this,i);t?t.option(u||{})._init():n.data(this,i,new r(u,this))}),o)}},n.Widget=function(n,t){arguments.length&&this._createWidget(n,t)},n.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,i){n.data(i,this.widgetName,this),this.element=n(i),this.options=n.extend(!0,{},this.options,this._getCreateOptions(),t);var r=this;this.element.bind("remove."+this.widgetName,function(){r.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return n.metadata&&n.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(i,r){var u=i;if(arguments.length===0)return n.extend({},this.options);if(typeof i=="string"){if(r===t)return this.options[i];u={},u[i]=r}return this._setOptions(u),this},_setOptions:function(t){var i=this;return n.each(t,function(n,t){i._setOption(n,t)}),this},_setOption:function(n,t){return this.options[n]=t,n==="disabled"&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,i,r){var f=this.options[t],u;if(i=n.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),r=r||{},i.originalEvent)for(t=n.event.props.length;t;)u=n.event.props[--t],i[u]=i.originalEvent[u];return this.element.trigger(i,r),!(n.isFunction(f)&&f.call(this.element[0],i,r)===!1||i.isDefaultPrevented())}}}(jQuery),function(n){var t=!1;n(document).mousedown(function(){t=!1}),n.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(n){return t._mouseDown(n)}).bind("click."+this.widgetName,function(i){if(!0===n.data(i.target,t.widgetName+".preventClickEvent"))return n.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(i){if(n(this.document||document).mousedown(function(){t=!1}),!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var r=this,u=i.which==1,f=typeof this.options.cancel=="string"?n(i.target).parents().add(i.target).filter(this.options.cancel).length:!1;return!u||f||!this._mouseCapture(i)?!0:(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted))?(i.preventDefault(),!0):(!0===n.data(i.target,this.widgetName+".preventClickEvent")&&n.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(n){return r._mouseMove(n)},this._mouseUpDelegate=function(n){return r._mouseUp(n)},n(this.document||document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)}},_mouseMove:function(t){return n.browser.msie&&!((this.document||document).documentMode>=9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return n(this.document||document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&n.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(n){return Math.max(Math.abs(this._mouseDownEvent.pageX-n.pageX),Math.abs(this._mouseDownEvent.pageY-n.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(n){n.widget("ui.draggable",n.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper!="original"||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||n(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),!this.handle)?!1:(n(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){n('<div class="ui-draggable-iframeFix" style="background: #fff;"><\/div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(n(this).offset()).appendTo("body")}),!0)},_mouseStart:function(t){var i=this.options;return(this.helper=this._createHelper(t),this._cacheHelperProportions(),n.ui.ddmanager&&(n.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},n.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",t)===!1)?(this._clear(),!1):(this._cacheHelperProportions(),n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(t,!0),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){if(i=this._uiHash(),this._trigger("drag",t,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&this.options.axis=="y"||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&this.options.axis=="x"||(this.helper[0].style.top=this.position.top+"px"),n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=!1,r;return(n.ui.ddmanager&&!this.options.dropBehaviour&&(i=n.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),(!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")?!1:(this.options.revert=="invalid"&&!i||this.options.revert=="valid"&&i||this.options.revert===!0||n.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?(r=this,n(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()})):this._trigger("stop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return this.options.iframeFix===!0&&n("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),n.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var i=!this.options.handle||!n(this.options.handle,this.element).length?!0:!1;return n(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(i=!0)}),i},_createHelper:function(t){var i=this.options;return t=n.isFunction(i.helper)?n(i.helper.apply(this.element[0],[t])):i.helper=="clone"?this.element.clone().removeAttr("id"):this.element,t.parents("body").length||t.appendTo(i.appendTo=="parent"?this.element[0].parentNode:i.appendTo),t[0]==this.element[0]||/(fixed|absolute)/.test(t.css("position"))||t.css("position","absolute"),t},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),n.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&n.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&n.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var n=this.element.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options,i,r;t.containment=="parent"&&(t.containment=this.helper[0].parentNode),(t.containment=="document"||t.containment=="window")&&(this.containment=[(t.containment=="document"?0:n(window).scrollLeft())-this.offset.relative.left-this.offset.parent.left,(t.containment=="document"?0:n(window).scrollTop())-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:n(window).scrollLeft())+n(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:n(window).scrollTop())+(n(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array?t.containment.constructor==Array&&(this.containment=t.containment):(t=n(t.containment),i=t[0],i&&(t.offset(),r=n(i).css("overflow")!="hidden",this.containment=[(parseInt(n(i).css("borderLeftWidth"),10)||0)+(parseInt(n(i).css("paddingLeft"),10)||0),(parseInt(n(i).css("borderTopWidth"),10)||0)+(parseInt(n(i).css("paddingTop"),10)||0),(r?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n(i).css("borderLeftWidth"),10)||0)-(parseInt(n(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(r?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n(i).css("borderTopWidth"),10)||0)-(parseInt(n(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=t))},_convertPositionTo:function(t,i){i||(i=this.position),t=t=="absolute"?1:-1;var r=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&n.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,u=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*t+this.offset.parent.top*t-(n.browser.safari&&n.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():u?0:r.scrollTop())*t),left:i.left+this.offset.relative.left*t+this.offset.parent.left*t-(n.browser.safari&&n.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():u?0:r.scrollLeft())*t)}},_generatePosition:function(t){var f=this.options,e=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&n.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,o=/(html|body)/i.test(e[0].tagName),r=t.pageX,u=t.pageY,i;return this.originalPosition&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),i=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(r=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(u=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(r=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(u=i[3]+this.offset.click.top)),f.grid&&(u=this.originalPageY+Math.round((u-this.originalPageY)/f.grid[1])*f.grid[1],u=i?(u-this.offset.click.top<i[1]||u-this.offset.click.top>i[3])?(u-this.offset.click.top<i[1])?u+f.grid[1]:u-f.grid[1]:u:u,r=this.originalPageX+Math.round((r-this.originalPageX)/f.grid[0])*f.grid[0],r=i?(r-this.offset.click.left<i[0]||r-this.offset.click.left>i[2])?(r-this.offset.click.left<i[0])?r+f.grid[0]:r-f.grid[0]:r:r)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(n.browser.safari&&n.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:e.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(n.browser.safari&&n.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:e.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,r){return r=r||this._uiHash(),n.ui.plugin.call(this,t,[i,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),n.Widget.prototype._trigger.call(this,t,i,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),n.extend(n.ui.draggable,{version:"1.8.13"}),n.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var r=n(this).data("draggable"),u=r.options,f=n.extend({},i,{item:r.element});r.sortables=[],n(u.connectToSortable).each(function(){var i=n.data(this,"sortable");i&&!i.options.disabled&&(r.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,f))})},stop:function(t,i){var r=n(this).data("draggable"),u=n.extend({},i,{item:r.element});n.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,u))})},drag:function(t,i){var r=n(this).data("draggable"),u=this;n.each(r.sortables,function(){this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=n(u).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),n.ui.plugin.add("draggable","cursor",{start:function(){var t=n("body"),i=n(this).data("draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=n(this).data("draggable").options;t._cursor&&n("body").css("cursor",t._cursor)}}),n.ui.plugin.add("draggable","opacity",{start:function(t,i){t=n(i.helper),i=n(this).data("draggable").options,t.css("opacity")&&(i._opacity=t.css("opacity")),t.css("opacity",i.opacity)},stop:function(t,i){t=n(this).data("draggable").options,t._opacity&&n(i.helper).css("opacity",t._opacity)}}),n.ui.plugin.add("draggable","scroll",{start:function(){var t=n(this).data("draggable");t.scrollParent[0]!=document&&t.scrollParent[0].tagName!="HTML"&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var r=n(this).data("draggable"),i=r.options,u=!1;r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"?(i.axis&&i.axis=="x"||(r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=u=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=u=r.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&i.axis=="y"||(r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=u=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=u=r.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&i.axis=="x"||(t.pageY-n(document).scrollTop()<i.scrollSensitivity?u=n(document).scrollTop(n(document).scrollTop()-i.scrollSpeed):n(window).height()-(t.pageY-n(document).scrollTop())<i.scrollSensitivity&&(u=n(document).scrollTop(n(document).scrollTop()+i.scrollSpeed))),i.axis&&i.axis=="y"||(t.pageX-n(document).scrollLeft()<i.scrollSensitivity?u=n(document).scrollLeft(n(document).scrollLeft()-i.scrollSpeed):n(window).width()-(t.pageX-n(document).scrollLeft())<i.scrollSensitivity&&(u=n(document).scrollLeft(n(document).scrollLeft()+i.scrollSpeed)))),u!==!1&&n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(r,t)}}),n.ui.plugin.add("draggable","snap",{start:function(){var t=n(this).data("draggable"),i=t.options;t.snapElements=[],n(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var i=n(this),r=i.offset();this!=t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:r.top,left:r.left})})},drag:function(t,i){for(var d,r=n(this).data("draggable"),k=r.options,u=k.snapTolerance,c=i.offset.left,a=c+r.helperProportions.width,l=i.offset.top,v=l+r.helperProportions.height,f=r.snapElements.length-1;f>=0;f--){var e=r.snapElements[f].left,s=e+r.snapElements[f].width,o=r.snapElements[f].top,h=o+r.snapElements[f].height;if(e-u<c&&c<s+u&&o-u<l&&l<h+u||e-u<c&&c<s+u&&o-u<v&&v<h+u||e-u<a&&a<s+u&&o-u<l&&l<h+u||e-u<a&&a<s+u&&o-u<v&&v<h+u){if(k.snapMode!="inner"){var y=Math.abs(o-v)<=u,p=Math.abs(h-l)<=u,w=Math.abs(e-a)<=u,b=Math.abs(s-c)<=u;y&&(i.position.top=r._convertPositionTo("relative",{top:o-r.helperProportions.height,left:0}).top-r.margins.top),p&&(i.position.top=r._convertPositionTo("relative",{top:h,left:0}).top-r.margins.top),w&&(i.position.left=r._convertPositionTo("relative",{top:0,left:e-r.helperProportions.width}).left-r.margins.left),b&&(i.position.left=r._convertPositionTo("relative",{top:0,left:s}).left-r.margins.left)}d=y||p||w||b,k.snapMode!="outer"&&(y=Math.abs(o-l)<=u,p=Math.abs(h-v)<=u,w=Math.abs(e-c)<=u,b=Math.abs(s-a)<=u,y&&(i.position.top=r._convertPositionTo("relative",{top:o,left:0}).top-r.margins.top),p&&(i.position.top=r._convertPositionTo("relative",{top:h-r.helperProportions.height,left:0}).top-r.margins.top),w&&(i.position.left=r._convertPositionTo("relative",{top:0,left:e}).left-r.margins.left),b&&(i.position.left=r._convertPositionTo("relative",{top:0,left:s-r.helperProportions.width}).left-r.margins.left)),!r.snapElements[f].snapping&&(y||p||w||b||d)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[f].item})),r.snapElements[f].snapping=y||p||w||b||d}else r.snapElements[f].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[f].item})),r.snapElements[f].snapping=!1}}}),n.ui.plugin.add("draggable","stack",{start:function(){var t=n(this).data("draggable").options,i;t=n.makeArray(n(t.stack)).sort(function(t,i){return(parseInt(n(t).css("zIndex"),10)||0)-(parseInt(n(i).css("zIndex"),10)||0)}),t.length&&(i=parseInt(t[0].style.zIndex)||0,n(t).each(function(n){this.style.zIndex=i+n}),this[0].style.zIndex=i+t.length)}}),n.ui.plugin.add("draggable","zIndex",{start:function(t,i){t=n(i.helper),i=n(this).data("draggable").options,t.css("zIndex")&&(i._zIndex=t.css("zIndex")),t.css("zIndex",i.zIndex)},stop:function(t,i){t=n(this).data("draggable").options,t._zIndex&&n(i.helper).css("zIndex",t._zIndex)}})}(jQuery),function(n){n.widget("ui.sortable",n.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var n=this.options;this.document=n.document,this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?n.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable"),this._mouseDestroy();for(var n=this.items.length-1;n>=0;n--)this.items[n].item.removeData("sortable-item");return this},_setOption:function(t,i){t==="disabled"?(this.options[t]=i,this.widget()[i?"addClass":"removeClass"]("ui-sortable-disabled")):n.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var u;if(this.reverting||this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var r=null,f=this,e=n(t.target).parents().each(function(){if(n.data(this,"sortable-item")==f)return r=n(this),!1});return(n.data(t.target,"sortable-item")==f&&(r=n(t.target)),!r)?!1:this.options.handle&&!i&&(u=!1,n(this.options.handle,r).find("*").andSelf().each(function(){this==t.target&&(u=!0)}),!u)?!1:(this.currentItem=r,this._removeCurrentsFromItems(),!0)},_mouseStart:function(t,i,r){var u=this.options,e=this,f;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),n.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,u.cursorAt&&this._adjustOffsetFromHelper(u.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),u.containment&&this._setContainment(),u.cursor&&(n("body").css("cursor")&&(this._storedCursor=n("body").css("cursor")),n("body").css("cursor",u.cursor)),u.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",u.opacity)),u.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",u.zIndex)),this.scrollParent[0]!=(this.document||document)&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(f=this.containers.length-1;f>=0;f--)this.containers[f]._trigger("activate",t,e._uiHash(this));return n.ui.ddmanager&&(n.ui.ddmanager.current=this),n.ui.ddmanager&&!u.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,r,u;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(i=this.options,r=!1,this.scrollParent[0]!=(this.document||document)&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-n(this.document||document).scrollTop()<i.scrollSensitivity?r=n(this.document||document).scrollTop(n(this.document||document).scrollTop()-i.scrollSpeed):n(window).height()-(t.pageY-n(this.document||document).scrollTop())<i.scrollSensitivity&&(r=n(this.document||document).scrollTop(n(this.document||document).scrollTop()+i.scrollSpeed)),t.pageX-n(this.document||document).scrollLeft()<i.scrollSensitivity?r=n(this.document||document).scrollLeft(n(this.document||document).scrollLeft()-i.scrollSpeed):n(window).width()-(t.pageX-n(this.document||document).scrollLeft())<i.scrollSensitivity&&(r=n(this.document||document).scrollLeft(n(this.document||document).scrollLeft()+i.scrollSpeed))),r!==!1&&n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&this.options.axis=="y"||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&this.options.axis=="x"||(this.helper[0].style.top=this.position.top+"px"),u=this.items.length-1;u>=0;u--){var f=this.items[u],e=f.item[0],o=this._intersectsWithPointer(f);if(o&&e!=this.currentItem[0]&&this.placeholder[o==1?"next":"prev"]()[0]!=e&&!n.ui.contains(this.placeholder[0],e)&&(this.options.type=="semi-dynamic"?!n.ui.contains(this.element[0],e):!0)){if(this.direction=o==1?"down":"up",this.options.tolerance=="pointer"||this._intersectsWithSides(f))this._rearrange(t,f);else break;this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(n.ui.ddmanager&&!this.options.dropBehaviour&&n.ui.ddmanager.drop(this,t),this.options.revert){var r=this,u=r.placeholder.offset();r.reverting=!0,n(this.helper).animate({left:u.left-this.offset.parent.left-r.margins.left+(this.offsetParent[0]==(this.document||document).body?0:this.offsetParent[0].scrollLeft),top:u.top-this.offset.parent.top-r.margins.top+(this.offsetParent[0]==(this.document||document).body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){var i=this,t;if(this.dragging)for(this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show(),t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,i._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,i._uiHash(this)),this.containers[t].containerCache.over=0);return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),n.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?n(this.domPosition.prev).after(this.currentItem):n(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n(r).each(function(){var r=(n(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);r&&i.push((t.key||r[1]+"[]")+"="+(t.key&&t.expression?r[1]:r[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},r.each(function(){i.push(n(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(n){var t=this.positionAbs.left,h=t+this.helperProportions.width,i=this.positionAbs.top,c=i+this.helperProportions.height,r=n.left,f=r+n.width,u=n.top,e=u+n.height,o=this.offset.click.top,s=this.offset.click.left,l=i+o>u&&i+o<e&&t+s>r&&t+s<f;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>n[this.floating?"width":"height"]?l:r<t+this.helperProportions.width/2&&h-this.helperProportions.width/2<f&&u<i+this.helperProportions.height/2&&c-this.helperProportions.height/2<e},_intersectsWithPointer:function(t){var u=n.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),f=n.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),e=u&&f,i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return e?this.floating?r&&r=="right"||i=="down"?2:1:i&&(i=="down"?2:1):!1},_intersectsWithSides:function(t){var u=n.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),f=n.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?r=="right"&&f||r=="left"&&!f:i&&(i=="down"&&u||i=="up"&&!u)},_getDragVerticalDirection:function(){var n=this.positionAbs.top-this.lastPositionAbs.top;return n!=0&&(n>0?"down":"up")},_getDragHorizontalDirection:function(){var n=this.positionAbs.left-this.lastPositionAbs.left;return n!=0&&(n>0?"right":"left")},refresh:function(n){return this._refreshItems(n),this.refreshPositions(),this},_connectWith:function(){var n=this.options;return n.connectWith.constructor==String?[n.connectWith]:n.connectWith},_getItemsAsjQuery:function(t){var h=this,s=[],u=[],e=this._connectWith(),o,f,i,r;if(e&&t)for(r=e.length-1;r>=0;r--)for(o=n(e[r]),f=o.length-1;f>=0;f--)i=n.data(o[f],"sortable"),i&&i!=this&&!i.options.disabled&&u.push([n.isFunction(i.options.items)?i.options.items.call(i.element):n(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i]);for(u.push([n.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):n(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),r=u.length-1;r>=0;r--)u[r][0].each(function(){s.push(this)});return n(s)},_removeCurrentsFromItems:function(){for(var i=this.currentItem.find(":data(sortable-item)"),t,n=0;n<this.items.length;n++)for(t=0;t<i.length;t++)i[t]==this.items[n].item[0]&&this.items.splice(n,1)},_refreshItems:function(t){var o,i,r,s,h,u,l,c;this.items=[],this.containers=[this];var a=this.items,v=this,f=[[n.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):n(this.options.items,this.element),this]],e=this._connectWith();if(e)for(r=e.length-1;r>=0;r--)for(o=n(e[r]),u=o.length-1;u>=0;u--)i=n.data(o[u],"sortable"),i&&i!=this&&!i.options.disabled&&(f.push([n.isFunction(i.options.items)?i.options.items.call(i.element[0],t,{item:this.currentItem}):n(i.options.items,i.element),i]),this.containers.push(i));for(r=f.length-1;r>=0;r--)for(s=f[r][1],h=f[r][0],u=0,l=h.length;u<l;u++)c=n(h[u]),c.data("sortable-item",s),a.push({item:c,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var r,f,i,u;for(this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),i=this.items.length-1;i>=0;i--)(r=this.items[i],r.instance!=this.currentContainer&&this.currentContainer&&r.item[0]!=this.currentItem[0])||(f=this.options.toleranceElement?n(this.options.toleranceElement,r.item):r.item,t||(r.width=f.outerWidth(),r.height=f.outerHeight()),u=f.offset(),r.left=u.left,r.top=u.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)u=this.containers[i].element.offset(),this.containers[i].containerCache.left=u.left,this.containers[i].containerCache.top=u.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){var i=t||this,r=i.options,u;r.placeholder&&r.placeholder.constructor!=String||(u=r.placeholder,r.placeholder={element:function(){var t=n((this.document||document).createElement(i.currentItem[0].nodeName)).addClass(u||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return u||(t.style.visibility="hidden"),t},update:function(n,t){(!u||r.forcePlaceholderSize)&&(t.height()||t.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}),i.placeholder=n(r.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),r.placeholder.update(i,i.placeholder)},_contactContainers:function(t){for(var f=null,i=null,u,o,r=this.containers.length-1;r>=0;r--)if(!n.ui.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(f&&n.ui.contains(this.containers[r].element[0],f.element[0]))continue;f=this.containers[r],i=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0);if(f)if(this.containers.length===1)this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1;else if(this.currentContainer!=this.containers[i]){var s=1e4,e=null,h=this.positionAbs[this.containers[i].floating?"left":"top"];for(u=this.items.length-1;u>=0;u--)n.ui.contains(this.containers[i].element[0],this.items[u].item[0])&&(o=this.items[u][this.containers[i].floating?"left":"top"],Math.abs(o-h)<s&&(s=Math.abs(o-h),e=this.items[u]));if(!e&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[i],e?this._rearrange(t,e,null,!0):this._rearrange(t,null,this.containers[i].element,!0),this._trigger("change",t,this._uiHash()),this.containers[i]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1}},_createHelper:function(t){var r=this.options,i=n.isFunction(r.helper)?n(r.helper.apply(this.element[0],[t,this.currentItem])):r.helper=="clone"?this.currentItem.clone():this.currentItem;return i.parents("body").length||n(r.appendTo!="parent"?r.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(i[0].style.width==""||r.forceHelperSize)&&i.width(this.currentItem.width()),(i[0].style.height==""||r.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),n.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return this.cssPosition=="absolute"&&this.scrollParent[0]!=(this.document||document)&&n.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==(this.document||document).body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&n.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var n=this.currentItem.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var i=this.options;if(i.containment=="parent"&&(i.containment=this.helper[0].parentNode),(i.containment=="document"||i.containment=="window")&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,n(i.containment=="document"?this.document||document:window).width()-this.helperProportions.width-this.margins.left,(n(i.containment=="document"?this.document||document:window).height()||(this.document||document).body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(i.containment)){var t=n(i.containment)[0],r=n(i.containment).offset(),u=n(t).css("overflow")!="hidden";this.containment=[r.left+(parseInt(n(t).css("borderLeftWidth"),10)||0)+(parseInt(n(t).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(n(t).css("borderTopWidth"),10)||0)+(parseInt(n(t).css("paddingTop"),10)||0)-this.margins.top,r.left+(u?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(n(t).css("borderLeftWidth"),10)||0)-(parseInt(n(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(u?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(n(t).css("borderTopWidth"),10)||0)-(parseInt(n(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,i){i||(i=this.position);var r=t=="absolute"?1:-1,e=this.options,u=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=(this.document||document)&&n.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(u[0].tagName);return{top:i.top+this.offset.relative.top*r+this.offset.parent.top*r-(n.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:u.scrollTop())*r),left:i.left+this.offset.relative.left*r+this.offset.parent.left*r-(n.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:u.scrollLeft())*r)}},_generatePosition:function(t){var i=this.options,o=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=(this.document||document)&&n.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,s=/(html|body)/i.test(o[0].tagName),f,e,r,u;return this.cssPosition!="relative"||this.scrollParent[0]!=(this.document||document)&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),f=t.pageX,e=t.pageY,this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(e=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(e=this.containment[3]+this.offset.click.top)),i.grid&&(r=this.originalPageY+Math.round((e-this.originalPageY)/i.grid[1])*i.grid[1],e=this.containment?(r-this.offset.click.top<this.containment[1]||r-this.offset.click.top>this.containment[3])?(r-this.offset.click.top<this.containment[1])?r+i.grid[1]:r-i.grid[1]:r:r,u=this.originalPageX+Math.round((f-this.originalPageX)/i.grid[0])*i.grid[0],f=this.containment?(u-this.offset.click.left<this.containment[0]||u-this.offset.click.left>this.containment[2])?(u-this.offset.click.left<this.containment[0])?u+i.grid[0]:u-i.grid[0]:u:u)),{top:e-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(n.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():s?0:o.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(n.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())}},_rearrange:function(n,t,i,r){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var u=this,f=this.counter;window.setTimeout(function(){f==u.counter&&u.refreshPositions(!r)},0)},_clear:function(t,i){var u,f,r;if(this.reverting=!1,u=[],f=this,!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(r in this._storedCSS)(this._storedCSS[r]=="auto"||this._storedCSS[r]=="static")&&(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!i&&u.push(function(n){this._trigger("receive",n,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!i&&u.push(function(n){this._trigger("update",n,this._uiHash())}),!n.ui.contains(this.element[0],this.currentItem[0]))for(i||u.push(function(n){this._trigger("remove",n,this._uiHash())}),r=this.containers.length-1;r>=0;r--)n.ui.contains(this.containers[r].element[0],this.currentItem[0])&&!i&&(u.push(function(n){return function(t){n._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[r])),u.push(function(n){return function(t){n._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[r])));for(r=this.containers.length-1;r>=0;r--)i||u.push(function(n){return function(t){n._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(u.push(function(n){return function(t){n._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);if(this._storedCursor&&n("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){for(this._trigger("beforeStop",t,this._uiHash()),r=0;r<u.length;r++)u[r].call(this,t);this._trigger("stop",t,this._uiHash())}return!1}if(i||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(r=0;r<u.length;r++)u[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){n.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||n([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),n.extend(n.ui.sortable,{version:"1.8.13"})}(jQuery),function(n){n.fn.serializeObject=function(){var n={},t=this.serializeArray();return jQuery.each(t,function(){n[this.name]!==undefined?(n[this.name].push||(n[this.name]=[n[this.name]]),n[this.name].push(this.value||"")):n[this.name]=this.value||""}),n}}(jQuery),jQuery.extend(jQuery.easing,{easeInSine:function(n,t,i,r,u){return-r*Math.cos(t/u*(Math.PI/2))+r+i},easeOutSine:function(n,t,i,r,u){return r*Math.sin(t/u*(Math.PI/2))+i},easeInOutSine:function(n,t,i,r,u){return-r/2*(Math.cos(Math.PI*t/u)-1)+i}}),function(n){n.toJSON=function(t){var i,y,f,e,o,s,h,r,l,c,a,u,v,p;if(typeof JSON=="object"&&JSON.stringify)return JSON.stringify(t);if(i=typeof t,t===null)return"null";if(i=="undefined")return undefined;if(i=="number"||i=="boolean")return t+"";if(i=="string")return n.quoteString(t);if(i=="object"){if(typeof t.toJSON=="function")return n.toJSON(t.toJSON());if(t.constructor===Date)return y=t.getUTCFullYear(),f=t.getUTCMonth()+1,f<10&&(f="0"+f),e=t.getUTCDate(),e<10&&(e="0"+e),o=t.getUTCHours(),o<10&&(o="0"+o),s=t.getUTCMinutes(),s<10&&(s="0"+s),h=t.getUTCSeconds(),h<10&&(h="0"+h),r=t.getUTCMilliseconds(),r<100&&(r="0"+r),r<10&&(r="0"+r),'"'+y+"-"+f+"-"+e+"T"+o+":"+s+":"+h+"."+r+'Z"';if(t.constructor===Array){for(l=[],c=0;c<t.length;c++)l.push(n.toJSON(t[c])||"null");return"["+l.join(",")+"]"}a=[];for(u in t){if(i=typeof u,i=="number")v='"'+u+'"';else if(i=="string")v=n.quoteString(u);else continue;typeof t[u]!="function"&&(p=n.toJSON(t[u]),a.push(v+":"+p))}return"{"+a.join(", ")+"}"}},n.quoteString=function(n){return n.match(t)?'"'+n.replace(t,function(n){var t=i[n];return typeof t=="string"?t:(t=n.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})+'"':'"'+n+'"'};var t=/["\\\x00-\x1f\x7f-\x9f]/g,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}}(jQuery),function(n){n.fn.localize=function(t){this.find("*").contents().each(function(){var r=!1,i="";return typeof this.data=="string"&&(i=n.trim(this.data),i&&(r=t.sub[i]||t.top[i])&&(this.data=r)),this.nodeName=="IMG"&&this.attributes.src&&(i=this.attributes.src.nodeValue,i&&(r=t.sub[i]||t.top[i])&&n(this).attr("src",r)),this.nodeName=="A"&&this.attributes.href&&(i=n.trim(this.attributes.href.nodeValue),i&&(r=t.sub[i]||t.top[i])&&n(this).attr("href",r)),this.nodeName=="INPUT"&&this.attributes.type&&this.attributes.value&&["submit","reset","button"].indexOf(this.attributes.type.nodeValue.toLowerCase())>-1&&(i=n.trim(this.attributes.value.nodeValue),i&&(r=t.sub[i]||t.top[i])&&n(this).attr("value",r)),this})}}(jQuery),function(n){function u(n,t,i,r){if(!n.tag.isInline&&i.length>0){i.push("\n");for(var u=0;u<r;u++)i.push("\t")}}function e(i,r){var f=[],c=i.attributes.length==0,l=0,o=null,w=i.tag.render&&(r.allowedTags.length==0||n.inArray(i.tag.name,r.allowedTags)>-1)&&(r.removeTags.length==0||n.inArray(i.tag.name,r.removeTags)==-1),h,s,b;if(!i.isRoot&&w&&(f.push("<"),f.push(i.tag.name),n.each(i.attributes,function(){if(n.inArray(this.name,r.removeAttrs)==-1){var e=new RegExp(/^(['"]?)(.*?)['"]?$/).exec(this.value),t=e[2],u=e[1]||"'";this.name=="class"&&(t=n.grep(t.split(" "),function(t){return n.grep(r.allowedClasses,function(r){return r[0]==t&&(r.length==1||n.inArray(i.tag.name,r[1])>-1)}).length>0}).join(" "),u="'"),t!=null&&(t.length>0||n.inArray(this.name,i.tag.requiredAttributes)>-1)&&(f.push(" "),f.push(this.name),f.push("="),f.push(u),f.push(t),f.push(u))}})),i.tag.isSelfClosing)w&&f.push(" />"),c=!1;else if(i.tag.isNonClosing)c=!1;else{if(!i.isRoot&&w&&f.push(">"),l=r.formatIndent++,i.tag.toProtect)o=n.htmlClean.trim(i.children.join("")).replace(/<br>/ig,"\n"),f.push(o),c=o.length==0,r.formatIndent--;else{for(o=[],h=0;h<i.children.length;h++)s=i.children[h],b=n.htmlClean.trim(p(t(s)?s:s.childrenToString())),y(s)&&h>0&&b.length>0&&(a(s)||v(i.children[h-1]))&&o.push(" "),t(s)?b.length>0&&o.push(b):(h!=i.children.length-1||s.tag.name!="br")&&(r.format&&u(s,r,o,l),o=o.concat(e(s,r)));r.formatIndent--,o.length>0&&(r.format&&o[0]!="\n"&&u(i,r,f,l),f=f.concat(o),c=!1)}!i.isRoot&&w&&(r.format&&u(i,r,f,l-1),f.push("<\/"),f.push(i.tag.name),f.push(">"))}return!i.tag.allowEmpty&&c?[]:f}function f(t,i,r){return(r=r||1,n.inArray(t[t.length-r].tag.name,i)>-1)?!0:t.length-(r+1)>0&&f(t,i,r+1)?(t.pop(),!0):!1}function i(n){return n?(this.tag=n,this.isRoot=!1):(this.tag=new r("root"),this.isRoot=!0),this.attributes=[],this.children=[],this.hasAttribute=function(n){for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].name==n)return!0;return!1},this.childrenToString=function(){return this.children.join("")},this}function o(n,t){return this.name=n,this.value=t,this}function r(t,i,r,u){return this.name=t.toLowerCase(),this.isSelfClosing=n.inArray(this.name,g)>-1,this.isNonClosing=n.inArray(this.name,nt)>-1,this.isClosing=i!=undefined&&i.length>0,this.isInline=n.inArray(this.name,w)>-1,this.disallowNest=n.inArray(this.name,b)>-1,this.requiredParent=h[n.inArray(this.name,h)+1],this.allowEmpty=n.inArray(this.name,k)>-1,this.toProtect=n.inArray(this.name,d)>-1,this.rawAttributes=r,this.allowedAttributes=c[n.inArray(this.name,c)+1],this.requiredAttributes=l[n.inArray(this.name,l)+1],this.render=u&&n.inArray(this.name,u.notRenderedTags)==-1,this}function a(i){while(s(i)&&i.children.length>0)i=i.children[0];return t(i)&&i.length>0&&n.htmlClean.isWhitespace(i.charAt(0))}function v(i){while(s(i)&&i.children.length>0)i=i.children[i.children.length-1];return t(i)&&i.length>0&&n.htmlClean.isWhitespace(i.charAt(i.length-1))}function t(n){return n.constructor==String}function y(n){return t(n)||n.tag.isInline}function s(n){return n.constructor==i}function p(n){return n.replace(/&nbsp;|\n/g," ").replace(/\s\s+/g," ")}n.fn.htmlClean=function(t){return this.each(function(){this.value?this.value=n.htmlClean(this.value,t):this.innerHTML=n.htmlClean(this.innerHTML,t)})},n.htmlClean=function(u,s){var nt,h,tt,rt,l,p,ut,b,y,w,ft,k,d,et;s=n.extend({},n.htmlClean.defaults,s);var g=/<(\/)?(\w+:)?([\w]+)([^>]*)>/gi,a,it=new i,v=[it],c=it;for(s.bodyOnly&&(a=/<body[^>]*>((\n|.)*)<\/body>/i.exec(u))&&(u=a[1]),u=u.concat("<xxx>");a=g.exec(u);)if(h=new r(a[3],a[1],a[4],s),tt=u.substring(nt,a.index),tt.length>0&&(rt=c.children[c.children.length-1],c.children.length>0&&t(rt=c.children[c.children.length-1])?c.children[c.children.length-1]=rt.concat(tt):c.children.push(tt)),nt=g.lastIndex,h.isClosing)f(v,[h.name])&&(v.pop(),c=v[v.length-1]);else{for(l=new i(h);p=/(\w+)=(".*?"|'.*?'|[^\s>]*)/gi.exec(h.rawAttributes);){if(p[1].toLowerCase()=="style"&&s.replaceStyles)for(ut=!h.isInline,b=0;b<s.replaceStyles.length;b++)s.replaceStyles[b][0].test(p[2])&&(ut||(h.render=!1,ut=!0),c.children.push(l),v.push(l),c=l,h=new r(s.replaceStyles[b][1],"","",s),l=new i(h));h.allowedAttributes!=null&&(h.allowedAttributes.length==0||n.inArray(p[1],h.allowedAttributes)>-1)&&l.attributes.push(new o(p[1],p[2]))}for(n.each(h.requiredAttributes,function(){var n=this.toString();l.hasAttribute(n)||l.attributes.push(new o(n,""))}),y=0;y<s.replace.length;y++)for(w=0;w<s.replace[y][0].length;w++)if(ft=typeof s.replace[y][0][w]=="string",ft&&s.replace[y][0][w]==h.name||!ft&&s.replace[y][0][w].test(a)){h.render=!1,c.children.push(l),v.push(l),c=l,h=new r(s.replace[y][1],a[1],a[4],s),l=new i(h),l.attributes=c.attributes,y=s.replace.length;break}if(k=!0,c.isRoot||(c.tag.isInline&&!h.isInline?k=!1:c.tag.disallowNest&&h.disallowNest&&!h.requiredParent?k=!1:h.requiredParent&&(k=f(v,h.requiredParent))&&(c=v[v.length-1])),k)if(c.children.push(l),h.toProtect){for(d=null;d=g.exec(u);)if(et=new r(d[3],d[1],d[4],s),et.isClosing&&et.name==h.name){l.children.push(RegExp.leftContext.substring(nt)),nt=g.lastIndex;break}}else h.isSelfClosing||h.isNonClosing||(v.push(l),c=l)}return e(it,s).join("")},n.htmlClean.defaults={bodyOnly:!0,allowedTags:[],removeTags:["basefont","center","dir","font","frame","frameset","iframe","isindex","menu","noframes","s","strike","u"],removeAttrs:[],allowedClasses:[],notRenderedTags:[],format:!1,formatIndent:0,replace:[[["b","big"],"strong"],[["i"],"em"]],replaceStyles:[[/font-weight:\s*bold/i,"strong"],[/font-style:\s*italic/i,"em"],[/vertical-align:\s*super/i,"sup"],[/vertical-align:\s*sub/i,"sub"]]},n.htmlClean.trim=function(t){return n.htmlClean.trimStart(n.htmlClean.trimEnd(t))},n.htmlClean.trimStart=function(t){return t.substring(n.htmlClean.trimStartIndex(t))},n.htmlClean.trimStartIndex=function(t){for(var i=0;i<t.length-1&&n.htmlClean.isWhitespace(t.charAt(i));i++);return i},n.htmlClean.trimEnd=function(t){return t.substring(0,n.htmlClean.trimEndIndex(t))},n.htmlClean.trimEndIndex=function(t){for(var i=t.length-1;i>=0&&n.htmlClean.isWhitespace(t.charAt(i));i--);return i+1},n.htmlClean.isWhitespace=function(t){return n.inArray(t,tt)!=-1};var w=["a","abbr","acronym","address","b","big","br","button","caption","cite","code","del","em","font","hr","i","input","img","ins","label","legend","map","q","samp","select","small","span","strong","sub","sup","tt","var"],b=["h1","h2","h3","h4","h5","h6","p","th","td"],k=["th","td"],h=[null,"li",["ul","ol"],"dt",["dl"],"dd",["dl"],"td",["tr"],"th",["tr"],"tr",["table","thead","tbody","tfoot"],"thead",["table"],"tbody",["table"],"tfoot",["table"]],d=["script","style","pre","code"],g=["br","hr","img","link","meta"],nt=["!doctype","?xml"],c=[["class"],"?xml",[],"!doctype",[],"a",["accesskey","class","href","name","title","rel","rev","type","tabindex"],"abbr",["class","title"],"acronym",["class","title"],"blockquote",["cite","class"],"button",["class","disabled","name","type","value"],"del",["cite","class","datetime"],"form",["accept","action","class","enctype","method","name"],"input",["accept","accesskey","alt","checked","class","disabled","ismap","maxlength","name","size","readonly","src","tabindex","type","usemap","value"],"img",["alt","class","height","src","width"],"ins",["cite","class","datetime"],"label",["accesskey","class","for"],"legend",["accesskey","class"],"link",["href","rel","type"],"meta",["content","http-equiv","name","scheme"],"map",["name"],"optgroup",["class","disabled","label"],"option",["class","disabled","label","selected","value"],"q",["class","cite"],"td",["colspan","rowspan"],"th",["colspan","rowspan"],"script",["src","type"],"select",["class","disabled","multiple","name","size","tabindex"],"style",["type"],"table",["class","summary"],"textarea",["accesskey","class","cols","disabled","name","readonly","rows","tabindex"]],l=[[],"img",["alt"]],tt=[" "," ","\t","\n","\r","\f"]}(jQuery);var LiquidMetal=function(){function e(n,t){var i=n.charAt(t);return"A"<=i&&i<="Z"}function o(n,t){var i=n.charAt(t-1);return i==" "||i=="\t"}function n(n,t,i,r){i=Math.max(i||0,0),r=Math.min(r||n.length,n.length);for(var u=i;u<r;u++)n[u]=t;return n}var t=0,u=1,i=.8,f=.9,r=.85;return{score:function(n,r){var u,e,f;if(r.length==0)return i;if(r.length>n.length)return t;for(u=this.buildScoreArray(n,r),e=0,f=0;f<u.length;f++)e+=u[f];return e/u.length},buildScoreArray:function(s,h){for(var l=new Array(s.length),k=s.toLowerCase(),y=h.toLowerCase().split(""),a=-1,p=!1,w,c,b,v=0;v<y.length;v++){if(w=y[v],c=k.indexOf(w,a+1),c<0)return n(l,t);c==0&&(p=!0),o(s,c)?(l[c-1]=1,n(l,r,a+1,c-1)):e(s,c)?n(l,r,a+1,c):n(l,t,a+1,c),l[c]=u,a=c}return b=p?f:i,n(l,b,a+1),l}}}(),Showdown={};Showdown.converter=function(){var n,t,e,o=0;this.makeHtml=function(i){return n=[],t=[],e=[],i=i.replace(/~/g,"~T"),i=i.replace(/\$/g,"~D"),i=i.replace(/\r\n/g,"\n"),i=i.replace(/\r/g,"\n"),i="\n\n"+i+"\n\n",i=g(i),i=i.replace(/^[ \t]+$/mg,""),i=y(i),i=nt(i),i=s(i),i=d(i),i=i.replace(/~D/g,"$$"),i=i.replace(/~T/g,"~"),i=i.replace(/https?\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!]/g,function(n,t){var u=i.slice(0,t),f=i.slice(t),r;return u.match(/<[^>]+$/)&&f.match(/^[^>]*>/)?n:(r=n.replace(/^http:\/\/github.com\//,"https://github.com/"),"<a href='"+r+"'>"+n+"<\/a>")}),i=i.replace(/[a-z0-9_\-+=.]+@[a-z0-9\-]+(\.[a-z0-9-]+)+/ig,function(n){return"<a href='mailto:"+n+"'>"+n+"<\/a>"}),i=i.replace(/[a-f0-9]{40}/ig,function(n,t){if(typeof GitHub=="undefined"||typeof GitHub.nameWithOwner=="undefined")return n;var r=i.slice(0,t),u=i.slice(t);return r.match(/@$/)||r.match(/<[^>]+$/)&&u.match(/^[^>]*>/)?n:"<a href='http://github.com/"+GitHub.nameWithOwner+"/commit/"+n+"'>"+n.substring(0,7)+"<\/a>"}),i=i.replace(/([a-z0-9_\-+=.]+)@([a-f0-9]{40})/ig,function(n,t,r,u){if(typeof GitHub=="undefined"||typeof GitHub.nameWithOwner=="undefined")return n;GitHub.repoName=GitHub.repoName||v();var f=i.slice(0,u),e=i.slice(u);return f.match(/\/$/)||f.match(/<[^>]+$/)&&e.match(/^[^>]*>/)?n:"<a href='http://github.com/"+t+"/"+GitHub.repoName+"/commit/"+r+"'>"+t+"@"+r.substring(0,7)+"<\/a>"}),i=i.replace(/([a-z0-9_\-+=.]+\/[a-z0-9_\-+=.]+)@([a-f0-9]{40})/ig,function(n,t,i){return"<a href='http://github.com/"+t+"/commit/"+i+"'>"+t+"@"+i.substring(0,7)+"<\/a>"}),i=i.replace(/#([0-9]+)/ig,function(n,t,r){if(typeof GitHub=="undefined"||typeof GitHub.nameWithOwner=="undefined")return n;var u=i.slice(0,r),f=i.slice(r);return u==""||u.match(/[a-z0-9_\-+=.]$/)||u.match(/<[^>]+$/)&&f.match(/^[^>]*>/)?n:"<a href='http://github.com/"+GitHub.nameWithOwner+"/issues/#issue/"+t+"'>"+n+"<\/a>"}),i=i.replace(/([a-z0-9_\-+=.]+)#([0-9]+)/ig,function(n,t,r,u){if(typeof GitHub=="undefined"||typeof GitHub.nameWithOwner=="undefined")return n;GitHub.repoName=GitHub.repoName||v();var f=i.slice(0,u),e=i.slice(u);return f.match(/\/$/)||f.match(/<[^>]+$/)&&e.match(/^[^>]*>/)?n:"<a href='http://github.com/"+t+"/"+GitHub.repoName+"/issues/#issue/"+r+"'>"+n+"<\/a>"}),i=i.replace(/([a-z0-9_\-+=.]+\/[a-z0-9_\-+=.]+)#([0-9]+)/ig,function(n,t,i){return"<a href='http://github.com/"+t+"/issues/#issue/"+i+"'>"+n+"<\/a>"})};var v=function(){return GitHub.nameWithOwner.match(/^.+\/(.+)$/)[1]},nt=function(i){var i=i.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|\Z)/gm,function(i,r,u,f,e){return(r=r.toLowerCase(),n[r]=k(u),f)?f+e:(e&&(t[r]=e.replace(/"/g,"&quot;")),"")});return i},y=function(n){n=n.replace(/\n/g,"\n\n");return n=n.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,u),n=n.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,u),n=n.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,u),n=n.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,u),n=n.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,u),n.replace(/\n\n/g,"\n")},u=function(n,t){var i=t;return i=i.replace(/\n\n/g,"\n"),i=i.replace(/^\n/,""),i=i.replace(/\n+$/g,""),"\n\n~K"+(e.push(i)-1)+"K\n\n"},s=function(n){n=ut(n);var t=i("<hr />");return n=n.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,t),n=n.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,t),n=n.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,t),n=w(n),n=ft(n),n=st(n),n=y(n),ht(n)},f=function(n){return n=et(n),n=tt(n),n=ct(n),n=rt(n),n=it(n),n=lt(n),n=k(n),n=ot(n),n.replace(/  +\n/g," <br />\n")},tt=function(n){return n.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,function(n){var t=n.replace(/(.)<\/?code>(?=.)/g,"$1`");return r(t,"\\`*_")})},it=function(n){return n=n.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,h),n=n.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,h),n.replace(/(\[([^\[\]]+)\])()()()()()/g,h)},h=function(i,u,f,e,o,s,h,c){var y;c==undefined&&(c="");var p=u,w=f,l=e.toLowerCase(),a=o,v=c;if(a=="")if(l==""&&(l=w.toLowerCase().replace(/ ?\n/g," ")),a="#"+l,n[l]!=undefined)a=n[l],t[l]!=undefined&&(v=t[l]);else if(p.search(/\(\s*\)$/m)>-1)a="";else return p;return a=r(a,"*_"),y='<a href="'+a+'"',v!=""&&(v=v.replace(/"/g,"&quot;"),v=r(v,"*_"),y+=' title="'+v+'"'),y+(">"+w+"<\/a>")},rt=function(n){return n=n.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,p),n.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,p)},p=function(i,u,f,e,o,s,h,c){var w=u,y=f,a=e.toLowerCase(),v=o,l=c,p;if(l||(l=""),v=="")if(a==""&&(a=y.toLowerCase().replace(/ ?\n/g," ")),v="#"+a,n[a]!=undefined)v=n[a],t[a]!=undefined&&(l=t[a]);else return w;return y=y.replace(/"/g,"&quot;"),v=r(v,"*_"),p='<img src="'+v+'" alt="'+y+'"',l=l.replace(/"/g,"&quot;"),l=r(l,"*_"),p+=' title="'+l+'"',p+" />"},ut=function(n){return n=n.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(n,t){return i("<h1>"+f(t)+"<\/h1>")}),n=n.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(n,t){return i("<h2>"+f(t)+"<\/h2>")}),n.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(n,t,r){var u=t.length;return i("<h"+u+">"+f(r)+"<\/h"+u+">")})},c,w=function(n){n+="~0";var t=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return o?n=n.replace(t,function(n,t,i){var u=t,f=i.search(/[*+-]/g)>-1?"ul":"ol",r;return u=u.replace(/\n{2,}/g,"\n\n\n"),r=c(u),r=r.replace(/\s+$/,""),"<"+f+">"+r+"<\/"+f+">\n"}):(t=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,n=n.replace(t,function(n,t,i,r){var e=t,u=i,f=r.search(/[*+-]/g)>-1?"ul":"ol",u=u.replace(/\n{2,}/g,"\n\n\n"),o=c(u);return e+"<"+f+">\n"+o+"<\/"+f+">\n"})),n.replace(/~0/,"")};c=function(n){return o++,n=n.replace(/\n{2,}$/,"\n"),n+="~0",n=n.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(n,t,i,r,u){var e=u,o=t,h=i;return o||e.search(/\n{2,}/)>-1?e=s(l(e)):(e=w(l(e)),e=e.replace(/\n$/,""),e=f(e)),"<li>"+e+"<\/li>\n"}),n=n.replace(/~0/g,""),o--,n};var ft=function(n){return n+="~0",n=n.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(n,t,r){var u=t,f=r;return u=b(l(u)),u=g(u),u=u.replace(/^\n+/g,""),u=u.replace(/\n+$/g,""),u="<pre><code>"+u+"\n<\/code><\/pre>",i(u)+f}),n.replace(/~0/,"")},i=function(n){return n=n.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(e.push(n)-1)+"K\n\n"},et=function(n){return n.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(n,t,i,r){var u=r;return u=u.replace(/^([ \t]*)/g,""),u=u.replace(/[ \t]*$/g,""),u=b(u),t+"<code>"+u+"<\/code>"})},b=function(n){return n=n.replace(/&/g,"&amp;"),n=n.replace(/</g,"&lt;"),n=n.replace(/>/g,"&gt;"),r(n,"*_{}[]\\",!1)},ot=function(n){return n=n.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2<\/strong>"),n=n.replace(/(\w)_(\w)/g,"$1~E95E$2"),n.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2<\/em>")},st=function(n){return n.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(n,t){var r=t;return r=r.replace(/^[ \t]*>[ \t]?/gm,"~0"),r=r.replace(/~0/g,""),r=r.replace(/^[ \t]+$/gm,""),r=s(r),r=r.replace(/(^|\n)/g,"$1  "),r=r.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(n,t){var i=t;return i=i.replace(/^  /mg,"~0"),i.replace(/~0/g,"")}),i("<blockquote>\n"+r+"\n<\/blockquote>")})},ht=function(n){var t,i,u;n=n.replace(/^\n+/g,""),n=n.replace(/\n+$/g,"");var s=n.split(/\n{2,}/g),r=[],o=s.length;for(i=0;i<o;i++)t=s[i],t.search(/~K(\d+)K/g)>=0?r.push(t):t.search(/\S/)>=0&&(t=f(t),t=t.replace(/\n/g,"<br />"),t=t.replace(/^([ \t]*)/g,"<p>"),t+="<\/p>",r.push(t));for(o=r.length,i=0;i<o;i++)while(r[i].search(/~K(\d+)K/)>=0)u=e[RegExp.$1],u=u.replace(/\$/g,"$$$$"),r[i]=r[i].replace(/~K\d+K/,u);return r.join("\n\n")},k=function(n){return n=n.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),n.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},ct=function(n){return n=n.replace(/\\(\\)/g,a),n.replace(/\\([`*_{}\[\]()>#+-.!])/g,a)},lt=function(n){return n=n.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1<\/a>'),n.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(n,t){return at(d(t))})},at=function(n){function i(n){var t="0123456789ABCDEF",i=n.charCodeAt(0);return t.charAt(i>>4)+t.charAt(i&15)}var t=[function(n){return"&#"+n.charCodeAt(0)+";"},function(n){return"&#x"+i(n)+";"},function(n){return n}];return n="mailto:"+n,n=n.replace(/./g,function(n){if(n=="@")n=t[Math.floor(Math.random()*2)](n);else if(n!=":"){var i=Math.random();n=i>.9?t[2](n):i>.45?t[1](n):t[0](n)}return n}),n='<a href="'+n+'">'+n+"<\/a>",n.replace(/">.+:/g,'">')},d=function(n){return n.replace(/~E(\d+)E/g,function(n,t){var i=parseInt(t);return String.fromCharCode(i)})},l=function(n){return n=n.replace(/^(\t|[ ]{1,4})/gm,"~0"),n.replace(/~0/g,"")},g=function(n){return n=n.replace(/\t(?=\t)/g,"    "),n=n.replace(/\t/g,"~A~B"),n=n.replace(/~B(.+?)~A/g,function(n,t){for(var i=t,u=4-i.length%4,r=0;r<u;r++)i+=" ";return i}),n=n.replace(/~A/g,"    "),n.replace(/~B/g,"")},r=function(n,t,i){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])",u;return i&&(r="\\\\"+r),u=new RegExp(r,"g"),n.replace(u,a)},a=function(n,t){var i=t.charCodeAt(0);return"~E"+i+"E"}},function(){var n=Array.prototype.slice;this.Mercury||(this.Mercury={}),jQuery.extend(this.Mercury,{version:"0.6.0",Regions:Mercury.Regions||{},modalHandlers:Mercury.modalHandlers||{},lightviewHandlers:Mercury.lightviewHandlers||{},dialogHandlers:Mercury.dialogHandlers||{},preloadedViews:Mercury.preloadedViews||{},ajaxHeaders:function(){var n;return n={},n[Mercury.config.csrfHeader]=Mercury.csrfToken,n},on:function(n,t){return jQuery(window).on("mercury:"+n,t)},off:function(n,t){return jQuery(window).off("mercury:"+n,t)},one:function(n,t){return jQuery(window).one("mercury:"+n,t)},trigger:function(n,t){return Mercury.log(n,t),jQuery(window).trigger("mercury:"+n,t)},notify:function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],window.alert(Mercury.I18n.apply(this,t))},warn:function(n,t){if(t==null&&(t=0),console)try{return console.warn(n)}catch(i){if(t>=1)try{return console.debug(n)}catch(r){}}else if(t>=1)return Mercury.notify(n)},deprecated:function(n){return console&&console.trace&&(n=""+n+" -- "+console.trace()),Mercury.warn("deprecated: "+n,1)},log:function(){if(Mercury.debug&&console){if(arguments[0]==="hide:toolbar"||arguments[0]==="show:toolbar")return;try{return console.debug(arguments)}catch(n){}}},locale:function(){var n,i,t;return Mercury.determinedLocale?Mercury.determinedLocale:(Mercury.config.localization.enabled&&(n=[],navigator.language&&(n=navigator.language.toString().split("-")).length&&(t=Mercury.I18n[n[0]]||{},i=n.length>1?t["_"+n[1].toUpperCase()+"_"]:void 0),Mercury.I18n[n[0]]||(n=Mercury.config.localization.preferredLocale.split("-"),t=Mercury.I18n[n[0]]||{},i=n.length>1?t["_"+n[1].toUpperCase()+"_"]:void 0)),Mercury.determinedLocale={top:t||{},sub:i||{}})},I18n:function(){var r,u,t,i;return t=arguments[0],r=2<=arguments.length?n.call(arguments,1):[],u=Mercury.locale(),i=(u.sub[t]||u.top[t]||t||"").toString(),r.length?i.printf.apply(i,r):i}})}.call(this),function(){String.prototype.titleize=function(){return this[0].toUpperCase()+this.slice(1)},String.prototype.toHex=function(){return this[0]==="#"?this:this.replace(/rgb(a)?\(([0-9|%]+)[\s|,]?\s?([0-9|%]+)[\s|,]?\s?([0-9|%]+)[\s|,]?\s?([0-9|.|%]+\s?)?\)/gi,function(n,t,i,r,u){return"#"+parseInt(i).toHex()+parseInt(r).toHex()+parseInt(u).toHex()})},String.prototype.regExpEscape=function(){var n,t;return t=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],n=new RegExp("(\\"+t.join("|\\")+")","g"),this.replace(n,"\\$1")},String.prototype.printf=function(){var i,f,r,n,e,u,o,t,s;for(r=this.split("%"),t=r[0],o=/^([sdf])([\s\S%]*)$/,e=0,n=0,s=r.length;n<s;n++){if(f=r[n],u=o.exec(f),n===0||!u||arguments[n]===null){n>1&&(e+=2,t+="%"+f);continue}i=arguments[n-1-e];switch(u[1]){case"s":t+=i;break;case"d":case"i":t+=parseInt(i.toString(),10);break;case"f":t+=parseFloat(i)}t+=u[2]}return t},Number.prototype.toHex=function(){var n;return n=this.toString(16).toUpperCase(),n[1]?n:"0"+n},Number.prototype.toBytes=function(){for(var n=parseInt(this),t=0;1023<n;)n/=1024,t+=1;return t?""+n.toFixed(2)+[""," kb"," Mb"," Gb"," Tb"," Pb"," Eb"][t]:""+n+" bytes"}}.call(this),function(){this.Mercury.PageEditor=function(){function n(n,t){var i;if(this.saveUrl=n!=null?n:null,this.options=t!=null?t:{},window.mercuryInstance)throw Mercury.I18n("Mercury.PageEditor can only be instantiated once.");this.options.visible===!1||this.options.visible==="false"||(this.options.visible=!0),this.visible=this.options.visible,this.options.saveDataType===!1||this.options.saveDataType||(this.options.saveDataType="json"),window.mercuryInstance=this,this.regions=[],this.initializeInterface(),(i=jQuery(Mercury.config.csrfSelector).attr("content"))&&(Mercury.csrfToken=i)}return n.prototype.initializeInterface=function(){var n,t,i=this;this.focusableElement=jQuery("<input>",{"class":"mercury-focusable",type:"text"}).appendTo((n=this.options.appendTo)!=null?n:"body"),this.iframe=jQuery("<iframe>",{id:"mercury_iframe","class":"mercury-iframe",seamless:"true",frameborder:"0",src:"about:blank"}),this.iframe.appendTo((t=jQuery(this.options.appendTo).get(0))!=null?t:"body"),this.toolbar=new Mercury.Toolbar(this.options),this.statusbar=new Mercury.Statusbar(this.options),this.resize();this.iframe.on("load",function(){return i.initializeFrame()});this.iframe.one("load",function(){return i.bindEvents()});return this.loadIframeSrc(null)},n.prototype.initializeFrame=function(){var n;try{return this.iframe.data("loaded")?void 0:(this.iframe.data("loaded",!0),jQuery.browser.opera&&Mercury.notify("Opera isn't a fully supported browser, your results may not be optimal."),this.document=jQuery(this.iframe.get(0).contentWindow.document),jQuery('<style mercury-styles="true">').html(Mercury.config.injectedStyles).appendTo(this.document.find("head")),n=this.iframe.get(0).contentWindow,jQuery.globalEval=function(t){if(t&&/\S/.test(t))return(n.execScript||function(t){return n.eval.call(n,t)})(t)},n.Mercury=Mercury,window.History&&History.Adapter&&(n.History=History),this.bindDocumentEvents(),this.resize(),this.initializeRegions(),this.finalizeInterface(),Mercury.trigger("ready"),n.jQuery&&n.jQuery(n).trigger("mercury:ready"),n.Event&&n.Event.fire&&n.Event.fire(n,"mercury:ready"),n.onMercuryReady&&n.onMercuryReady(),this.iframe.css({visibility:"visible"}))}catch(t){return Mercury.notify("Mercury.PageEditor failed to load: %s\n\nPlease try refreshing.",t)}},n.prototype.initializeRegions=function(){var n,t,i,e,o,r,u,f;for(this.regions=[],r=jQuery("["+Mercury.config.regions.attribute+"]",this.document),t=0,e=r.length;t<e;t++)n=r[t],this.buildRegion(jQuery(n));if(this.visible){for(u=this.regions,f=[],i=0,o=u.length;i<o;i++)if(n=u[i],n.focus){n.focus();break}else f.push(void 0);return f}},n.prototype.buildRegion=function(n){var t,i;if(n.data("region"))n=n.data("region");else{if(t=(n.attr(Mercury.config.regions.attribute)||(typeof(i=Mercury.config.regions).determineType=="function"?i.determineType(n):void 0)||"unknown").titleize(),t==="Unknown"||!Mercury.Regions[t])throw Mercury.I18n('Region type is malformed, no data-type provided, or "%s" is unknown for the "%s" region.',t,n.attr("id")||"unknown");if(!Mercury.Regions[t].supported)return Mercury.notify("Mercury.Regions.%s is unsupported in this client. Supported browsers are %s.",t,Mercury.Regions[t].supportedText),!1;n=new Mercury.Regions[t](n,this.iframe.get(0).contentWindow),this.previewing&&n.togglePreview()}return this.regions.push(n)},n.prototype.finalizeInterface=function(){var n;return this.santizerElement=jQuery("<div>",{id:"mercury_sanitizer",contenteditable:"true",style:"position:fixed;width:100px;height:100px;top:0;left:-100px;opacity:0;overflow:hidden"}),this.santizerElement.appendTo((n=this.options.appendTo)!=null?n:this.document.find("body")),this.snippetToolbar&&this.snippetToolbar.release(),this.snippetToolbar=new Mercury.SnippetToolbar(this.document),this.hijackLinksAndForms(),this.visible?void 0:Mercury.trigger("mode",{mode:"preview"})},n.prototype.bindDocumentEvents=function(){var n=this;this.document.on("mousedown",function(n){return Mercury.trigger("hide:dialogs"),Mercury.region&&jQuery(n.target).closest("["+Mercury.config.regions.attribute+"]").get(0)!==Mercury.region.element.get(0)?Mercury.trigger("unfocus:regions"):void 0});return jQuery(this.document).bind("keydown",function(n){if((n.ctrlKey||n.metaKey))return n.keyCode===83?(Mercury.trigger("action",{action:"save"}),n.preventDefault()):void 0})},n.prototype.bindEvents=function(){var n=this;Mercury.on("initialize:frame",function(){return setTimeout(n.initializeFrame,100)});Mercury.on("focus:frame",function(){return n.iframe.focus()});Mercury.on("focus:window",function(){return setTimeout(function(){return n.focusableElement.focus()},10)});Mercury.on("toggle:interface",function(){return n.toggleInterface()});Mercury.on("reinitialize",function(){return n.initializeRegions()});Mercury.on("mode",function(t,i){if(i.mode==="preview")return n.previewing=!n.previewing});Mercury.on("action",function(t,i){var r;if(r=Mercury.config.globalBehaviors[i.action]||n[i.action],typeof r=="function")return i.already_handled=!0,r.call(n,i)});jQuery(window).on("resize",function(){return n.resize()});return jQuery(window).bind("keydown",function(n){if((n.ctrlKey||n.metaKey))return n.keyCode===83?(Mercury.trigger("action",{action:"save"}),n.preventDefault()):void 0}),window.onbeforeunload=this.beforeUnload},n.prototype.toggleInterface=function(){return this.visible?(this.visible=!1,this.toolbar.hide(),this.statusbar.hide(),this.previewing||Mercury.trigger("mode",{mode:"preview"}),this.previewing=!0):(this.visible=!0,this.toolbar.show(),this.statusbar.show(),Mercury.trigger("mode",{mode:"preview"}),this.previewing=!1),this.resize()},n.prototype.resize=function(){var t,n,i;return i=jQuery(window).width(),t=this.statusbar.top(),n=this.toolbar.height(),Mercury.displayRect={top:n,left:0,width:i,height:t-n,fullHeight:t},this.iframe.css({top:n,left:0,height:t-n}),Mercury.trigger("resize")},n.prototype.iframeSrc=function(n,t){var i,r;return n==null&&(n=null),t==null&&(t=!1),n=(n!=null?n:window.location.href).replace((r=(i=Mercury.config).editorUrlRegEx)!=null?r:i.editorUrlRegEx=/([http|https]:\/\/.[^\/]*)\/editor\/?(.*)/i,"$1/$2"),n=n.replace(/[\?|\&]mercury_frame=true/gi,""),n=n.replace(/\&_=i\d+/gi,""),t?""+n+(n.indexOf("?")>-1?"&":"?")+"mercury_frame=true&_="+(new Date).getTime():n},n.prototype.loadIframeSrc=function(n){return this.document&&this.document.off(),this.iframe.data("loaded",!1),this.iframe.get(0).contentWindow.document.location.href=this.iframeSrc(n,!0)},n.prototype.hijackLinksAndForms=function(){var o,n,u,t,i,s,h,f,e,r;for(f=jQuery("a, form",this.document),r=[],t=0,s=f.length;t<s;t++){for(n=f[t],u=!1,e=Mercury.config.nonHijackableClasses||[],i=0,h=e.length;i<h;i++)if(o=e[i],jQuery(n).hasClass(o)){u=!0;continue}u||n.target!==""&&n.target!=="_self"||jQuery(n).closest("["+Mercury.config.regions.attribute+"]").length?r.push(void 0):r.push(jQuery(n).attr("target","_parent"))}return r},n.prototype.beforeUnload=function(){return Mercury.changes&&!Mercury.silent?Mercury.I18n("You have unsaved changes.  Are you sure you want to leave without saving them first?"):null},n.prototype.getRegionByName=function(n){var i,t,u,r;for(r=this.regions,t=0,u=r.length;t<u;t++)if(i=r[t],i.name===n)return i;return null},n.prototype.save=function(n){var t,i,r,u,f,e=this;return r=(u=(f=this.saveUrl)!=null?f:Mercury.saveUrl)!=null?u:this.iframeSrc(),t=this.serialize(),Mercury.log("saving",t),this.options.saveStyle!=="form"&&(t=jQuery.toJSON(t)),this.options.saveMethod==="PUT"&&(i="PUT"),jQuery.ajax(r,{headers:Mercury.ajaxHeaders(),type:i||"POST",dataType:this.options.saveDataType,data:{content:t,_method:i},success:function(){return Mercury.changes=!1,Mercury.trigger("saved"),typeof n=="function"?n():void 0},error:function(n){return Mercury.trigger("save_failed",n),Mercury.notify("Mercury was unable to save to the url: %s",r)}})},n.prototype.serialize=function(){var t,i,n,u,r;for(i={},r=this.regions,n=0,u=r.length;n<u;n++)t=r[n],i[t.name]=t.serialize();return i},n}()}.call(this),function(){this.Mercury.HistoryBuffer=function(){function n(n){this.maxLength=n!=null?n:200,this.index=0,this.stack=[],this.markerRegExp=/<em class="mercury-marker"><\/em>/g}return n.prototype.push=function(n){if(jQuery.type(n)==="string"){if(this.stack[this.index]&&this.stack[this.index].replace(this.markerRegExp,"")===n.replace(this.markerRegExp,""))return}else if(jQuery.type(n)==="object"&&n.html&&this.stack[this.index]&&this.stack[this.index].html===n.html)return;return this.stack=this.stack.slice(0,this.index+1),this.stack.push(n),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1},n.prototype.undo=function(){return this.index<1?null:(this.index-=1,this.stack[this.index])},n.prototype.redo=function(){return this.index>=this.stack.length-1?null:(this.index+=1,this.stack[this.index])},n}()}.call(this),function(){this.Mercury.tableEditor=function(n,t,i){return Mercury.tableEditor.load(n,t,i),Mercury.tableEditor},jQuery.extend(Mercury.tableEditor,{load:function(n,t,i){return this.table=n,this.cell=t,this.cellContent=i!=null?i:"",this.row=this.cell.parent("tr"),this.columnCount=this.getColumnCount(),this.rowCount=this.getRowCount()},addColumn:function(n){var i,e,h,t,u,o,l,f,c,s,r;for(n==null&&(n="after"),f=this.cellSignatureFor(this.cell),s=this.table.find("tr"),r=[],i=0,c=s.length;i<c;i++)o=s[i],l=1,h=n==="after"?{right:f.right}:{left:f.left},(t=this.findCellByOptionsFor(o,h))?(u=jQuery("<"+t.cell.get(0).tagName+">").html(this.cellContent),this.setRowspanFor(u,t.height),n==="before"?t.cell.before(u):t.cell.after(u),r.push(i+=t.height-1)):(e=this.findCellByIntersectionFor(o,f))?r.push(this.setColspanFor(e.cell,e.width+1)):r.push(void 0);return r},removeColumn:function(){var r,n,t,l,o,u,s,i,f,e,a,v,y,h,c;if(i=this.cellSignatureFor(this.cell),!(i.width>1)){for(u=[],r=[],h=this.table.find("tr"),t=0,a=h.length;t<a;t++)s=h[t],(o=this.findCellByOptionsFor(s,{left:i.left,width:i.width}))?(u.push(o.cell),t+=o.height-1):(l=this.findCellByIntersectionFor(s,i))&&r.push(l.cell);for(f=0,v=u.length;f<v;f++)n=u[f],jQuery(n).remove();for(c=[],e=0,y=r.length;e<y;e++)n=r[e],c.push(this.setColspanFor(n,this.colspanFor(n)-1));return c}},addRow:function(n){var t,h,c,r,u,y,f,i,e,o,s,p,w,b,l,a,v;for(n==null&&(n="after"),u=jQuery("<tr>"),(i=this.rowspanFor(this.cell))>1&&n==="after"&&(this.row=jQuery(this.row.nextAll("tr")[i-2])),h=0,l=this.row.find("th, td"),e=0,p=l.length;e<p;e++){if(t=l[e],c=this.colspanFor(t),r=jQuery("<"+t.tagName+">").html(this.cellContent),this.setColspanFor(r,c),h+=c,(i=this.rowspanFor(t))>1&&n==="after"){this.setRowspanFor(t,i+1);continue}u.append(r)}if(h<this.columnCount)for(f=0,a=this.row.prevAll("tr"),o=0,w=a.length;o<w;o++)for(y=a[o],f+=1,v=jQuery(y).find("td[rowspan], th[rowspan]"),s=0,b=v.length;s<b;s++)t=v[s],i=this.rowspanFor(t),i-1>=f&&n==="before"?this.setRowspanFor(t,i+1):i-1>=f&&n==="after"&&(i-1===f?(r=jQuery("<"+t.tagName+">").html(this.cellContent),this.setColspanFor(r,this.colspanFor(t)),u.append(r)):this.setRowspanFor(t,i+1));return n==="before"?this.row.before(u):this.row.after(u)},removeRow:function(){var k,n,r,f,t,e,l,i,a,v,o,s,h,c,d,g,nt,tt,y,u,p,w,b;for(a=!0,e=0,t=0,y=this.row.find("td, th"),o=0,d=y.length;o<d;o++)n=y[o],i=this.rowspanFor(n),e&&i!==e&&(a=!1),(i<t||!t)&&(t=i),e=i;if(a||!(this.rowspanFor(this.cell)>t)){if(t>1)for(r=0,u=t-2;0<=u?r<=u:r>=u;0<=u?r++:r--)jQuery(this.row.nextAll("tr")[r]).remove();for(p=this.row.find("td[rowspan], th[rowspan]"),s=0,g=p.length;s<g;s++)(n=p[s],v=this.cellSignatureFor(n),v.height!==t)&&(f=this.findCellByOptionsFor(this.row.nextAll("tr")[t-1],{left:v.left,forceAdjacent:!0}))&&(this.setRowspanFor(n,this.rowspanFor(n)-this.rowspanFor(this.cell)),f.direction==="before"?f.cell.before(jQuery(n).clone()):f.cell.after(jQuery(n).clone()));if(this.columnsFor(this.row.find("td, th"))<this.columnCount)for(l=0,w=this.row.prevAll("tr"),h=0,nt=w.length;h<nt;h++)for(k=w[h],l+=1,b=jQuery(k).find("td[rowspan], th[rowspan]"),c=0,tt=b.length;c<tt;c++)n=b[c],i=this.rowspanFor(n),i>l&&this.setRowspanFor(n,i-this.rowspanFor(this.cell));return this.row.remove()}},increaseColspan:function(){var n;if(n=this.cell.next("td, th"),n.length)return this.rowspanFor(n)!==this.rowspanFor(this.cell)?void 0:this.cellIndexFor(n)>this.cellIndexFor(this.cell)+this.colspanFor(this.cell)?void 0:(this.setColspanFor(this.cell,this.colspanFor(this.cell)+this.colspanFor(n)),n.remove())},decreaseColspan:function(){var n;if(this.colspanFor(this.cell)!==1)return this.setColspanFor(this.cell,this.colspanFor(this.cell)-1),n=jQuery("<"+this.cell.get(0).tagName+">").html(this.cellContent),this.setRowspanFor(n,this.rowspanFor(this.cell)),this.cell.after(n)},increaseRowspan:function(){var t,i,n;return n=this.cellSignatureFor(this.cell),i=this.row.nextAll("tr")[n.height-1],i&&(t=this.findCellByOptionsFor(i,{left:n.left,width:n.width}))?(this.setRowspanFor(this.cell,n.height+t.height),t.cell.remove()):void 0},decreaseRowspan:function(){var t,i,r,n;if(n=this.cellSignatureFor(this.cell),n.height!==1)return r=this.row.nextAll("tr")[n.height-2],(t=this.findCellByOptionsFor(r,{left:n.left,forceAdjacent:!0}))?(i=jQuery("<"+this.cell.get(0).tagName+">").html(this.cellContent),this.setColspanFor(i,this.colspanFor(this.cell)),this.setRowspanFor(this.cell,n.height-1),t.direction==="before"?t.cell.before(i):t.cell.after(i)):void 0},getColumnCount:function(){return this.columnsFor(this.table.find("thead tr:first-child, tbody tr:first-child, tfoot tr:first-child").first().find("td, th"))},getRowCount:function(){return this.table.find("tr").length},cellIndexFor:function(n){var t,h,c,i,f,e,r,u,l,a,o,s;if(n=jQuery(n),f=n.parent("tr"),c=this.columnsFor(f.find("td, th")),i=this.columnsFor(n.prevAll("td, th")),c<this.columnCount)for(e=0,o=f.prevAll("tr"),r=0,l=o.length;r<l;r++)for(h=o[r],e+=1,s=jQuery(h).find("td[rowspan], th[rowspan]"),u=0,a=s.length;u<a;u++)t=s[u],this.rowspanFor(t)>e&&this.cellIndexFor(t)<=i&&(i+=this.colspanFor(t));return i},cellSignatureFor:function(n){var t;return t={cell:jQuery(n)},t.left=this.cellIndexFor(n),t.width=this.colspanFor(n),t.height=this.rowspanFor(n),t.right=t.left+t.width,t},findCellByOptionsFor:function(n,t){var u,f,i,r,o,e;for(e=jQuery(n).find("td, th"),r=0,o=e.length;r<o;r++){if(u=e[r],i=this.cellSignatureFor(u),typeof t.right!="undefined"&&i.right===t.right)return i;if(typeof t.left!="undefined")if(t.width){if(i.left===t.left&&i.width===t.width)return i}else if(t.forceAdjacent){if(t.forceAdjacent&&i.left>t.left)return f=jQuery(u).prev("td, th"),f.length?(i=this.cellSignatureFor(f),i.direction="after"):i.direction="before",i}else if(i.left===t.left)return i}return t.forceAdjacent?(i.direction="after",i):null},findCellByIntersectionFor:function(n,t){var f,i,r,e,u;for(u=jQuery(n).find("td, th"),r=0,e=u.length;r<e;r++)if(f=u[r],i=this.cellSignatureFor(f),i.right-t.left>=0&&i.right>t.left)return i;return null},columnsFor:function(n){var r,i,t,u;for(i=0,t=0,u=n.length;t<u;t++)r=n[t],i+=this.colspanFor(r);return i},colspanFor:function(n){return parseInt(jQuery(n).attr("colspan"))||1},rowspanFor:function(n){return parseInt(jQuery(n).attr("rowspan"))||1},setColspanFor:function(n,t){return jQuery(n).attr("colspan",t>1?t:null)},setRowspanFor:function(n,t){return jQuery(n).attr("rowspan",t>1?t:null)}})}.call(this),function(){this.Mercury.Dialog=function(){function n(n,t,i){this.url=n,this.name=t,this.options=i!=null?i:{},this.button=this.options["for"],this.build(),this.bindEvents(),this.preload()}return n.prototype.build=function(){var n;return this.element=jQuery("<div>",{"class":"mercury-dialog mercury-"+this.name+"-dialog loading",style:"display:none"}),this.element.appendTo((n=jQuery(this.options.appendTo).get(0))!=null?n:"body")},n.prototype.bindEvents=function(){return this.element.on("mousedown",function(n){return n.stopPropagation()})},n.prototype.preload=function(){if(this.options.preload)return this.load()},n.prototype.toggle=function(){return this.visible?this.hide():this.show()},n.prototype.resize=function(){return this.show()},n.prototype.show=function(){return Mercury.trigger("hide:dialogs",this),this.visible=!0,this.loaded?(this.element.css({width:"auto",height:"auto"}),this.position(this.visible)):this.position(),this.appear()},n.prototype.position=function(){},n.prototype.appear=function(){var n=this;return this.element.css({display:"block",opacity:0}),this.element.animate({opacity:.95},200,"easeInOutSine",function(){if(!n.loaded)return n.load(function(){return n.resize()})})},n.prototype.hide=function(){return this.element.hide(),this.visible=!1},n.prototype.load=function(n){var t=this;if(this.url)if(Mercury.preloadedViews[this.url]){if(this.loadContent(Mercury.preloadedViews[this.url]),Mercury.dialogHandlers[this.name]&&Mercury.dialogHandlers[this.name].call(this),n)return n()}else return jQuery.ajax(this.url,{success:function(i){return t.loadContent(i),Mercury.dialogHandlers[t.name]&&Mercury.dialogHandlers[t.name].call(t),n?n():void 0},error:function(){return t.hide(),t.button&&t.button.removeClass("pressed"),Mercury.notify('Mercury was unable to load %s for the "%s" dialog.',t.url,t.name)}})},n.prototype.loadContent=function(n){return this.loaded=!0,this.element.removeClass("loading"),this.element.html(n),Mercury.config.localization.enabled?this.element.localize(Mercury.locale()):void 0},n}()}.call(this),function(){var n=Object.prototype.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};this.Mercury.Palette=function(n){function i(n,t,r){this.url=n,this.name=t,this.options=r!=null?r:{},i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.build=function(){var n;return this.element=jQuery("<div>",{"class":"mercury-palette mercury-"+this.name+"-palette loading",style:"display:none"}),this.element.appendTo((n=jQuery(this.options.appendTo).get(0))!=null?n:"body")},i.prototype.bindEvents=function(){var n=this;Mercury.on("hide:dialogs",function(t,i){if(i!==n)return n.hide()});return i.__super__.bindEvents.apply(this,arguments)},i.prototype.position=function(n){var t,i;return this.element.css({top:0,left:0,display:"block",visibility:"hidden"}),t=this.button.offset(),i=this.element.width(),t.left+i>jQuery(window).width()&&(t.left=t.left-i+this.button.width()),this.element.css({top:t.top+this.button.height(),left:t.left,display:n?"block":"none",visibility:"visible"})},i}(Mercury.Dialog)}.call(this),function(){var n=Object.prototype.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};this.Mercury.Select=function(n){function i(n,t,r){this.url=n,this.name=t,this.options=r!=null?r:{},i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.build=function(){var n;return this.element=jQuery("<div>",{"class":"mercury-select mercury-"+this.name+"-select loading",style:"display:none"}),this.element.appendTo((n=jQuery(this.options.appendTo).get(0))!=null?n:"body")},i.prototype.bindEvents=function(){var n=this;Mercury.on("hide:dialogs",function(t,i){if(i!==n)return n.hide()});this.element.on("mousedown",function(n){return n.preventDefault()});return i.__super__.bindEvents.apply(this,arguments)},i.prototype.position=function(n){var f,u,e,o,i,r,t;return this.element.css({top:0,left:0,display:"block",visibility:"hidden"}),r=this.button.offset(),e=this.element.width(),u=this.element.height(),f=jQuery(document).height(),t=r.top+this.button.height()/2-u/2,t<r.top-100&&(t=r.top-100),t<20&&(t=20),o=this.loaded?"auto":u,t+u>=f-20&&(o=f-t-20),i=r.left,i+e>jQuery(window).width()&&(i=i-e+this.button.width()),this.element.css({top:t,left:i,height:o,display:n?"block":"none",visibility:"visible"})},i}(Mercury.Dialog)}.call(this),function(){var n=Object.prototype.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};this.Mercury.Panel=function(n){function i(n,t,r){this.url=n,this.name=t,this.options=r!=null?r:{},i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.build=function(){var n;return this.element=jQuery("<div>",{"class":"mercury-panel loading",style:"display:none;"}),this.titleElement=jQuery("<h1><span>"+Mercury.I18n(this.options.title)+"<\/span><\/h1>").appendTo(this.element),this.paneElement=jQuery("<div>",{"class":"mercury-panel-pane"}).appendTo(this.element),this.options.closeButton&&jQuery("<a/>",{"class":"mercury-panel-close"}).appendTo(this.titleElement).css({opacity:0}),this.element.appendTo((n=jQuery(this.options.appendTo).get(0))!=null?n:"body")},i.prototype.bindEvents=function(){var n=this;Mercury.on("resize",function(){return n.position(n.visible)});Mercury.on("hide:panels",function(t,i){if(i!==n)return n.button.removeClass("pressed"),n.hide()});this.titleElement.find(".mercury-panel-close").on("click",function(n){return n.preventDefault(),Mercury.trigger("hide:panels")});this.element.on("mousedown",function(n){return n.stopPropagation()});this.element.on("ajax:beforeSend",function(t,i,r){return r.success=function(t){return n.loadContent(t),n.resize()}});return i.__super__.bindEvents.apply(this,arguments)},i.prototype.show=function(){return Mercury.trigger("hide:panels",this),i.__super__.show.apply(this,arguments)},i.prototype.resize=function(){var i,n,r,t=this;return this.titleElement.find(".mercury-panel-close").css({opacity:0}),this.paneElement.css({display:"none"}),r=this.element.width(),this.paneElement.css({visibility:"hidden",width:"auto",display:"block"}),n=this.element.width(),this.paneElement.css({visibility:"visible",display:"none"}),i=this.element.offset(),this.element.animate({left:i.left-(n-r),width:n},200,"easeInOutSine",function(){return t.titleElement.find(".mercury-panel-close").animate({opacity:1},100),t.paneElement.css({display:"block",width:n}),t.makeDraggable()}),this.visible?void 0:this.hide()},i.prototype.position=function(n){var i,r,t,f,u;return this.element.css({display:"block",visibility:"hidden"}),f=this.element.offset(),i=this.element.width(),r=Mercury.displayRect.height-16,u=r-this.titleElement.outerHeight(),this.paneElement.css({height:u,overflowY:u<30?"hidden":"auto"}),this.moved||(t=Mercury.displayRect.width-i-20),t<=8&&(t=8),(this.pinned||i+f.left>Mercury.displayRect.width-20)&&(t=Mercury.displayRect.width-i-20),this.element.css({top:Mercury.displayRect.top+8,left:t,height:r,display:n?"block":"none",visibility:"visible"}),this.makeDraggable(),n?void 0:this.element.hide()},i.prototype.loadContent=function(n){return this.loaded=!0,this.element.removeClass("loading"),this.paneElement.css({visibility:"hidden"}),this.paneElement.html(n),Mercury.config.localization.enabled?this.paneElement.localize(Mercury.locale()):void 0},i.prototype.makeDraggable=function(){var n,t=this;return n=this.element.width(),this.element.draggable({handle:"h1 span",axis:"x",opacity:.7,scroll:!1,addClasses:!1,iframeFix:!0,containment:[8,0,Mercury.displayRect.width-n-20,0],stop:function(){var i;return i=t.element.offset().left,t.moved=!0,t.pinned=i>Mercury.displayRect.width-n-30?!0:!1,!0}})},i}(Mercury.Dialog)}.call(this),function(){this.Mercury.modal=function(n,t){return t==null&&(t={}),Mercury.modal.show(n,t),Mercury.modal},jQuery.extend(Mercury.modal,{minWidth:400,show:function(n,t){var i=this;return this.url=n,this.options=t!=null?t:{},Mercury.trigger("focus:window"),this.initialize(),this.visible?this.update():this.appear(),this.options.content?setTimeout(500,function(){return i.loadContent(i.options.content)}):void 0},initialize:function(){if(!this.initialized)return this.build(),this.bindEvents(),this.initialized=!0},build:function(){var n,t;return this.element=jQuery("<div>",{"class":"mercury-modal loading"}),this.element.html('<h1 class="mercury-modal-title"><span><\/span><a>&times;<\/a><\/h1>'),this.element.append('<div class="mercury-modal-content-container"><div class="mercury-modal-content"><\/div><\/div>'),this.overlay=jQuery("<div>",{"class":"mercury-modal-overlay"}),this.titleElement=this.element.find(".mercury-modal-title"),this.contentContainerElement=this.element.find(".mercury-modal-content-container"),this.contentElement=this.element.find(".mercury-modal-content"),this.element.appendTo((n=jQuery(this.options.appendTo).get(0))!=null?n:"body"),this.overlay.appendTo((t=jQuery(this.options.appendTo).get(0))!=null?t:"body")},bindEvents:function(){var n=this;Mercury.on("refresh",function(){return n.resize(!0)});Mercury.on("resize",function(){return n.position()});this.overlay.on("click",function(){if(n.options.allowHideUsingOverlay)return n.hide()});this.titleElement.find("a").on("click",function(){return n.hide()});this.element.on("ajax:beforeSend",function(t,i,r){return r.success=function(t){return n.loadContent(t)}});return jQuery(document).on("keydown",function(t){if(t.keyCode===27&&n.visible)return n.hide()})},appear:function(){var n=this;return this.showing=!0,this.position(),this.overlay.show(),this.overlay.animate({opacity:1},200,"easeInOutSine",function(){return n.element.css({top:-n.element.height()}),n.setTitle(),n.element.show(),n.element.animate({top:0},200,"easeInOutSine",function(){return n.visible=!0,n.showing=!1,n.load()})})},resize:function(n){var i,u,f,r,t=this;return f=n?"visible":"hidden",u=this.titleElement.outerHeight(),r=this.contentElement.outerWidth(),this.contentPane&&this.contentPane.css({height:"auto"}),this.contentElement.css({height:"auto",visibility:f,display:"block"}),i=this.contentElement.outerHeight()+u,r<this.minWidth&&(r=this.minWidth),(i>Mercury.displayRect.fullHeight-20||this.options.fullHeight)&&(i=Mercury.displayRect.fullHeight-20),this.element.stop().animate({left:(Mercury.displayRect.width-r)/2,width:r,height:i},200,"easeInOutSine",function(){var n;return t.contentElement.css({visibility:"visible",display:"block"}),t.contentPane.length?(t.contentElement.css({height:i-u,overflow:"visible"}),n=t.contentControl.length?t.contentControl.outerHeight():0,t.contentPane.css({height:i-u-n-40}),t.contentPane.find(".mercury-display-pane").css({width:r-40})):t.contentElement.css({height:i-u,overflow:"auto"})})},position:function(){var r,n,i,u,t;return u=Mercury.displayRect.width,this.contentPane&&this.contentPane.css({height:"auto"}),this.contentElement.css({height:"auto"}),this.element.css({width:"auto",height:"auto",display:"block",visibility:"hidden"}),t=this.element.width(),n=this.element.height(),t<this.minWidth&&(t=this.minWidth),(n>Mercury.displayRect.fullHeight-20||this.options.fullHeight)&&(n=Mercury.displayRect.fullHeight-20),i=this.titleElement.outerHeight(),this.contentPane&&this.contentPane.length?(this.contentElement.css({height:n-i,overflow:"visible"}),r=this.contentControl.length?this.contentControl.outerHeight():0,this.contentPane.css({height:n-i-r-40}),this.contentPane.find(".mercury-display-pane").css({width:t-40})):this.contentElement.css({height:n-i,overflow:"auto"}),this.element.css({left:(u-t)/2,width:t,height:n,display:this.visible?"block":"none",visibility:"visible"})},update:function(){return this.reset(),this.resize(),this.load()},load:function(){var n=this;if(this.setTitle(),this.url)return this.element.addClass("loading"),Mercury.preloadedViews[this.url]?setTimeout(function(){return n.loadContent(Mercury.preloadedViews[n.url])},10):jQuery.ajax(this.url,{headers:Mercury.ajaxHeaders(),type:this.options.loadType||"GET",data:this.options.loadData,success:function(t){return n.loadContent(t)},error:function(){return n.hide(),Mercury.notify("Mercury was unable to load %s for the modal.",n.url)}})},loadContent:function(n,t){return t==null&&(t=null),this.initialize(),this.options=t||this.options,this.setTitle(),this.loaded=!0,this.element.removeClass("loading"),this.contentElement.html(n),this.contentElement.css({display:"none",visibility:"hidden"}),this.contentPane=this.element.find(".mercury-display-pane-container"),this.contentControl=this.element.find(".mercury-display-controls"),this.options.afterLoad&&this.options.afterLoad.call(this),this.options.handler&&(Mercury.modalHandlers[this.options.handler]?Mercury.modalHandlers[this.options.handler].call(this):Mercury.lightviewHandlers[this.options.handler]&&Mercury.lightviewHandlers[this.options.handler].call(this)),Mercury.config.localization.enabled&&this.element.localize(Mercury.locale()),this.resize()},setTitle:function(){var n;return this.titleElement.find("span").html(Mercury.I18n(this.options.title)),n=this.titleElement.find("a"),this.options.closeButton===!1?n.hide():n.show()},reset:function(){return this.titleElement.find("span").html(""),this.contentElement.html("")},hide:function(){if(!this.showing)return this.options={},this.initialized=!1,Mercury.trigger("focus:frame"),this.element.hide(),this.overlay.hide(),this.reset(),this.visible=!1}})}.call(this),function(){this.Mercury.lightview=function(n,t){return t==null&&(t={}),Mercury.lightview.show(n,t),Mercury.lightview},jQuery.extend(Mercury.lightview,{minWidth:400,show:function(n,t){var i=this;return this.url=n,this.options=t!=null?t:{},Mercury.trigger("focus:window"),this.initialize(),this.visible?this.update():this.appear(),this.options.content?setTimeout(500,function(){return i.loadContent(i.options.content)}):void 0},initialize:function(){if(!this.initialized)return this.build(),this.bindEvents(),this.initialized=!0},build:function(){var n,t;return this.element=jQuery("<div>",{"class":"mercury-lightview loading"}),this.element.html('<h1 class="mercury-lightview-title"><span><\/span><\/h1>'),this.element.append('<div class="mercury-lightview-content"><\/div>'),this.overlay=jQuery("<div>",{"class":"mercury-lightview-overlay"}),this.titleElement=this.element.find(".mercury-lightview-title"),this.options.closeButton&&this.titleElement.append('<a class="mercury-lightview-close"><\/a>'),this.contentElement=this.element.find(".mercury-lightview-content"),this.element.appendTo((n=jQuery(this.options.appendTo).get(0))!=null?n:"body"),this.overlay.appendTo((t=jQuery(this.options.appendTo).get(0))!=null?t:"body")},bindEvents:function(){var n=this;Mercury.on("refresh",function(){return n.resize(!0)});Mercury.on("resize",function(){if(n.visible)return n.position()});this.overlay.on("click",function(){if(!n.options.closeButton)return n.hide()});this.titleElement.find(".mercury-lightview-close").on("click",function(){return n.hide()});this.element.on("ajax:beforeSend",function(t,i,r){return r.success=function(t){return n.loadContent(t)}});return jQuery(document).on("keydown",function(t){if(t.keyCode===27&&n.visible)return n.hide()})},appear:function(){var n=this;return this.showing=!0,this.position(),this.overlay.show().css({opacity:0}),this.overlay.animate({opacity:1},200,"easeInOutSine",function(){return n.setTitle(),n.element.show().css({opacity:0}),n.element.stop().animate({opacity:1},200,"easeInOutSine",function(){return n.visible=!0,n.showing=!1,n.load()})})},resize:function(n){var t,u,f,e,o,i,r=this;return o=n?"visible":"hidden",e=Mercury.displayRect.width,f=Mercury.displayRect.fullHeight,u=this.titleElement.outerHeight(),i=this.contentElement.outerWidth(),(i>e-40||this.options.fullSize)&&(i=e-40),this.contentPane&&this.contentPane.css({height:"auto"}),this.contentElement.css({height:"auto",visibility:o,display:"block"}),t=this.contentElement.outerHeight()+u,(t>f-20||this.options.fullSize)&&(t=f-20),i<300&&(i=300),t<150&&(t=150),this.element.stop().animate({top:(f-t)/2+10,left:(Mercury.displayRect.width-i)/2,width:i,height:t},200,"easeInOutSine",function(){var n;return r.contentElement.css({visibility:"visible",display:"block"}),r.contentPane.length?(r.contentElement.css({height:t-u,overflow:"visible"}),n=r.contentControl.length?r.contentControl.outerHeight():0,r.contentPane.css({height:t-u-n-40}),r.contentPane.find(".mercury-display-pane").css({width:i-40})):r.contentElement.css({height:t-u-30,overflow:"auto"})})},position:function(){var f,n,i,r,u,t;return u=Mercury.displayRect.width,r=Mercury.displayRect.fullHeight,this.contentPane&&this.contentPane.css({height:"auto"}),this.contentElement.css({height:"auto"}),this.element.css({width:"auto",height:"auto",display:"block",visibility:"hidden"}),t=this.contentElement.width()+40,n=this.contentElement.height()+this.titleElement.outerHeight()+30,(t>u-40||this.options.fullSize)&&(t=u-40),(n>r-20||this.options.fullSize)&&(n=r-20),t<300&&(t=300),n<150&&(n=150),i=this.titleElement.outerHeight(),this.contentPane&&this.contentPane.length?(this.contentElement.css({height:n-i,overflow:"visible"}),f=this.contentControl.length?this.contentControl.outerHeight():0,this.contentPane.css({height:n-i-f-40}),this.contentPane.find(".mercury-display-pane").css({width:t-40})):this.contentElement.css({height:n-i-30,overflow:"auto"}),this.element.css({top:(r-n)/2+10,left:(u-t)/2,width:t,height:n,display:this.visible?"block":"none",visibility:"visible"})},update:function(){return this.reset(),this.resize(),this.load()},load:function(){var n=this;if(this.setTitle(),this.url)return this.element.addClass("loading"),Mercury.preloadedViews[this.url]?setTimeout(function(){return n.loadContent(Mercury.preloadedViews[n.url])},10):jQuery.ajax(this.url,{headers:Mercury.ajaxHeaders(),type:this.options.loadType||"GET",data:this.options.loadData,success:function(t){return n.loadContent(t)},error:function(){return n.hide(),Mercury.notify("Mercury was unable to load %s for the lightview.",n.url)}})},loadContent:function(n,t){return t==null&&(t=null),this.initialize(),this.options=t||this.options,this.setTitle(),this.loaded=!0,this.element.removeClass("loading"),this.contentElement.html(n),this.contentElement.css({display:"none",visibility:"hidden"}),this.contentPane=this.element.find(".mercury-display-pane-container"),this.contentControl=this.element.find(".mercury-display-controls"),this.options.afterLoad&&this.options.afterLoad.call(this),this.options.handler&&(Mercury.modalHandlers[this.options.handler]?Mercury.modalHandlers[this.options.handler].call(this):Mercury.lightviewHandlers[this.options.handler]&&Mercury.lightviewHandlers[this.options.handler].call(this)),Mercury.config.localization.enabled&&this.element.localize(Mercury.locale()),this.resize()},setTitle:function(){return this.titleElement.find("span").html(Mercury.I18n(this.options.title))},reset:function(){return this.titleElement.find("span").html(""),this.contentElement.html("")},hide:function(){if(!this.showing)return this.options={},this.initialized=!1,Mercury.trigger("focus:frame"),this.element.hide(),this.overlay.hide(),this.reset(),this.visible=!1}})}.call(this),function(){this.Mercury.Statusbar=function(){function n(n){this.options=n!=null?n:{},this.visible=this.options.visible,this.build(),this.bindEvents()}return n.prototype.build=function(){var n;return this.element=jQuery("<div>",{"class":"mercury-statusbar"}),this.aboutElement=jQuery("<a>",{"class":"mercury-statusbar-about"}).appendTo(this.element).html("Mercury Editor v"+Mercury.version),this.pathElement=jQuery("<div>",{"class":"mercury-statusbar-path"}).appendTo(this.element),this.visible||this.element.css({visibility:"hidden"}),this.element.appendTo((n=jQuery(this.options.appendTo).get(0))!=null?n:"body")},n.prototype.bindEvents=function(){var n=this;Mercury.on("region:update",function(t,i){if(i.region&&jQuery.type(i.region.path)==="function")return n.setPath(i.region.path())});return this.aboutElement.on("click",function(){return Mercury.lightview("/mercury/lightviews/about.html",{title:"Mercury Editor v"+Mercury.version})})},n.prototype.height=function(){return this.element.outerHeight()},n.prototype.top=function(){var t,n;return n=this.element.offset().top,t=parseInt(this.element.css("bottom"))<0?n-this.element.outerHeight():n,this.visible?t:n+this.element.outerHeight()},n.prototype.setPath=function(n){var r,i,t,u;for(i=[],t=0,u=n.length;t<u;t++)r=n[t],i.push("<a>"+r.tagName.toLowerCase()+"<\/a>");return this.pathElement.html("<span><strong>"+Mercury.I18n("Path:")+" <\/strong>"+i.reverse().join(" &raquo; ")+"<\/span>")},n.prototype.show=function(){return this.visible=!0,this.element.css({opacity:0,visibility:"visible"}),this.element.animate({opacity:1},200,"easeInOutSine")},n.prototype.hide=function(){return this.visible=!1,this.element.css({visibility:"hidden"})},n}()}.call(this),function(){var n=Object.prototype.hasOwnProperty;this.Mercury.Toolbar=function(){function t(n){this.options=n!=null?n:{},this.visible=this.options.visible,this.build(),this.bindEvents()}return t.prototype.build=function(){var o,r,t,f,s,h,u,i,c,e;this.element=jQuery("<div>",{"class":"mercury-toolbar-container",style:"width:10000px"}),this.visible||this.element.css({display:"none"}),this.element.appendTo((c=jQuery(this.options.appendTo).get(0))!=null?c:"body"),e=Mercury.config.toolbars;for(i in e)if(n.call(e,i)&&(t=e[i],!t._custom)){u=jQuery("<div>",{"class":"mercury-toolbar mercury-"+i+"-toolbar"}).appendTo(this.element),t._regions&&u.attr("data-regions",t._regions),f=jQuery("<div>",{"class":"mercury-toolbar-button-container"}).appendTo(u);for(r in t)n.call(t,r)&&(h=t[r],r!=="_regions")&&(o=this.buildButton(r,h),o&&o.appendTo(f));f.css("white-space")==="nowrap"&&(s=new Mercury.Toolbar.Expander(i,{appendTo:u,"for":f}),s.appendTo(this.element)),Mercury.config.toolbars.primary&&i!=="primary"&&u.addClass("disabled")}return this.element.css({width:"100%"})},t.prototype.buildButton=function(t,i){var r,u,f,e,o,s,h;if(t[0]==="_")return!1;switch(jQuery.type(i)){case"array":return h=i[0],s=i[1],e=i[2],new Mercury.Toolbar.Button(t,h,s,e,{appendDialogsTo:this.element});case"object":f=new Mercury.Toolbar.ButtonGroup(t,i);for(r in i)n.call(i,r)&&(o=i[r],u=this.buildButton(r,o),u&&u.appendTo(f));return f;case"string":return jQuery("<hr>",{"class":"mercury-"+(i==="-"?"line-separator":"separator")});default:throw Mercury.I18n('Unknown button structure -- please provide an array, object, or string for "%s".',t);}},t.prototype.bindEvents=function(){var n=this;Mercury.on("region:focused",function(t,i){var o,r,f,s,e,u;for(e=n.element.find(".mercury-toolbar"),u=[],f=0,s=e.length;f<s;f++)r=e[f],r=jQuery(r),(o=r.data("regions"))?o.split(",").indexOf(i.region.type())>-1?u.push(r.removeClass("disabled")):u.push(void 0):u.push(void 0);return u});Mercury.on("region:blurred",function(t,i){var o,r,f,s,e,u;for(e=n.element.find(".mercury-toolbar"),u=[],f=0,s=e.length;f<s;f++)r=e[f],r=jQuery(r),(o=r.data("regions"))?o.split(",").indexOf(i.region.type())>-1?u.push(r.addClass("disabled")):u.push(void 0):u.push(void 0);return u});this.element.on("click",function(){return Mercury.trigger("hide:dialogs")});return this.element.on("mousedown",function(n){return n.preventDefault()})},t.prototype.height=function(){return this.visible?this.element.outerHeight():0},t.prototype.show=function(){return this.visible=!0,this.element.css({top:-this.element.outerHeight(),display:"block"}),this.element.animate({top:0},200,"easeInOutSine")},t.prototype.hide=function(){return this.visible=!1,this.element.hide()},t}()}.call(this),function(){var n=Object.prototype.hasOwnProperty;this.Mercury.Toolbar.Button=function(){function t(n,t,i,r,u){return this.name=n,this.title=t,this.summary=i!=null?i:null,this.types=r!=null?r:{},this.options=u!=null?u:{},this.title&&(this.title=Mercury.I18n(this.title)),this.summary&&(this.summary=Mercury.I18n(this.summary)),this.build(),this.bindEvents(),this.element}return t.prototype.build=function(){var t,r,i,e,f,u;this.element=jQuery("<div>",{title:(e=this.summary)!=null?e:this.title,"class":"mercury-button mercury-"+this.name+"-button"}).html("<em>"+this.title+"<\/em>"),this.element.data("expander",'<div class="mercury-expander-button" data-button="'+this.name+'"><em><\/em><span>'+this.title+"<\/span><\/div>"),this.handled={},f=this.types,u=[];for(i in f)if(n.call(f,i)){t=f[i];switch(i){case"preload":u.push(!0);break;case"regions":this.element.addClass("disabled"),u.push(this.handled[i]=jQuery.isFunction(t)?t.call(this,this.name):t);break;case"toggle":u.push(this.handled[i]=!0);break;case"mode":u.push(this.handled[i]=t===!0?this.name:t);break;case"context":u.push(this.handled[i]=jQuery.isFunction(t)?t:Mercury.Toolbar.Button.contexts[this.name]);break;case"palette":this.element.addClass("mercury-button-palette"),r=jQuery.isFunction(t)?t.call(this,this.name):t,u.push(this.handled[i]=typeof r=="string"?new Mercury.Palette(r,this.name,this.defaultDialogOptions()):r);break;case"select":this.element.addClass("mercury-button-select").find("em").html(this.title),r=jQuery.isFunction(t)?t.call(this,this.name):t,u.push(this.handled[i]=typeof r=="string"?new Mercury.Select(r,this.name,this.defaultDialogOptions()):r);break;case"panel":this.element.addClass("mercury-button-panel"),this.handled.toggle=!0,r=jQuery.isFunction(t)?t.call(this,this.name):t,u.push(this.handled[i]=typeof r=="string"?new Mercury.Panel(r,this.name,this.defaultDialogOptions()):r);break;case"modal":u.push(this.handled[i]=jQuery.isFunction(t)?t.call(this,this.name):t);break;case"lightview":u.push(this.handled[i]=jQuery.isFunction(t)?t.call(this,this.name):t);break;default:throw Mercury.I18n('Unknown button type "%s" used for the "%s" button.',i,this.name);}}return u},t.prototype.bindEvents=function(){var t=this;Mercury.on("button",function(n,i){if(i.action===t.name)return t.element.click()});Mercury.on("mode",function(n,i){if(t.handled.mode===i.mode&&t.handled.toggle)return t.togglePressed()});Mercury.on("region:update",function(n,i){var r;return t.handled.context&&i.region&&jQuery.type(i.region.currentElement)==="function"?(r=i.region.currentElement(),r.length&&t.handled.context.call(t,r,i.region.element)?t.element.addClass("active"):t.element.removeClass("active")):t.element.removeClass("active")});Mercury.on("region:focused",function(n,i){if(t.handled.regions&&i.region&&i.region.type())return t.handled.regions.indexOf(i.region.type())>-1?t.element.removeClass("disabled"):t.element.addClass("disabled")});Mercury.on("region:blurred",function(){if(t.handled.regions)return t.element.addClass("disabled")});this.element.on("mousedown",function(){return t.element.addClass("active")});this.element.on("mouseup",function(){return t.element.removeClass("active")});return this.element.on("click",function(i){var r,e,u,f;if(!t.element.closest(".disabled").length){r=!1,f=t.handled;for(u in f)if(n.call(f,u)){e=f[u];switch(u){case"toggle":t.handled.mode||t.togglePressed();break;case"mode":r=!0,Mercury.trigger("mode",{mode:e});break;case"modal":r=!0,Mercury.modal(t.handled.modal,{title:t.summary||t.title,handler:t.name});break;case"lightview":r=!0,Mercury.lightview(t.handled.lightview,{title:t.summary||t.title,handler:t.name,closeButton:!0});break;case"palette":case"select":case"panel":i.stopPropagation(),r=!0,t.handled[u].toggle()}}return r||Mercury.trigger("action",{action:t.name}),t.options.regions&&t.options.regions.length?Mercury.trigger("focus:frame"):void 0}})},t.prototype.defaultDialogOptions=function(){return{title:this.summary||this.title,preload:this.types.preload,appendTo:this.options.appendDialogsTo||"body",closeButton:!0,"for":this.element}},t.prototype.togglePressed=function(){return this.element.toggleClass("pressed")},t}(),this.Mercury.Toolbar.Button.contexts={backColor:function(n){return this.element.css("background-color",n.css("background-color"))},foreColor:function(n){return this.element.css("background-color",n.css("color"))},bold:function(n){var t;return t=n.css("font-weight"),t==="bold"||t>400},italic:function(n){return n.css("font-style")==="italic"},overline:function(n){var r,t,u,i;if(n.css("text-decoration")==="overline")return!0;for(i=n.parentsUntil(this.element),t=0,u=i.length;t<u;t++)if(r=i[t],jQuery(r).css("text-decoration")==="overline")return!0;return!1},strikethrough:function(n,t){return n.css("text-decoration")==="line-through"||!!n.closest("strike",t).length},underline:function(n,t){return n.css("text-decoration")==="underline"||!!n.closest("u",t).length},subscript:function(n,t){return!!n.closest("sub",t).length},superscript:function(n,t){return!!n.closest("sup",t).length},justifyLeft:function(n){return n.css("text-align").indexOf("left")>-1},justifyCenter:function(n){return n.css("text-align").indexOf("center")>-1},justifyRight:function(n){return n.css("text-align").indexOf("right")>-1},justifyFull:function(n){return n.css("text-align").indexOf("justify")>-1},insertOrderedList:function(n,t){return!!n.closest("ol",t.element).length},insertUnorderedList:function(n,t){return!!n.closest("ul",t.element).length}}}.call(this),function(){this.Mercury.Toolbar.ButtonGroup=function(){function n(n,t){return this.name=n,this.options=t!=null?t:{},this.build(),this.bindEvents(),this.regions=this.options._regions,this.element}return n.prototype.build=function(){return this.element=jQuery("<div>",{"class":"mercury-button-group mercury-"+this.name+"-group"}),this.options._context||this.options._regions?this.element.addClass("disabled"):void 0},n.prototype.bindEvents=function(){var n=this;Mercury.on("region:update",function(t,i){var r,u;return r=Mercury.Toolbar.ButtonGroup.contexts[n.name],r&&i.region&&jQuery.type(i.region.currentElement)==="function"?(u=i.region.currentElement(),u.length&&r.call(n,u,i.region.element)?n.element.removeClass("disabled"):n.element.addClass("disabled")):void 0});Mercury.on("region:focused",function(t,i){if(n.regions&&i.region&&i.region.type())if(n.regions.indexOf(i.region.type())>-1){if(!n.options._context)return n.element.removeClass("disabled")}else return n.element.addClass("disabled")});return Mercury.on("region:blurred",function(){if(n.options.regions)return n.element.addClass("disabled")})},n}(),this.Mercury.Toolbar.ButtonGroup.contexts={table:function(n,t){return!!n.closest("table",t).length}}}.call(this),function(){var n=Object.prototype.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};this.Mercury.Toolbar.Expander=function(n){function i(n,t){return this.name=n,this.options=t,this.container=this.options["for"],this.containerWidth=this.container.outerWidth(),i.__super__.constructor.call(this,null,this.name,this.options),this.element}return t(i,n),i.prototype.build=function(){var n;return this.container.css({whiteSpace:"normal"}),this.trigger=jQuery("<div>",{"class":"mercury-toolbar-expander"}).appendTo((n=jQuery(this.options.appendTo).get(0))!=null?n:"body"),this.element=jQuery("<div>",{"class":"mercury-palette mercury-expander mercury-"+this.name+"-expander",style:"display:none"}),this.windowResize()},i.prototype.bindEvents=function(){var n=this;Mercury.on("hide:dialogs",function(t,i){if(i!==n)return n.hide()});Mercury.on("resize",function(){return n.windowResize()});return i.__super__.bindEvents.apply(this,arguments),this.trigger.click(function(t){var i,u,r,e,f;for(t.stopPropagation(),u=[],f=n.container.find(".mercury-button"),r=0,e=f.length;r<e;r++)i=f[r],i=jQuery(i),i.position().top>5&&u.push(i.data("expander"));return n.loadContent(u.join("")),n.toggle()}),this.element.click(function(t){var i,r;return r=jQuery(t.target).closest("[data-button]").data("button"),i=n.container.find(".mercury-"+r+"-button"),i.click()})},i.prototype.windowResize=function(){return this.containerWidth>jQuery(window).width()?this.trigger.show():this.trigger.hide(),this.hide()},i.prototype.position=function(n){var t,i;return this.element.css({top:0,left:0,display:"block",visibility:"hidden"}),t=this.trigger.offset(),i=this.element.width(),t.left+i>jQuery(window).width()&&(t.left=t.left-i+this.trigger.width()),this.element.css({top:t.top+this.trigger.height(),left:t.left,display:n?"block":"none",visibility:"visible"})},i}(Mercury.Palette)}.call(this),function(){this.Mercury.tooltip=function(n,t,i){return i==null&&(i={}),Mercury.tooltip.show(n,t,i),Mercury.tooltip},jQuery.extend(Mercury.tooltip,{show:function(n,t,i){return this.forElement=n,this.content=t,this.options=i!=null?i:{},this.document=this.forElement.get(0).ownerDocument,this.initialize(),this.visible?this.update():this.appear()},initialize:function(){if(!this.initialized)return this.build(),this.bindEvents(),this.initialized=!0},build:function(){var n;return this.element=jQuery("<div>",{"class":"mercury-tooltip"}),this.element.appendTo((n=jQuery(this.options.appendTo).get(0))!=null?n:"body")},bindEvents:function(){var t,i,u,r,n=this;Mercury.on("resize",function(){if(n.visible)return n.position()});this.element.on("mousedown",function(n){return n.preventDefault(),n.stopPropagation()});for(r=this.forElement.parentsUntil(jQuery("body",this.document)),i=0,u=r.length;i<u;i++)if(t=r[i],t.scrollHeight>t.clientHeight)jQuery(t).on("scroll",function(){if(n.visible)return n.position()});return jQuery(this.document).on("scroll",function(){if(n.visible)return n.position()})},appear:function(){var n=this;return this.update(),this.element.show(),this.element.animate({opacity:1},200,"easeInOutSine",function(){return n.visible=!0})},update:function(){return this.element.html(this.content),this.position()},position:function(){var n,t,r,i;return t=this.forElement.offset(),i=this.element.width(),r=t.top+(Mercury.displayRect.top-jQuery(this.document).scrollTop())+this.forElement.outerHeight(),n=t.left-jQuery(this.document).scrollLeft(),n+i+25>Mercury.displayRect.width&&(n=n-(n+i+25)-Mercury.displayRect.width),n=n<=0?0:n,this.element.css({top:r,left:n})},hide:function(){if(this.initialized)return this.element.hide(),this.visible=!1}})}.call(this),function(){var n=Object.prototype.hasOwnProperty;this.Mercury.Snippet=function(){function t(n,t,i){this.name=n,this.identity=t,i==null&&(i={}),this.version=0,this.data="",this.wrapperTag="div",this.history=new Mercury.HistoryBuffer,this.setOptions(i)}return t.all=[],t.displayOptionsFor=function(n,t){return t==null&&(t={}),Mercury.modal(Mercury.config.snippets.optionsUrl.replace(":name",n),jQuery.extend({title:"Snippet Options",handler:"insertSnippet",snippetName:n},t)),Mercury.snippet=null},t.create=function(n,t){var i,r,u,e,o,f;if(this.all.length>0)for(r="snippet_0",f=this.all,i=0,o=f.length;i<o;i++)e=f[i],e.identity===r&&(r="snippet_"+(i+1));else r="snippet_"+this.all.length;return u=new Mercury.Snippet(n,r,t),this.all.push(u),u},t.find=function(n){var i,t,u,r;for(r=this.all,t=0,u=r.length;t<u;t++)if(i=r[t],i.identity===n)return i;return null},t.load=function(t){var r,i,u,f=[];for(i in t)n.call(t,i)&&(r=t[i],u=new Mercury.Snippet(r.name,i,r.options),f.push(this.all.push(u)));return f},t.clearAll=function(){return delete this.all,this.all=[]},t.prototype.getHTML=function(n,t){var i;return t==null&&(t=null),i=jQuery("<"+this.wrapperTag+">",{"class":""+this.name+"-snippet",contenteditable:"false","data-snippet":this.identity,"data-version":this.version},n),i.html("["+this.identity+"]"),this.loadPreview(i,t),i},t.prototype.getText=function(){return"[--"+this.identity+"--]"},t.prototype.loadPreview=function(n,t){var i=this;return t==null&&(t=null),jQuery.ajax(Mercury.config.snippets.previewUrl.replace(":name",this.name),{headers:Mercury.ajaxHeaders(),type:Mercury.config.snippets.method,data:this.options,success:function(r){return i.data=r,n.html(r),t?t():void 0},error:function(){return Mercury.notify('Error loading the preview for the "%s" snippet.',i.name)}})},t.prototype.displayOptions=function(){return Mercury.snippet=this,Mercury.modal(Mercury.config.snippets.optionsUrl.replace(":name",this.name),{title:"Snippet Options",handler:"insertSnippet",loadType:Mercury.config.snippets.method,loadData:this.options})},t.prototype.setOptions=function(n){return this.options=n,delete this.options.authenticity_token,delete this.options.utf8,this.options.wrapperTag&&(this.wrapperTag=this.options.wrapperTag),this.version+=1,this.history.push(this.options)},t.prototype.setVersion=function(n){return(n==null&&(n=null),n=parseInt(n),n&&this.history.stack[n-1])?(this.version=n-1,this.options=this.history.stack[this.version],!0):!1},t.prototype.serialize=function(){return{name:this.name,options:this.options}},t}()}.call(this),function(){var n=Object.prototype.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};this.Mercury.SnippetToolbar=function(i){function r(n,t){this.document=n,this.options=t!=null?t:{},this._boundEvents=[],r.__super__.constructor.call(this,this.options)}return t(r,i),r.prototype.build=function(){var u,t,f,e,i,r;this.element=jQuery("<div>",{"class":"mercury-toolbar mercury-snippet-toolbar",style:"display:none"}),this.element.appendTo((e=jQuery(this.options.appendTo).get(0))!=null?e:"body"),i=Mercury.config.toolbars.snippets,r=[];for(t in i)n.call(i,t)&&(f=i[t],u=this.buildButton(t,f),u?r.push(u.appendTo(this.element)):r.push(void 0));return r},r.prototype.bindEvents=function(){var n=this;return this.bindReleasableEvent(Mercury,"show:toolbar",function(t,i){if(i.snippet)return i.snippet.mouseout(function(){return n.hide()}),n.show(i.snippet)}),this.bindReleasableEvent(Mercury,"hide:toolbar",function(t,i){if((i.type&&i.type==="snippet"))return n.hide(i.immediately)}),this.bindReleasableEvent(jQuery(this.document),"scroll",function(){if(n.visible)return n.position()}),this.element.mousemove(function(){return clearTimeout(n.hideTimeout)}),this.element.mouseout(function(){return n.hide()})},r.prototype.bindReleasableEvent=function(n,t,i){n.on(t,i);return this._boundEvents.push([n,t,i])},r.prototype.show=function(n){return this.snippet=n,Mercury.tooltip.hide(),this.position(),this.appear()},r.prototype.position=function(){var t,n,i;return n=this.snippet.offset(),i=n.top+Mercury.displayRect.top-jQuery(this.document).scrollTop()-this.height()+10,t=n.left-jQuery(this.document).scrollLeft(),this.element.css({top:i,left:t})},r.prototype.appear=function(){if(clearTimeout(this.hideTimeout),!this.visible)return this.visible=!0,this.element.css({display:"block",opacity:0}),this.element.stop().animate({opacity:1},200,"easeInOutSine")},r.prototype.hide=function(n){var t=this;return n==null&&(n=!1),clearTimeout(this.hideTimeout),n?(this.element.hide(),this.visible=!1):this.hideTimeout=setTimeout(function(){return t.element.stop().animate({opacity:0},300,"easeInOutSine",function(){return t.element.hide()}),t.visible=!1},500)},r.prototype.release=function(){var r,u,f,n,e,i,t;for(this.element.off(),this.element.remove(),i=this._boundEvents,n=0,e=i.length;n<e;n++)t=i[n],f=t[0],r=t[1],u=t[2],f.off(r,u);return this._boundEvents=[]},r}(Mercury.Toolbar)}.call(this),function(){this.Mercury.Region=function(){function n(n,t,i){this.element=n,this.window=t,this.options=i!=null?i:{},Mercury.log("building "+this.type(),this.element,this.options),this.document=this.window.document,this.name=this.element.attr(Mercury.config.regions.identifier),this.history=new Mercury.HistoryBuffer,this.build(),this.bindEvents(),this.pushHistory(),this.element.data("region",this)}return n.prototype.type=function(){return"unknown"},n.prototype.build=function(){},n.prototype.focus=function(){},n.prototype.bindEvents=function(){var n=this;Mercury.on("mode",function(t,i){if(i.mode==="preview")return n.togglePreview()});Mercury.on("focus:frame",function(){if(!n.previewing&&Mercury.region===n)return n.focus()});Mercury.on("action",function(t,i){if(!n.previewing&&Mercury.region===n)return i.action?n.execCommand(i.action,i):void 0});this.element.on("mousemove",function(t){var i;if(!n.previewing&&Mercury.region===n)return i=jQuery(t.target).closest("[data-snippet]"),i.length&&(n.snippet=i,n.snippet.data("snippet"))?Mercury.trigger("show:toolbar",{type:"snippet",snippet:n.snippet}):void 0});return this.element.on("mouseout",function(){if(!n.previewing)return Mercury.trigger("hide:toolbar",{type:"snippet",immediately:!1})})},n.prototype.content=function(n,t){var r,i,u,e,f;if(n==null&&(n=null),t==null&&(t=!1),n!==null)return this.element.html(n);if(r=jQuery("<div>").appendTo(this.document.createDocumentFragment()),r.html(this.element.html().replace(/^\s+|\s+$/g,"")),t)for(f=r.find("[data-snippet]"),u=0,e=f.length;u<e;u++)i=f[u],i=jQuery(i),i.attr({contenteditable:null,"data-version":null}),i.html("["+i.data("snippet")+"]");return r.html()},n.prototype.togglePreview=function(){if(this.previewing){if(this.previewing=!1,this.element.attr(Mercury.config.regions.attribute,this.type()),Mercury.region===this)return this.focus()}else return this.previewing=!0,this.element.removeAttr(Mercury.config.regions.attribute),Mercury.trigger("region:blurred",{region:this})},n.prototype.execCommand=function(n,t){return t==null&&(t={}),this.focus(),n!=="redo"&&this.pushHistory(),Mercury.log("execCommand",n,t.value),t.already_handled?void 0:Mercury.changes=!0},n.prototype.pushHistory=function(){return this.history.push(this.content())},n.prototype.snippets=function(){var i,n,r,t,f,u;for(r={},u=this.element.find("[data-snippet]"),t=0,f=u.length;t<f;t++)(i=u[t],n=Mercury.Snippet.find(jQuery(i).data("snippet")),n)&&(n.setVersion(jQuery(i).data("version")),r[n.identity]=n.serialize());return r},n.prototype.dataAttributes=function(){var t,i,n,u,r;for(i={},r=Mercury.config.regions.dataAttributes,n=0,u=r.length;n<u;n++)t=r[n],i[t]=this.element.attr("data-"+t);return i},n.prototype.serialize=function(){return{type:this.type(),data:this.dataAttributes(),value:this.content(null,!0),snippets:this.snippets()}},n}()}.call(this),function(){var n=Object.prototype.hasOwnProperty;this.Mercury.uploader=function(n,t){return Mercury.config.uploading.enabled&&Mercury.uploader.show(n,t),Mercury.uploader},jQuery.extend(Mercury.uploader,{show:function(n,t){if(this.options=t!=null?t:{},this.file=new Mercury.uploader.File(n),this.file.errors){alert("Error: "+this.file.errors);return}if(this.supported())return Mercury.trigger("focus:window"),this.initialize(),this.appear()},initialize:function(){if(!this.initialized)return this.build(),this.bindEvents(),this.initialized=!0},supported:function(){var n;return n=new XMLHttpRequest,window.Uint8Array&&window.ArrayBuffer&&!XMLHttpRequest.prototype.sendAsBinary&&(XMLHttpRequest.prototype.sendAsBinary=function(n){var u,t,i,r;for(i=new Uint8Array(n.length),t=0,r=n.length;t<r;t++)u=n[t],i[t]=n.charCodeAt(t)&255;return this.send(i.buffer)}),!!(n.upload&&n.sendAsBinary&&(Mercury.uploader.fileReaderSupported()||Mercury.uploader.formDataSupported()))},fileReaderSupported:function(){return!!window.FileReader},formDataSupported:function(){return!!window.FormData},build:function(){var n,t;return this.element=jQuery("<div>",{"class":"mercury-uploader",style:"display:none"}),this.element.append('<div class="mercury-uploader-preview"><b><img/><\/b><\/div>'),this.element.append('<div class="mercury-uploader-details"><\/div>'),this.element.append('<div class="mercury-uploader-progress"><span><\/span><div class="mercury-uploader-indicator"><div><b>0%<\/b><\/div><\/div><\/div>'),this.updateStatus("Processing..."),this.overlay=jQuery("<div>",{"class":"mercury-uploader-overlay",style:"display:none"}),this.element.appendTo((n=jQuery(this.options.appendTo).get(0))!=null?n:"body"),this.overlay.appendTo((t=jQuery(this.options.appendTo).get(0))!=null?t:"body")},bindEvents:function(){var n=this;return Mercury.on("resize",function(){return n.position()})},appear:function(){var n=this;return this.fillDisplay(),this.position(),this.overlay.show(),this.overlay.animate({opacity:1},200,"easeInOutSine",function(){return n.element.show(),n.element.animate({opacity:1},200,"easeInOutSine",function(){return n.visible=!0,n.loadImage()})})},position:function(){var n,t;return t=this.element.outerWidth(),n=this.element.outerHeight(),this.element.css({top:(Mercury.displayRect.height-n)/2,left:(Mercury.displayRect.width-t)/2})},fillDisplay:function(){var n;return n=[Mercury.I18n("Name: %s",this.file.name),Mercury.I18n("Size: %s",this.file.readableSize),Mercury.I18n("Type: %s",this.file.type)],this.element.find(".mercury-uploader-details").html(n.join("<br/>"))},loadImage:function(){var n=this;return Mercury.uploader.fileReaderSupported()?this.file.readAsDataURL(function(t){return n.element.find(".mercury-uploader-preview b").html(jQuery("<img>",{src:t})),n.upload()}):this.upload()},upload:function(){var i,n,t=this;return n=new XMLHttpRequest,jQuery.each(["onloadstart","onprogress","onload","onabort","onerror"],function(i,r){return n.upload[r]=function(n){return t.uploaderEvents[r].call(t,n)}}),n.onload=function(n){var i,r;if(n.currentTarget.status>=400)return t.updateStatus("Error: Unable to upload the file"),Mercury.notify("Unable to process response: %s",n.currentTarget.status),t.hide();try{if(i=Mercury.config.uploading.handler?Mercury.config.uploading.handler(n.target.responseText):jQuery.parseJSON(n.target.responseText),r=i.url||i.image.url,!r)throw"Malformed response from server.";return Mercury.trigger("action",{action:"insertImage",value:{src:r}}),t.hide()}catch(u){return t.updateStatus("Error: Unable to upload the file"),Mercury.notify("Unable to process response: %s",u),t.hide()}},n.open("post",Mercury.config.uploading.url,!0),n.setRequestHeader("Accept","application/json, text/javascript, text/html, application/xml, text/xml, */*"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader(Mercury.config.csrfHeader,Mercury.csrfToken),Mercury.uploader.fileReaderSupported()?this.file.readAsBinaryString(function(i){var r;return r=new Mercury.uploader.MultiPartPost(Mercury.config.uploading.inputName,t.file,i),t.file.updateSize(r.delta),n.setRequestHeader("Content-Type","multipart/form-data; boundary="+r.boundary),n.sendAsBinary(r.body)}):(i=new FormData,i.append(Mercury.config.uploading.inputName,this.file.file,this.file.file.name),n.send(i))},updateStatus:function(n,t){var i;return this.element.find(".mercury-uploader-progress span").html(Mercury.I18n(n).toString()),t?(i=Math.floor(t*100/this.file.size)+"%",this.element.find(".mercury-uploader-indicator div").css({width:i}),this.element.find(".mercury-uploader-indicator b").html(i).show()):void 0},hide:function(n){var t=this;return n==null&&(n=0),setTimeout(function(){return t.element.animate({opacity:0},200,"easeInOutSine",function(){return t.overlay.animate({opacity:0},200,"easeInOutSine",function(){return t.overlay.hide(),t.element.hide(),t.reset(),t.visible=!1,Mercury.trigger("focus:frame")})})},n*1e3)},reset:function(){return this.element.find(".mercury-uploader-preview b").html(""),this.element.find(".mercury-uploader-indicator div").css({width:0}),this.element.find(".mercury-uploader-indicator b").html("0%").hide(),this.updateStatus("Processing...")},uploaderEvents:{onloadstart:function(){return this.updateStatus("Uploading...")},onprogress:function(n){return this.updateStatus("Uploading...",n.loaded)},onabort:function(){return this.updateStatus("Aborted"),this.hide(1)},onload:function(){return this.updateStatus("Successfully uploaded...",this.file.size)},onerror:function(){return this.updateStatus("Error: Unable to upload the file"),this.hide(3)}}}),Mercury.uploader.File=function(){function n(n){var t;this.file=n,this.fullSize=this.size=this.file.size||this.file.fileSize,this.readableSize=this.size.toBytes(),this.name=this.file.name||this.file.fileName,this.type=this.file.type||this.file.fileType,t=[],this.size>=Mercury.config.uploading.maxFileSize&&t.push(Mercury.I18n("Too large")),Mercury.config.uploading.allowedMimeTypes.indexOf(this.type)>-1||t.push(Mercury.I18n("Unsupported format")),t.length&&(this.errors=t.join(" / "))}return n.prototype.readAsDataURL=function(n){var t,i=this;return n==null&&(n=null),t=new FileReader,t.readAsDataURL(this.file),t.onload=function(){if(n)return n(t.result)}},n.prototype.readAsBinaryString=function(n){var t,i=this;return n==null&&(n=null),t=new FileReader,t.readAsBinaryString(this.file),t.onload=function(){if(n)return n(t.result)}},n.prototype.updateSize=function(n){return this.fullSize=this.size+n},n}(),Mercury.uploader.MultiPartPost=function(){function t(n,t,i,r){this.inputName=n,this.file=t,this.contents=i,this.formInputs=r!=null?r:{},this.boundary="Boundaryx20072377098235644401115438165x",this.body="",this.buildBody(),this.delta=this.body.length-this.file.size}return t.prototype.buildBody=function(){var t,i,u,r;t="--"+this.boundary,r=this.formInputs;for(i in r)n.call(r,i)&&(u=r[i],this.body+=""+t+'\r\nContent-Disposition: form-data; name="'+i+'"\r\n\r\n'+unescape(encodeURIComponent(u))+"\r\n");return this.body+=""+t+'\r\nContent-Disposition: form-data; name="'+this.inputName+'"; filename="'+this.file.name+'"\r\nContent-Type: '+this.file.type+"\r\nContent-Transfer-Encoding: binary\r\n\r\n"+this.contents+"\r\n"+t+"--"},t}()}.call(this),function(){var n=Object.prototype.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t},i=Array.prototype.indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};this.Mercury.Regions.Full=function(n){function r(n,t,i){this.element=n,this.window=t,this.options=i!=null?i:{},r.__super__.constructor.apply(this,arguments)}var u;return t(r,n),r.supported=document.designMode&&!jQuery.browser.konqueror&&!jQuery.browser.msie,r.supportedText="Chrome 10+, Firefox 4+, Safari 5+",u="full",r.prototype.type=function(){return u},r.prototype.build=function(){var t,n,r,i;for(jQuery.browser.mozilla&&this.content()===""&&this.content("&nbsp;"),this.element.data({originalOverflow:this.element.css("overflow")}),this.element.css({overflow:"auto"}),this.specialContainer=jQuery.browser.mozilla&&this.element.get(0).tagName!=="DIV",this.element.get(0).contentEditable=!0,i=this.element.find("[data-snippet]"),n=0,r=i.length;n<r;n++)t=i[n],t.contentEditable=!1,jQuery(t).attr("data-version","1");if(!this.document.mercuryEditing){this.document.mercuryEditing=!0;try{return this.document.execCommand("styleWithCSS",!1,!1),this.document.execCommand("insertBROnReturn",!1,!0),this.document.execCommand("enableInlineTableEditing",!1,!1),this.document.execCommand("enableObjectResizing",!1,!1)}catch(u){}}},r.prototype.bindEvents=function(){var n=this;r.__super__.bindEvents.apply(this,arguments);Mercury.on("region:update",function(){var t,i,r;if(!n.previewing&&Mercury.region===n)return setTimeout(function(){return n.selection().forceSelection(n.element.get(0))},1),i=n.currentElement(),i.length?(r=i.closest("table",n.element),r.length&&Mercury.tableEditor(r,i.closest("tr, td"),"<br/>"),t=i.closest("a",n.element),t.length&&t.attr("href")?Mercury.tooltip(t,'<a href="'+t.attr("href")+'" target="_blank">'+t.attr("href")+"<\/a>",{position:"below"}):Mercury.tooltip.hide()):void 0});this.element.on("dragenter",function(t){if(!n.previewing)return Mercury.snippet||t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="copy"});this.element.on("dragover",function(t){if(!n.previewing)return Mercury.snippet||t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="copy",jQuery.browser.webkit?(clearTimeout(n.dropTimeout),n.dropTimeout=setTimeout(function(){return n.element.trigger("possible:drop")},10)):void 0});this.element.on("drop",function(t){if(!n.previewing)return(clearTimeout(n.dropTimeout),n.dropTimeout=setTimeout(function(){return n.element.trigger("possible:drop")},1),!t.originalEvent.dataTransfer.files.length)?void 0:(t.preventDefault(),n.focus(),Mercury.uploader(t.originalEvent.dataTransfer.files[0]))});this.element.on("possible:drop",function(){var t;if(!n.previewing)return(t=n.element.find("img[data-snippet]").get(0))?(n.focus(),Mercury.Snippet.displayOptionsFor(jQuery(t).data("snippet")),n.document.execCommand("undo",!1,null)):void 0});this.element.on("paste",function(t){if(!n.previewing&&Mercury.region===n){if(n.specialContainer){t.preventDefault();return}if(!n.pasting)return Mercury.changes=!0,n.handlePaste(t.originalEvent)}});this.element.on("focus",function(){if(!n.previewing)return Mercury.region=n,setTimeout(function(){return n.selection().forceSelection(n.element.get(0))},1),Mercury.trigger("region:focused",{region:n})});this.element.on("blur",function(){if(!n.previewing)return Mercury.trigger("region:blurred",{region:n}),Mercury.tooltip.hide()});this.element.on("click",function(t){if(n.previewing)return jQuery(t.target).closest("a").attr("target","_parent")});this.element.on("dblclick",function(t){var i;if(!n.previewing)return i=jQuery(t.target).closest("img",n.element),i.length?(n.selection().selectNode(i.get(0),!0),Mercury.trigger("button",{action:"insertMedia"})):void 0});this.element.on("mouseup",function(){if(!n.previewing)return n.pushHistory(),Mercury.trigger("region:update",{region:n})});this.element.on("keydown",function(t){var i;if(!n.previewing){switch(t.keyCode){case 90:if(!t.metaKey)return;t.preventDefault(),t.shiftKey?n.execCommand("redo"):n.execCommand("undo");return;case 13:jQuery.browser.webkit&&n.selection().commonAncestor().closest("li, ul, ol",n.element).length===0?(t.preventDefault(),n.document.execCommand("insertParagraph",!1,null)):(n.specialContainer||jQuery.browser.opera)&&(t.preventDefault(),n.document.execCommand("insertHTML",!1,"<br/>"));break;case 9:t.preventDefault(),i=n.selection().commonAncestor(),i.closest("li",n.element).length?t.shiftKey?i.parents("ul, ol").length>1&&n.execCommand("outdent"):n.execCommand("indent"):n.execCommand("insertHTML",{value:"&nbsp;&nbsp;"})}if(t.metaKey)switch(t.keyCode){case 66:n.execCommand("bold"),t.preventDefault();break;case 73:n.execCommand("italic"),t.preventDefault();break;case 85:n.execCommand("underline"),t.preventDefault()}return n.pushHistory(t.keyCode)}});return this.element.on("keyup",function(){if(!n.previewing)return Mercury.trigger("region:update",{region:n}),Mercury.changes=!0})},r.prototype.focus=function(){var n=this;if(Mercury.region!==this){setTimeout(function(){return n.element.focus()},10);try{this.selection().selection.collapseToStart()}catch(t){}}else setTimeout(function(){return n.element.focus()},10);return Mercury.trigger("region:focused",{region:this}),Mercury.trigger("region:update",{region:this})},r.prototype.content=function(n,t,i){var u,a,r,e,h,f,o,s,v,y,c,l;if(n==null&&(n=null),t==null&&(t=!0),i==null&&(i=!1),n!==null){for(u=jQuery("<div>").appendTo(this.document.createDocumentFragment()),u.html(n),c=u.find("[data-snippet]"),s=0,v=c.length;s<v;s++)if(r=c[s],r.contentEditable=!1,r=jQuery(r),(f=Mercury.Snippet.find(r.data("snippet")))&&!r.data("version"))try{o=parseInt(r.html().match(/\/(\d+)\]/)[1]),o&&(f.setVersion(o),r.attr({"data-version":o}),r.html(f.data))}catch(p){}return this.element.html(u.html()),this.selection().selectMarker(this.element)}if(this.element.find("meta").remove(),i&&(h=this.selection(),h.placeMarker()),u=jQuery("<div>").appendTo(this.document.createDocumentFragment()),u.html(this.element.html().replace(/^\s+|\s+$/g,"")),t)for(l=u.find("[data-snippet]"),e=0,y=l.length;e<y;e++)r=l[e],r=jQuery(r),(f=Mercury.Snippet.find(r.data("snippet")))&&(f.data=r.html()),r.html("["+r.data("snippet")+"/"+r.data("version")+"]"),r.attr({contenteditable:null,"data-version":null});return a=u.html(),i&&h.removeMarker(),a},r.prototype.togglePreview=function(){return this.previewing?(this.element.get(0).contentEditable=!0,this.element.css({overflow:"auto"})):(this.content(this.content()),this.element.get(0).contentEditable=!1,this.element.css({overflow:this.element.data("originalOverflow")}),this.element.blur()),r.__super__.togglePreview.apply(this,arguments)},r.prototype.execCommand=function(n,t){var i,u;if(t==null&&(t={}),r.__super__.execCommand.apply(this,arguments),i=Mercury.config.behaviors[n]||Mercury.Regions.Full.actions[n])i.call(this,this.selection(),t);else{n==="indent"&&(u=this.element.get(0).previousSibling),n==="insertHTML"&&t.value&&t.value.get&&(t.value=jQuery("<div>").html(t.value).html());try{this.document.execCommand(n,!1,t.value)}catch(f){n==="indent"&&this.element.prev()!==u&&this.element.prev().remove()}}return this.element.find("img").one("error",function(){return jQuery(this).attr({src:"/assets/mercury/missing-image.png",title:"Image not found"})})},r.prototype.pushHistory=function(n){var i,t,r,u=this;return i=[13,46,8],r=2.5,n&&(t=i.indexOf(n)),clearTimeout(this.historyTimeout),t>=0&&t!==this.lastKnownKeyCode?this.history.push(this.content(null,!1,!0)):n?this.historyTimeout=setTimeout(function(){return u.history.push(u.content(null,!1,!0))},r*1e3):this.history.push(this.content(null,!1,!0)),this.lastKnownKeyCode=t},r.prototype.selection=function(){return new Mercury.Regions.Full.Selection(this.window.getSelection(),this.document)},r.prototype.path=function(){var n;return(n=this.selection().commonAncestor(),!n)?[]:n.get(0)===this.element.get(0)?[]:n.parentsUntil(this.element)},r.prototype.currentElement=function(){var n,t;return n=[],t=this.selection(),t.range&&(n=t.commonAncestor(),n.get(0).nodeType===3&&(n=n.parent())),n},r.prototype.handlePaste=function(n){var r,t,i=this;if(Mercury.config.pasting.sanitize==="text"&&n.clipboardData)this.execCommand("insertHTML",{value:n.clipboardData.getData("text/plain")}),n.preventDefault();else return t=this.selection(),t.placeMarker(),r=jQuery("#mercury_sanitizer",this.document).focus(),setTimeout(function(){var n;return n=i.sanitize(r),t.selectMarker(i.element),t.removeMarker(),i.element.focus(),i.execCommand("insertHTML",{value:n})},1)},r.prototype.sanitize=function(n){var e,a,o,s,t,r,u,f,v,y,h,c,l,p;if(n.find("["+Mercury.config.regions.attribute+"]").remove(),Mercury.config.pasting.sanitize)switch(Mercury.config.pasting.sanitize){case"blacklist":n.find("[style]").removeAttr("style"),n.find('[class="Apple-style-span"]').removeClass("Apple-style-span"),t=n.html();break;case"whitelist":for(h=n.find("*"),u=0,v=h.length;u<v;u++){r=h[u],e=!1,c=Mercury.config.pasting.whitelist;for(o in c)if(a=c[o],r.tagName.toLowerCase()===o.toLowerCase()){for(e=!0,l=jQuery(r.attributes),f=0,y=l.length;f<y;f++)s=l[f],(p=s.name,i.call(a,p)<0)&&jQuery(r).removeAttr(s.name);break}e||jQuery(r).replaceWith(jQuery(r).contents())}t=n.html();break;default:t=n.text()}else t=n.html(),(t.indexOf("<!--StartFragment-->")>-1||t.indexOf('="mso-')>-1||t.indexOf("<o:")>-1||t.indexOf('="Mso')>-1)&&(t=n.text());return n.html(""),t},r.actions={insertRowBefore:function(){return Mercury.tableEditor.addRow("before")},insertRowAfter:function(){return Mercury.tableEditor.addRow("after")},insertColumnBefore:function(){return Mercury.tableEditor.addColumn("before")},insertColumnAfter:function(){return Mercury.tableEditor.addColumn("after")},deleteColumn:function(){return Mercury.tableEditor.removeColumn()},deleteRow:function(){return Mercury.tableEditor.removeRow()},increaseColspan:function(){return Mercury.tableEditor.increaseColspan()},decreaseColspan:function(){return Mercury.tableEditor.decreaseColspan()},increaseRowspan:function(){return Mercury.tableEditor.increaseRowspan()},decreaseRowspan:function(){return Mercury.tableEditor.decreaseRowspan()},undo:function(){return this.content(this.history.undo())},redo:function(){return this.content(this.history.redo())},horizontalRule:function(){return this.execCommand("insertHorizontalRule")},removeFormatting:function(n){return n.insertTextNode(n.textContent())},backColor:function(n,t){return n.wrap('<span style="background-color:'+t.value.toHex()+'">',!0)},overline:function(n){return n.wrap('<span style="text-decoration:overline">',!0)},style:function(n,t){return n.wrap('<span class="'+t.value+'">',!0)},replaceHTML:function(n,t){return this.content(t.value)},insertImage:function(n,t){return this.execCommand("insertHTML",{value:jQuery("<img/>",t.value)})},insertTable:function(n,t){return this.execCommand("insertHTML",{value:t.value})},insertLink:function(n,t){var i;return i=jQuery("<"+t.value.tagName+">",this.document).attr(t.value.attrs).html(t.value.content),n.insertNode(i)},replaceLink:function(n,t){var i,r;return i=jQuery("<"+t.value.tagName+">",this.document).attr(t.value.attrs).html(t.value.content),n.selectNode(t.node),r=jQuery("<div>").html(n.content()).find("a").html(),n.replace(jQuery(i,n.context).html(r))},insertSnippet:function(n,t){var r,i;return i=t.value,(r=this.element.find("[data-snippet="+i.identity+"]")).length&&n.selectNode(r.get(0)),n.insertNode(i.getHTML(this.document))},editSnippet:function(){var n;if(this.snippet)return n=Mercury.Snippet.find(this.snippet.data("snippet")),n.displayOptions()},removeSnippet:function(){return this.snippet&&this.snippet.remove(),Mercury.trigger("hide:toolbar",{type:"snippet",immediately:!0})}},r}(Mercury.Region),Mercury.Regions.Full.Selection=function(){function n(n,t){(this.selection=n,this.context=t,this.selection.rangeCount>=1)&&(this.range=this.selection.getRangeAt(0),this.fragment=this.range.cloneContents(),this.clone=this.range.cloneRange(),this.collapsed=this.selection.isCollapsed)}return n.prototype.commonAncestor=function(n){var t;return(n==null&&(n=!1),!this.range)?null:(t=this.range.commonAncestorContainer,t.nodeType===3&&n&&(t=t.parentNode),jQuery(t))},n.prototype.wrap=function(n,t){return t==null&&(t=!1),n=jQuery(n,this.context).html(this.fragment),t&&this.replace(n),n},n.prototype.textContent=function(){return this.range.cloneContents().textContent},n.prototype.content=function(){return this.range.cloneContents()},n.prototype.is=function(n){var t;return(t=this.content(),jQuery(t).length===1&&jQuery(t.firstChild).is(n))?jQuery(t.firstChild):!1},n.prototype.forceSelection=function(n){var t,i;if(jQuery.browser.webkit)return i=this.context.createRange(),this.range?this.commonAncestor(!0).closest("[data-snippet]").length&&(t=this.context.createTextNode("\x00"),n.appendChild(t)):n.lastChild&&n.lastChild.nodeType===3&&n.lastChild.textContent.replace(/^[\s+|\n+]|[\s+|\n+]$/,"")===""?(t=n.lastChild,n.lastChild.textContent="\x00"):(t=this.context.createTextNode("\x00"),n.appendChild(t)),t?(i.setStartBefore(t),i.setEndBefore(t),this.selection.addRange(i)):void 0},n.prototype.selectMarker=function(n){var t,i;if(t=n.find("em.mercury-marker"),t.length)return i=this.context.createRange(),i.setStartBefore(t.get(0)),t.length>=2&&i.setEndBefore(t.get(1)),t.remove(),this.selection.removeAllRanges(),this.selection.addRange(i)},n.prototype.placeMarker=function(){var n,t;if(this.range)return this.startMarker=jQuery('<em class="mercury-marker"/>',this.context).get(0),this.endMarker=jQuery('<em class="mercury-marker"/>',this.context).get(0),n=this.range.cloneRange(),n.collapse(!1),n.insertNode(this.endMarker),this.range.collapsed||(t=this.range.cloneRange(),t.collapse(!0),t.insertNode(this.startMarker)),this.selection.removeAllRanges(),this.selection.addRange(this.range)},n.prototype.removeMarker=function(){return jQuery(this.startMarker).remove(),jQuery(this.endMarker).remove()},n.prototype.insertTextNode=function(n){var t;return t=this.context.createTextNode(n),this.range.extractContents(),this.range.insertNode(t),this.range.selectNodeContents(t),this.selection.addRange(this.range)},n.prototype.insertNode=function(n){return n.get&&(n=n.get(0)),jQuery.type(n)==="string"&&(n=jQuery(n,this.context).get(0)),this.range.deleteContents(),this.range.insertNode(n),this.range.selectNodeContents(n),this.selection.addRange(this.range)},n.prototype.selectNode=function(n,t){return t==null&&(t=!1),this.range.selectNode(n),t&&this.selection.removeAllRanges(),this.selection.addRange(this.range)},n.prototype.replace=function(n,t){return n.get&&(n=n.get(0)),jQuery.type(n)==="string"&&(n=jQuery(n,this.context).get(0)),this.range.deleteContents(),this.range.insertNode(n),this.range.selectNodeContents(n),this.selection.addRange(this.range),t?this.range.collapse(!1):void 0},n}()}.call(this),function(){var n=Object.prototype.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};this.Mercury.Regions.Image=function(n){function i(n,t,r){this.element=n,this.window=t,this.options=r!=null?r:{},i.__super__.constructor.apply(this,arguments)}var r;return t(i,n),i.supported=document.getElementById,i.supportedText="IE 7+, Chrome 10+, Firefox 4+, Safari 5+, Opera 8+",r="image",i.prototype.type=function(){return r},i.prototype.bindEvents=function(){var n=this;Mercury.on("mode",function(t,i){if(i.mode==="preview")return n.togglePreview()});Mercury.on("focus:frame",function(){if(!n.previewing&&Mercury.region===n)return n.focus()});Mercury.on("action",function(t,i){if(!n.previewing&&Mercury.region===n)return i.action?n.execCommand(i.action,i):void 0});this.element.on("dragenter",function(t){if(!n.previewing)return t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="copy"});this.element.on("dragover",function(t){if(!n.previewing)return t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="copy"});this.element.on("drop",function(t){if(!n.previewing)return t.originalEvent.dataTransfer.files.length?(t.preventDefault(),n.focus(),Mercury.uploader(t.originalEvent.dataTransfer.files[0])):void 0});return this.element.on("focus",function(){return n.focus()})},i.prototype.togglePreview=function(){return this.previewing?(this.previewing=!1,this.element.attr(Mercury.config.regions.attribute,r),this.build()):(this.previewing=!0,this.element.removeAttr(Mercury.config.regions.attribute),Mercury.trigger("region:blurred",{region:this}))},i.prototype.focus=function(){if(!this.previewing)return Mercury.region=this,Mercury.trigger("region:focused",{region:this}),Mercury.trigger("region:update",{region:this})},i.prototype.execCommand=function(n,t){var r;return t==null&&(t={}),i.__super__.execCommand.apply(this,arguments),(r=Mercury.Regions.Image.actions[n])?r.call(this,t):void 0},i.prototype.pushHistory=function(){return this.history.push({src:this.element.attr("src")})},i.prototype.updateSrc=function(n){return this.element.attr("src",n)},i.prototype.serialize=function(){return{type:r,data:this.dataAttributes(),attributes:{src:this.element.attr("src")}}},i.actions={undo:function(){var n;if(n=this.history.undo())return this.updateSrc(n.src)},redo:function(){var n;if(n=this.history.redo())return this.updateSrc(n.src)},insertImage:function(n){return this.updateSrc(n.value.src)}},i}(Mercury.Region)}.call(this),function(){var n=Object.prototype.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};this.Mercury.Regions.Markdown=function(n){function i(n,t,r){this.element=n,this.window=t,this.options=r!=null?r:{},i.__super__.constructor.apply(this,arguments),this.converter=new Showdown.converter}var r;return t(i,n),i.supported=document.getElementById,i.supportedText="IE 7+, Chrome 10+, Firefox 4+, Safari 5+, Opera 8+",r="markdown",i.prototype.type=function(){return r},i.prototype.build=function(){var n,t,i;return i="100%",n=this.element.height(),t=this.element.html().replace(/^\s+|\s+$/g,"").replace("&gt;",">"),this.textarea=jQuery("<textarea>",this.document).val(t).addClass("mercury-textarea"),this.textarea.css({border:0,background:"transparent",display:"block","overflow-y":"hidden",width:i,height:n,fontFamily:'"Courier New", Courier, monospace'}),this.element.empty().append(this.textarea),this.previewElement=jQuery("<div>",this.document),this.element.append(this.previewElement),this.container=this.element,this.container.data("region",this),this.element=this.textarea,this.resize()},i.prototype.bindEvents=function(){var n=this;Mercury.on("mode",function(t,i){if(i.mode==="preview")return n.togglePreview()});Mercury.on("focus:frame",function(){if(!n.previewing&&Mercury.region===n)return n.focus()});Mercury.on("action",function(t,i){if(!n.previewing&&Mercury.region===n)return i.action?n.execCommand(i.action,i):void 0});Mercury.on("unfocus:regions",function(){if(!n.previewing&&Mercury.region===n)return n.element.blur(),n.container.removeClass("focus"),Mercury.trigger("region:blurred",{region:n})});this.element.on("dragenter",function(t){if(!n.previewing)return t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="copy"});this.element.on("dragover",function(t){if(!n.previewing)return t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="copy"});this.element.on("drop",function(t){if(!n.previewing)return Mercury.snippet&&(t.preventDefault(),n.focus(),Mercury.Snippet.displayOptionsFor(Mercury.snippet)),t.originalEvent.dataTransfer.files.length?(t.preventDefault(),n.focus(),Mercury.uploader(t.originalEvent.dataTransfer.files[0])):void 0});this.element.on("focus",function(){if(!n.previewing)return Mercury.region=n,n.container.addClass("focus"),Mercury.trigger("region:focused",{region:n})});this.element.on("keydown",function(t){var f,e,o,u,r,i;if(!n.previewing){n.resize();switch(t.keyCode){case 90:if(!t.metaKey)return;t.preventDefault(),t.shiftKey?n.execCommand("redo"):n.execCommand("undo");return;case 13:u=n.selection(),i=n.element.val(),r=i.lastIndexOf("\n",u.start),f=i.indexOf("\n",u.end),f<r&&(f=i.length),i[r]==="\n"&&(r=i.lastIndexOf("\n",u.start-1)),i[r+1]==="-"&&(u.replace("\n- ",!1,!0),t.preventDefault()),/\d/.test(i[r+1])&&(e=i.substring(r,f),/(\d+)\./.test(e)&&(o=parseInt(RegExp.$1),u.replace("\n"+(o+=1)+". ",!1,!0),t.preventDefault()));break;case 9:t.preventDefault(),n.execCommand("insertHTML",{value:"  "})}if(t.metaKey)switch(t.keyCode){case 66:n.execCommand("bold"),t.preventDefault();break;case 73:n.execCommand("italic"),t.preventDefault();break;case 85:n.execCommand("underline"),t.preventDefault()}return n.pushHistory(t.keyCode)}});this.element.on("keyup",function(){if(!n.previewing)return Mercury.changes=!0,n.resize(),Mercury.trigger("region:update",{region:n})});this.element.on("mouseup",function(){if(!n.previewing)return n.focus(),Mercury.trigger("region:focused",{region:n})});return this.previewElement.on("click",function(t){if(n.previewing)return $(t.target).closest("a").attr("target","_parent")})},i.prototype.focus=function(){return this.element.focus()},i.prototype.content=function(n,t){return n==null&&(n=null),t==null&&(t=!0),n!==null?jQuery.type(n)==="string"?this.element.val(n):(this.element.val(n.html),this.selection().select(n.selection.start,n.selection.end)):this.element.val()},i.prototype.contentAndSelection=function(){return{html:this.content(null,!1),selection:this.selection().serialize()}},i.prototype.togglePreview=function(){var n;if(this.previewing){if(this.previewing=!1,this.container.attr(Mercury.config.regions.attribute,r),this.previewElement.hide(),this.element.show(),Mercury.region===this)return this.focus()}else return this.previewing=!0,this.container.removeAttr(Mercury.config.regions.attribute),n=this.converter.makeHtml(this.element.val()),this.previewElement.html(n),this.previewElement.show(),this.element.hide(),Mercury.trigger("region:blurred",{region:this})},i.prototype.execCommand=function(n,t){var r;return t==null&&(t={}),i.__super__.execCommand.apply(this,arguments),(r=Mercury.Regions.Markdown.actions[n])&&r.call(this,this.selection(),t),this.resize()},i.prototype.pushHistory=function(n){var i,t,r,u=this;return i=[13,46,8],r=2.5,n&&(t=i.indexOf(n)),clearTimeout(this.historyTimeout),t>=0&&t!==this.lastKnownKeyCode?this.history.push(this.contentAndSelection()):n?this.historyTimeout=setTimeout(function(){return u.history.push(u.contentAndSelection())},r*1e3):this.history.push(this.contentAndSelection()),this.lastKnownKeyCode=t},i.prototype.selection=function(){return new Mercury.Regions.Markdown.Selection(this.element)},i.prototype.resize=function(){return this.element.css({height:this.element.get(0).scrollHeight-100}),this.element.css({height:this.element.get(0).scrollHeight})},i.prototype.snippets=function(){},i.actions={undo:function(){return this.content(this.history.undo())},redo:function(){return this.content(this.history.redo())},insertHTML:function(n,t){var i;return t.value.get&&(i=t.value.get(0))&&(t.value=jQuery("<div>").html(i).html()),n.replace(t.value,!1,!0)},insertImage:function(n,t){return n.replace("![add alt text]("+encodeURI(t.value.src)+")",!0)},insertTable:function(n,t){return n.replace(t.value.replace(/<br>|<br\/>/ig,""),!1,!0)},insertLink:function(n,t){return n.replace("["+t.value.content+"]("+t.value.attrs.href+" 'optional title')",!0)},insertUnorderedList:function(n){return n.addList("unordered")},insertOrderedList:function(n){return n.addList("ordered")},style:function(n,t){return n.wrap('<span class="'+t.value+'">',"<\/span>")},formatblock:function(n,t){var r,u,i={h1:["# "," #"],h2:["## "," ##"],h3:["### "," ###"],h4:["#### "," ####"],h5:["##### "," #####"],h6:["###### "," ######"],pre:["    ",""],blockquote:["> ",""],p:["\n","\n"]};for(u in i)r=i[u],n.unWrapLine(""+r[0],""+r[1]);if(t.value==="blockquote"){Mercury.Regions.Markdown.actions.indent.call(this,n,t);return}return n.wrapLine(""+i[t.value][0],""+i[t.value][1])},bold:function(n){return n.wrap("**","**")},italic:function(n){return n.wrap("_","_")},subscript:function(n){return n.wrap("<sub>","<\/sub>")},superscript:function(n){return n.wrap("<sup>","<\/sup>")},indent:function(n){return n.wrapLine("> ","",!1,!0)},outdent:function(n){return n.unWrapLine("> ","",!1,!0)},horizontalRule:function(n){return n.replace("\n- - -\n")},insertSnippet:function(n,t){var i;return i=t.value,n.replace(i.getText())}},i}(Mercury.Region),Mercury.Regions.Markdown.Selection=function(){function n(n){this.element=n,this.el=this.element.get(0),this.getDetails()}return n.prototype.serialize=function(){return{start:this.start,end:this.end}},n.prototype.getDetails=function(){return this.length=this.el.selectionEnd-this.el.selectionStart,this.start=this.el.selectionStart,this.end=this.el.selectionEnd,this.text=this.element.val().substr(this.start,this.length)},n.prototype.replace=function(n,t,i){var u,f,r;return t==null&&(t=!1),i==null&&(i=!1),this.getDetails(),r=this.element.val(),f=this.element.val(),this.element.val(r.substr(0,this.start)+n+r.substr(this.end,r.length)),u=this.element.val()!==f,t&&this.select(this.start,this.start+n.length),i&&this.select(this.start+n.length,this.start+n.length),u},n.prototype.select=function(n,t){return this.start=n,this.end=t,this.element.focus(),this.el.selectionStart=this.start,this.el.selectionEnd=this.end,this.getDetails()},n.prototype.wrap=function(n,t){return this.getDetails(),this.deselectNewLines(),this.replace(n+this.text+t,this.text!==""),this.text===""?this.select(this.start+n.length,this.start+n.length):void 0},n.prototype.wrapLine=function(n,t,i,r){var e,o,f,u;return i==null&&(i=!0),r==null&&(r=!1),this.getDetails(),o=this.serialize(),u=this.element.val(),f=u.lastIndexOf("\n",this.start),e=u.indexOf("\n",this.end),e<f&&(e=u.length),u[f]==="\n"&&(f=u.lastIndexOf("\n",this.start-1)),this.select(f+1,e),this.replace(n+this.text+t,i),r?this.select(o.start+n.length,o.end+n.length):void 0},n.prototype.unWrapLine=function(n,t,i,r){var s,e,h,c,o,f,u;return i==null&&(i=!0),r==null&&(r=!1),this.getDetails(),o=this.serialize(),u=this.element.val(),f=u.lastIndexOf("\n",this.start),e=u.indexOf("\n",this.end),e<f&&(e=u.length),u[f]==="\n"&&(f=u.lastIndexOf("\n",this.start-1)),this.select(f+1,e),window.something=this.text,h=new RegExp("^"+n.regExpEscape()),c=new RegExp(""+t.regExpEscape()+"$"),s=this.replace(this.text.replace(h,"").replace(c,""),i),r&&s?this.select(o.start-n.length,o.end-n.length):void 0},n.prototype.addList=function(n){var u,i,e,f,r,t;return t=this.element.val(),r=t.lastIndexOf("\n",this.start),u=t.indexOf("\n",this.end),u<r&&(u=t.length),t[r]==="\n"&&(r=t.lastIndexOf("\n",this.start-1)),this.select(r+1,u),f=this.text.split("\n"),n==="unordered"?this.replace("- "+f.join("\n- "),!0):this.replace(function(){var t,n;for(n=[],i=0,t=f.length;i<t;i++)e=f[i],n.push(""+(i+1)+". "+e);return n}().join("\n"),!0)},n.prototype.deselectNewLines=function(){var n,t;return t=this.text,n=t.replace(/\n+$/g,"").length,this.select(this.start,this.start+n)},n.prototype.placeMarker=function(){return this.wrap("[mercury-marker]","[mercury-marker]")},n.prototype.removeMarker=function(){var i,n,t;if(t=this.element.val(),n=t.indexOf("[mercury-marker]"),n>-1)return i=t.indexOf("[mercury-marker]",n+1)-"[mercury-marker]".length,this.element.val(this.element.val().replace(/\[mercury-marker\]/g,"")),this.select(n,i)},n.prototype.textContent=function(){return this.text},n}()}.call(this),function(){var n=Object.prototype.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};this.Mercury.Regions.Simple=function(n){function i(n,t,u){this.element=n,this.window=t,this.options=u!=null?u:{},Mercury.log("building "+r,this.element,this.options),i.__super__.constructor.apply(this,arguments)}var r;return t(i,n),i.supported=document.getElementById,i.supportedText="IE 7+, Chrome 10+, Firefox 4+, Safari 5+, Opera 8+",r="simple",i.prototype.type=function(){return r},i.prototype.build=function(){var n,i,t;return this.element.css("display")==="block"?(t="100%",n=this.element.height()):(t=this.element.width(),n=this.element.height()),i=this.element.text(),this.textarea=jQuery("<textarea>",this.document).val(i).addClass("mercury-textarea"),this.textarea.css({border:0,background:"transparent","overflow-y":"hidden",width:t,height:n,fontFamily:"inherit",fontSize:"inherit",fontWeight:"inherit",fontStyle:"inherit",color:"inherit","min-height":0,padding:"0",margin:0,"border-radius":0,display:"inherit",lineHeight:"inherit",textAlign:"inherit"}),this.element.empty().append(this.textarea),this.container=this.element,this.container.data("region",this),this.element=this.textarea,this.resize()},i.prototype.bindEvents=function(){var n=this;Mercury.on("mode",function(t,i){if(i.mode==="preview")return n.togglePreview()});Mercury.on("focus:frame",function(){if(!n.previewing&&Mercury.region===n)return n.focus()});Mercury.on("action",function(t,i){if(!n.previewing&&Mercury.region===n)return i.action?n.execCommand(i.action,i):void 0});Mercury.on("unfocus:regions",function(){if(!n.previewing&&Mercury.region===n)return n.element.blur(),n.container.removeClass("focus"),Mercury.trigger("region:blurred",{region:n})});return this.bindElementEvents()},i.prototype.bindElementEvents=function(){var n=this;this.element.on("focus",function(){if(!n.previewing)return Mercury.region=n,n.container.addClass("focus"),Mercury.trigger("region:focused",{region:n})});this.element.on("keydown",function(t){var f,e,o,u,r,i;if(!n.previewing){n.resize();switch(t.keyCode){case 90:if(!t.metaKey)return;t.preventDefault(),t.shiftKey?n.execCommand("redo"):n.execCommand("undo");return;case 13:u=n.selection(),i=n.element.val(),r=i.lastIndexOf("\n",u.start),f=i.indexOf("\n",u.end),f<r&&(f=i.length),i[r]==="\n"&&(r=i.lastIndexOf("\n",u.start-1)),i[r+1]==="-"&&u.replace("\n- ",!1,!0),/\d/.test(i[r+1])&&(e=i.substring(r,f),/(\d+)\./.test(e)&&(o=parseInt(RegExp.$1),u.replace("\n"+(o+=1)+". ",!1,!0))),t.preventDefault();break;case 9:t.preventDefault(),n.execCommand("insertHTML",{value:"  "})}return n.pushHistory(t.keyCode)}});this.element.on("keyup",function(){if(!n.previewing)return Mercury.changes=!0,n.resize(),Mercury.trigger("region:update",{region:n})});this.element.on("mouseup",function(){if(!n.previewing)return n.focus(),Mercury.trigger("region:focused",{region:n})});return this.element.on("paste",function(t){if(!n.previewing&&Mercury.region===n){if(n.specialContainer){t.preventDefault();return}if(!n.pasting)return Mercury.changes=!0,n.handlePaste(t.originalEvent)}})},i.prototype.handlePaste=function(n){this.execCommand("insertHTML",{value:n.clipboardData.getData("text/plain").replace(/\n/g," ")}),n.preventDefault()},i.prototype.path=function(){return[this.container.get(0)]},i.prototype.focus=function(){return this.element.focus()},i.prototype.content=function(n,t){return n==null&&(n=null),t==null&&(t=!0),n!==null?jQuery.type(n)==="string"?this.element.val(n):(this.element.val(n.html),this.selection().select(n.selection.start,n.selection.end)):this.element.val()},i.prototype.contentAndSelection=function(){return{html:this.content(null,!1),selection:this.selection().serialize()}},i.prototype.togglePreview=function(){var n;if(this.previewing){if(this.previewing=!1,this.element=this.container,this.container.attr(Mercury.config.regions.attribute,r),this.build(),this.bindElementEvents(),Mercury.region===this)return this.focus()}else return this.previewing=!0,n=jQuery("<div><\/div>").text(this.element.val()).html(),this.container.removeAttr(Mercury.config.regions.attribute),this.container.html(n),Mercury.trigger("region:blurred",{region:this})},i.prototype.execCommand=function(n,t){var r;return t==null&&(t={}),i.__super__.execCommand.apply(this,arguments),(r=Mercury.Regions.Simple.actions[n])&&r.call(this,this.selection(),t),this.resize()},i.prototype.pushHistory=function(n){var i,t,r,u=this;return i=[13,46,8],r=2.5,n&&(t=i.indexOf(n)),clearTimeout(this.historyTimeout),t>=0&&t!==this.lastKnownKeyCode?this.history.push(this.contentAndSelection()):n?this.historyTimeout=setTimeout(function(){return u.history.push(u.contentAndSelection())},r*1e3):this.history.push(this.contentAndSelection()),this.lastKnownKeyCode=t},i.prototype.selection=function(){return new Mercury.Regions.Simple.Selection(this.element)},i.prototype.resize=function(){return this.element.css({height:this.element.get(0).scrollHeight-100}),this.element.css({height:this.element.get(0).scrollHeight})},i.prototype.snippets=function(){},i.actions={undo:function(){return this.content(this.history.undo())},redo:function(){return this.content(this.history.redo())},insertHTML:function(n,t){var i;return t.value.get&&(i=t.value.get(0))&&(t.value=jQuery("<div>").html(i).html()),n.replace(t.value,!1,!0)}},i}(Mercury.Region),Mercury.Regions.Simple.Selection=function(){function n(n){this.element=n,this.el=this.element.get(0),this.getDetails()}return n.prototype.serialize=function(){return{start:this.start,end:this.end}},n.prototype.getDetails=function(){return this.length=this.el.selectionEnd-this.el.selectionStart,this.start=this.el.selectionStart,this.end=this.el.selectionEnd,this.text=this.element.val().substr(this.start,this.length)},n.prototype.replace=function(n,t,i){var u,f,r;return t==null&&(t=!1),i==null&&(i=!1),this.getDetails(),r=this.element.val(),f=this.element.val(),this.element.val(r.substr(0,this.start)+n+r.substr(this.end,r.length)),u=this.element.val()!==f,t&&this.select(this.start,this.start+n.length),i&&this.select(this.start+n.length,this.start+n.length),u},n.prototype.select=function(n,t){return this.start=n,this.end=t,this.element.focus(),this.el.selectionStart=this.start,this.el.selectionEnd=this.end,this.getDetails()},n.prototype.wrap=function(n,t){return this.getDetails(),this.deselectNewLines(),this.replace(n+this.text+t,this.text!==""),this.text===""?this.select(this.start+n.length,this.start+n.length):void 0},n.prototype.deselectNewLines=function(){var n,t;return t=this.text,n=t.replace(/\n+$/g,"").length,this.select(this.start,this.start+n)},n.prototype.placeMarker=function(){return this.wrap("[mercury-marker]","[mercury-marker]")},n.prototype.removeMarker=function(){var i,n,t;if(t=this.element.val(),n=t.indexOf("[mercury-marker]"),n>-1)return i=t.indexOf("[mercury-marker]",n+1)-"[mercury-marker]".length,this.element.val(this.element.val().replace(/\[mercury-marker\]/g,"")),this.select(n,i)},n.prototype.textContent=function(){return this.text},n}()}.call(this),function(){var n=Object.prototype.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};this.Mercury.Regions.Snippets=function(n){function i(n,t,u){this.element=n,this.window=t,this.options=u!=null?u:{},Mercury.log("building "+r,this.element,this.options),i.__super__.constructor.apply(this,arguments),this.makeSortable()}var r;return t(i,n),i.supported=document.getElementById,i.supportedText="IE 7+, Chrome 10+, Firefox 4+, Safari 5+, Opera 8+",r="snippets",i.prototype.type=function(){return r},i.prototype.build=function(){var i,n,r,t;for(t=this.element.find("[data-snippet]"),n=0,r=t.length;n<r;n++)i=t[n],jQuery(i).attr("data-version",0);if(this.element.css("minHeight")==="0px")return this.element.css({minHeight:20})},i.prototype.bindEvents=function(){var n=this;i.__super__.bindEvents.apply(this,arguments);Mercury.on("unfocus:regions",function(){if(!n.previewing)return Mercury.region===n?(n.element.removeClass("focus"),n.element.sortable("destroy"),Mercury.trigger("region:blurred",{region:n})):void 0});Mercury.on("focus:window",function(){if(!n.previewing)return Mercury.region===n?(n.element.removeClass("focus"),n.element.sortable("destroy"),Mercury.trigger("region:blurred",{region:n})):void 0});this.element.on("mouseup",function(){if(!n.previewing)return n.focus(),Mercury.trigger("region:focused",{region:n})});this.element.on("dragover",function(t){if(!n.previewing)return t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="copy"});this.element.on("drop",function(t){if(!n.previewing&&Mercury.snippet)return n.focus(),t.preventDefault(),Mercury.Snippet.displayOptionsFor(Mercury.snippet)});jQuery(this.document).on("keydown",function(t){if(!n.previewing&&Mercury.region===n)switch(t.keyCode){case 90:return t.metaKey?(t.preventDefault(),t.shiftKey?n.execCommand("redo"):n.execCommand("undo")):void 0}});return jQuery(this.document).on("keyup",function(){if(!n.previewing&&Mercury.region===n)return Mercury.changes=!0})},i.prototype.focus=function(){return Mercury.region=this,this.makeSortable(),this.element.addClass("focus")},i.prototype.togglePreview=function(){return this.previewing?this.makeSortable():(this.element.sortable("destroy"),this.element.removeClass("focus")),i.__super__.togglePreview.apply(this,arguments)},i.prototype.execCommand=function(n,t){var r;return t==null&&(t={}),i.__super__.execCommand.apply(this,arguments),(r=Mercury.Regions.Snippets.actions[n])?r.call(this,t):void 0},i.prototype.makeSortable=function(){var n=this;return this.element.sortable("destroy").sortable({document:this.document,scroll:!1,containment:"parent",items:"[data-snippet]",opacity:.4,revert:100,tolerance:"pointer",beforeStop:function(){return Mercury.trigger("hide:toolbar",{type:"snippet",immediately:!0}),!0},stop:function(){return setTimeout(function(){return n.pushHistory()},100),!0}})},i.actions={undo:function(){return this.content(this.history.undo())},redo:function(){return this.content(this.history.redo())},insertSnippet:function(n){var i,t,r=this;return t=n.value,(i=this.element.find("[data-snippet="+t.identity+"]")).length?i.replaceWith(t.getHTML(this.document,function(){return r.pushHistory()})):this.element.append(t.getHTML(this.document,function(){return r.pushHistory()}))},editSnippet:function(){var n;if(this.snippet)return n=Mercury.Snippet.find(this.snippet.data("snippet")),n.displayOptions()},removeSnippet:function(){return this.snippet&&this.snippet.remove(),Mercury.trigger("hide:toolbar",{type:"snippet",immediately:!0})}},i}(Mercury.Region)}.call(this),function(){this.Mercury.dialogHandlers.backColor=function(){var n=this;return this.element.find(".picker, .last-picked").on("click",function(t){var i;return i=jQuery(t.target).css("background-color"),n.element.find(".last-picked").css({background:i}),n.button.css({backgroundColor:i}),Mercury.trigger("action",{action:"backColor",value:i})})}}.call(this),function(){this.Mercury.dialogHandlers.foreColor=function(){var n=this;return this.element.find(".picker, .last-picked").on("click",function(t){var i;return i=jQuery(t.target).css("background-color"),n.element.find(".last-picked").css({background:i}),n.button.css({backgroundColor:i}),Mercury.trigger("action",{action:"foreColor",value:i})})}}.call(this),function(){this.Mercury.dialogHandlers.formatblock=function(){var n=this;return this.element.find("[data-tag]").on("click",function(n){var t;return t=jQuery(n.target).data("tag"),Mercury.trigger("action",{action:"formatblock",value:t})})}}.call(this),function(){this.Mercury.dialogHandlers.snippetPanel=function(){var n=this;this.element.find("input.filter").on("keyup",function(){var t,f,i,e,u,r;for(f=n.element.find("input.filter").val(),u=n.element.find("li[data-filter]"),r=[],i=0,e=u.length;i<e;i++)t=u[i],LiquidMetal.score(jQuery(t).data("filter"),f)===0?r.push(jQuery(t).hide()):r.push(jQuery(t).show());return r});return this.element.find("img[data-snippet]").on("dragstart",function(){return Mercury.snippet=jQuery(this).data("snippet")})}}.call(this),function(){this.Mercury.dialogHandlers.style=function(){var n=this;return this.element.find("[data-class]").on("click",function(n){var t;return t=jQuery(n.target).data("class"),Mercury.trigger("action",{action:"style",value:t})})}}.call(this),function(){this.Mercury.modalHandlers.htmlEditor=function(){var n,t=this;n=Mercury.region.content(null,!0,!1),this.element.find("textarea").val(n);return this.element.find("form").on("submit",function(n){var i;return n.preventDefault(),i=t.element.find("textarea").val().replace(/\n/g,""),Mercury.trigger("action",{action:"replaceHTML",value:i}),t.hide()})}}.call(this),function(){this.Mercury.modalHandlers.insertCharacter=function(){var n=this;return this.element.find(".character").on("click",function(t){return Mercury.trigger("action",{action:"insertHTML",value:"&"+jQuery(t.target).attr("data-entity")+";"}),n.hide()})}}.call(this),function(){this.Mercury.modalHandlers.insertLink=function(){var r,n,e,u,o,s,i,f,c,h,t=this;this.element.find("label input").on("click",function(){return jQuery(this).closest("label").next(".selectable").focus()});this.element.find(".selectable").on("focus",function(){return jQuery(this).prev("label").find("input[type=radio]").prop("checked",!0)});this.element.find("#link_target").on("change",function(){return t.element.find(".link-target-options").hide(),t.element.find("#"+t.element.find("#link_target").val()+"_options").show(),t.resize(!0)});for(r=this.element.find("#link_existing_bookmark"),h=jQuery("a[name]",window.mercuryInstance.document),f=0,c=h.length;f<c;f++)o=h[f],r.append(jQuery("<option>",{value:jQuery(o).attr("name")}).text(jQuery(o).text()));Mercury.region&&Mercury.region.selection&&(i=Mercury.region.selection(),i&&i.commonAncestor&&(n=i.commonAncestor(!0).closest("a")),n&&n.length&&(e=n,this.element.find("#link_text_container").hide(),n.attr("href")&&n.attr("href").indexOf("#")===0?(r.val(n.attr("href").replace(/[^#]*#/,"")),r.prev("label").find("input[type=radio]").prop("checked",!0)):this.element.find("#link_external_url").val(n.attr("href")),n.attr("name")&&(s=this.element.find("#link_new_bookmark"),s.val(n.attr("name")),s.prev("label").find("input[type=radio]").prop("checked",!0)),n.attr("target")&&this.element.find("#link_target").val(n.attr("target")),n.attr("href")&&n.attr("href").indexOf("javascript:void")===0&&(u=n.attr("href"),this.element.find("#link_external_url").val(u.match(/window.open\('([^']+)',/)[1]),this.element.find("#link_target").val("popup"),this.element.find("#link_popup_width").val(u.match(/width=(\d+),/)[1]),this.element.find("#link_popup_height").val(u.match(/height=(\d+),/)[1]),this.element.find("#popup_options").show())),i.textContent&&this.element.find("#link_text").val(i.textContent()));return this.element.find("form").on("submit",function(n){var o,i,s,r,u,f;n.preventDefault(),s=t.element.find("#link_text").val(),r=t.element.find("#link_target").val(),u=t.element.find("input[name=link_type]:checked").val();switch(u){case"existing_bookmark":i={href:"#"+t.element.find("#link_existing_bookmark").val()};break;case"new_bookmark":i={name:""+t.element.find("#link_new_bookmark").val()};break;default:i={href:t.element.find("#link_"+u).val()}}switch(r){case"popup":o={width:parseInt(t.element.find("#link_popup_width").val())||500,height:parseInt(t.element.find("#link_popup_height").val())||500,menubar:"no",toolbar:"no"},i.href="javascript:void(window.open('"+i.href+"', 'popup_window', '"+jQuery.param(o).replace(/&/g,",")+"'))";break;default:r&&(i.target=r)}return f={tagName:"a",attrs:i,content:s},e?Mercury.trigger("action",{action:"replaceLink",value:f,node:e.get(0)}):Mercury.trigger("action",{action:"insertLink",value:f}),t.hide()})}}.call(this),function(){this.Mercury.modalHandlers.insertMedia=function(){var t,i,r,u,n=this;this.element.find("label input").on("click",function(){return jQuery(this).closest("label").next(".selectable").focus()});this.element.find(".selectable").on("focus",function(t){var i;return i=jQuery(t.target),i.prev("label").find("input[type=radio]").prop("checked",!0),n.element.find(".media-options").hide(),n.element.find("#"+i.attr("id").replace("media_","")).show(),n.resize(!0)});Mercury.region&&Mercury.region.selection&&(r=Mercury.region.selection(),r.is&&(i=r.is("img"))&&(this.element.find("#media_image_url").val(i.attr("src")),this.element.find("#media_image_alignment").val(i.attr("align")),this.element.find("#media_image_width").val(i.width()),this.element.find("#media_image_height").val(i.height()),setTimeout(function(){return n.element.find("#media_image_url").focus()},300)),r.is&&(t=r.is("iframe"))&&(u=t.attr("src"),u.indexOf("http://www.youtube.com")>-1?(this.element.find("#media_youtube_url").val("http://youtu.be/"+u.match(/\/embed\/(\w+)/)[1]),this.element.find("#media_youtube_width").val(t.width()),this.element.find("#media_youtube_height").val(t.height()),setTimeout(function(){return n.element.find("#media_youtube_url").focus()},300)):u.indexOf("http://player.vimeo.com")>-1&&(this.element.find("#media_vimeo_url").val("http://vimeo.com/"+u.match(/\/video\/(\w+)/)[1]),this.element.find("#media_vimeo_width").val(t.width()),this.element.find("#media_vimeo_height").val(t.height()),setTimeout(function(){return n.element.find("#media_vimeo_url").focus()},300))));return this.element.find("form").on("submit",function(t){var h,u,f,r,c,i,e,o,s;t.preventDefault(),c=n.element.find("input[name=media_type]:checked").val();switch(c){case"image_url":u={src:n.element.find("#media_image_url").val()},(h=n.element.find("#media_image_alignment").val())&&(u.align=h),(o=n.element.find("#media_image_width").val())&&o>0&&(u.width=o),(s=n.element.find("#media_image_height").val())&&s>0&&(u.height=s),Mercury.trigger("action",{action:"insertImage",value:u});break;case"youtube_url":if(i=n.element.find("#media_youtube_url").val(),!/^https?:\/\/youtu.be\//.test(i)){Mercury.notify("Error: The provided youtube share url was invalid.");return}f=i.replace(/https?:\/\/youtu.be\//,""),r="http",/^https:/.test(i)&&(r="https"),e=jQuery("<iframe>",{width:n.element.find("#media_youtube_width").val()||560,height:n.element.find("#media_youtube_height").val()||349,src:""+r+"://www.youtube.com/embed/"+f+"?wmode=transparent",frameborder:0,allowfullscreen:"true"}),Mercury.trigger("action",{action:"insertHTML",value:e});break;case"vimeo_url":if(i=n.element.find("#media_vimeo_url").val(),!/^https?:\/\/vimeo.com\//.test(i)){Mercury.notify("Error: The provided vimeo url was invalid.");return}f=i.replace(/^https?:\/\/vimeo.com\//,""),r="http",/^https:/.test(i)&&(r="https"),e=jQuery("<iframe>",{width:n.element.find("#media_vimeo_width").val()||400,height:n.element.find("#media_vimeo_height").val()||225,src:""+r+"://player.vimeo.com/video/"+f+"?title=1&byline=1&portrait=0&color=ffffff",frameborder:0}),Mercury.trigger("action",{action:"insertHTML",value:e})}return n.hide()})}}.call(this),function(){this.Mercury.modalHandlers.insertSnippet=function(){var n=this;return this.element.find("form").on("submit",function(t){var r,i;return t.preventDefault(),r=n.element.find("form").serializeObject(),Mercury.snippet?(i=Mercury.snippet,i.setOptions(r),Mercury.snippet=null):i=Mercury.Snippet.create(n.options.snippetName,r),Mercury.trigger("action",{action:"insertSnippet",value:i}),n.hide()})}}.call(this),function(){this.Mercury.modalHandlers.insertTable=function(){var i,n,t=this;n=this.element.find("#table_display table");n.on("click",function(t){var i;return i=jQuery(t.target),n=i.closest("table"),n.find(".selected").removeAttr("class"),i.addClass("selected"),Mercury.tableEditor(n,i,"&nbsp;")});i=n.find("td, th").first(),i.addClass("selected"),Mercury.tableEditor(n,i,"&nbsp;");this.element.find("input.action").on("click",function(n){var t=jQuery(n.target).attr("name");switch(t){case"insertRowBefore":return Mercury.tableEditor.addRow("before");case"insertRowAfter":return Mercury.tableEditor.addRow("after");case"deleteRow":return Mercury.tableEditor.removeRow();case"insertColumnBefore":return Mercury.tableEditor.addColumn("before");case"insertColumnAfter":return Mercury.tableEditor.addColumn("after");case"deleteColumn":return Mercury.tableEditor.removeColumn();case"increaseColspan":return Mercury.tableEditor.increaseColspan();case"decreaseColspan":return Mercury.tableEditor.decreaseColspan();case"increaseRowspan":return Mercury.tableEditor.increaseRowspan();case"decreaseRowspan":return Mercury.tableEditor.decreaseRowspan()}});this.element.find("#table_alignment").on("change",function(){return n.attr({align:t.element.find("#table_alignment").val()})});this.element.find("#table_border").on("keyup",function(){return n.attr({border:parseInt(t.element.find("#table_border").val())})});this.element.find("#table_spacing").on("keyup",function(){return n.attr({cellspacing:parseInt(t.element.find("#table_spacing").val())})});return this.element.find("form").on("submit",function(i){var r,u;return i.preventDefault(),n.find(".selected").removeAttr("class"),n.find("td, th").html("<br/>"),r=jQuery("<div>").html(n).html(),u=r.replace(/^\s+|\n/gm,"").replace(/(<\/.*?>|<table.*?>|<tbody>|<tr>)/g,"$1\n"),Mercury.trigger("action",{action:"insertTable",value:u}),t.hide()})}}.call(this),function(){Mercury.onload&&Mercury.onload(),jQuery(window).trigger("mercury:loaded")}.call(this);
//@ sourceMappingURL=mercury.min.js.map