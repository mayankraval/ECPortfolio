@model Joshua.Models.ContentType
<form id="new_contenttype_form" class="form-horizontal" action="/Admin/ContentType/Save" method="post">
  <style>
    .editarea {
      margin-bottom: 10px;
    }
  </style>
  <div class="editarea">
    @Html.LabelFor(model => model.Name)
    <div>
      @Html.TextBoxFor(model => model.Name)
      @Html.ValidationMessageFor(model => model.Name)
    </div>
  </div>

  <div class="editarea">
    @Html.LabelFor(model => model.FriendlyName)
    <div>
      @Html.TextBoxFor(model => model.FriendlyName, new { style = "width: 80%;" })
    </div>
  </div>

  <div class="editarea">
    @Html.LabelFor(model => model.DefaultAdministrationTab)
    <div>
      <select name="DefaultAdministrationTab">
        <option value="" @(MvcHtmlString.Create(Model == null || string.IsNullOrEmpty(Model.DefaultAdministrationTab) ? "selected=\"selected\"" : ""))>Default</option>
        @foreach (var p in J.Plugins.Plugins.Keys)
        { 
          <option value="@p" @MvcHtmlString.Create(Model != null && Model.DefaultAdministrationTab == p ? "selected=\"selected\"" : "")>@p</option>
        }
      </select>
    </div>
  </div>

  <div class="editarea">
    <style>
      ul {
        list-style-type: none;
      }

      li {
        list-style-type: none;
      }
    </style>
    @Html.LabelFor(model => model.Plugins)
    <div>
      <ul>
        @foreach (var item in J.Plugins.Plugins)
        {
          <li>
            <label class="checkbox">
              <input name="Plugins" type="checkbox" value="@item.Key" @MvcHtmlString.Create(Model.Plugins.Contains(item.Key) ? "checked=\"checked\"" : "") />
              @item.Key
            </label>
          </li>
        }
      </ul>
    </div>
  </div>

  <div class="btn-group controls pull-right" style="margin: 10px;">
    <button class="btn btn-primary" onclick="javascript:Save()"><i class="icon-ok icon-white"></i>Save</button>
    <button class="btn" data-dismiss="modal" aria-hidden="true"><i class="icon-trash "></i>Cancel</button>
  </div>
</form>


<script type="text/javascript">
  function Save() {
    index = 0;
    //$('[name="Plugins"]').each(function () { $(this).attr("name", "Plugins[" + index++ + "]"); });
    $("#new_contenttype_form").submit();
  }
</script>
