@{
  var pages = ViewBag.Pages;
  var currentpage = ViewBag.CurrentPage;
  var linktemplate = ViewBag.LinkTemplate;

  var firstpage = currentpage - 5;
  var lastpage = currentpage + 5;
  if (firstpage < 0)
  {
    firstpage -= firstpage;
    lastpage -= lastpage;
  }

  lastpage = Math.Min(lastpage, pages - 1);
}

<div class="pagination">
  <ul>
    <li class="@(currentpage == 0 ? "disabled" : "")"><a href="@MvcHtmlString.Create(string.Format(linktemplate, currentpage - 1))">Prev</a></li>
    @for (int x = 0; x < lastpage; x++)
    {
      <li><a class="@(x == currentpage ? "disabled" : "")" href="@MvcHtmlString.Create(string.Format(linktemplate, x))">@(x + 1)</a></li>  
    }
    <li class="@(currentpage == lastpage ? "disabled" : "")"><a href="@MvcHtmlString.Create(string.Format(linktemplate, currentpage + 1))">Next</a></li>
  </ul>
</div>
